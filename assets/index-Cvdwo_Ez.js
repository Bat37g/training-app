(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const h of l)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(l){const h={};return l.integrity&&(h.integrity=l.integrity),l.referrerPolicy&&(h.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?h.credentials="include":l.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function s(l){if(l.ep)return;l.ep=!0;const h=i(l);fetch(l.href,h)}})();var Td={exports:{}},ml={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function GA(){if(f_)return ml;f_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,l,h){var d=null;if(h!==void 0&&(d=""+h),l.key!==void 0&&(d=""+l.key),"key"in l){h={};for(var g in l)g!=="key"&&(h[g]=l[g])}else h=l;return l=h.ref,{$$typeof:r,type:s,key:d,ref:l!==void 0?l:null,props:h}}return ml.Fragment=t,ml.jsx=i,ml.jsxs=i,ml}var d_;function FA(){return d_||(d_=1,Td.exports=GA()),Td.exports}var Q=FA(),Ad={exports:{}},Rt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function QA(){if(m_)return Rt;m_=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),d=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),D=Symbol.iterator;function I(C){return C===null||typeof C!="object"?null:(C=D&&C[D]||C["@@iterator"],typeof C=="function"?C:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,rt={};function J(C,X,it){this.props=C,this.context=X,this.refs=rt,this.updater=it||H}J.prototype.isReactComponent={},J.prototype.setState=function(C,X){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,X,"setState")},J.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function gt(){}gt.prototype=J.prototype;function dt(C,X,it){this.props=C,this.context=X,this.refs=rt,this.updater=it||H}var ft=dt.prototype=new gt;ft.constructor=dt,Z(ft,J.prototype),ft.isPureReactComponent=!0;var qt=Array.isArray,At={H:null,A:null,T:null,S:null,V:null},wt=Object.prototype.hasOwnProperty;function M(C,X,it,W,ct,It){return it=It.ref,{$$typeof:r,type:C,key:X,ref:it!==void 0?it:null,props:It}}function S(C,X){return M(C.type,X,void 0,void 0,void 0,C.props)}function w(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function O(C){var X={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(it){return X[it]})}var V=/\/+/g;function P(C,X){return typeof C=="object"&&C!==null&&C.key!=null?O(""+C.key):X.toString(36)}function R(){}function be(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(R,R):(C.status="pending",C.then(function(X){C.status==="pending"&&(C.status="fulfilled",C.value=X)},function(X){C.status==="pending"&&(C.status="rejected",C.reason=X)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function re(C,X,it,W,ct){var It=typeof C;(It==="undefined"||It==="boolean")&&(C=null);var vt=!1;if(C===null)vt=!0;else switch(It){case"bigint":case"string":case"number":vt=!0;break;case"object":switch(C.$$typeof){case r:case t:vt=!0;break;case A:return vt=C._init,re(vt(C._payload),X,it,W,ct)}}if(vt)return ct=ct(C),vt=W===""?"."+P(C,0):W,qt(ct)?(it="",vt!=null&&(it=vt.replace(V,"$&/")+"/"),re(ct,X,it,"",function(Nt){return Nt})):ct!=null&&(w(ct)&&(ct=S(ct,it+(ct.key==null||C&&C.key===ct.key?"":(""+ct.key).replace(V,"$&/")+"/")+vt)),X.push(ct)),1;vt=0;var tt=W===""?".":W+":";if(qt(C))for(var st=0;st<C.length;st++)W=C[st],It=tt+P(W,st),vt+=re(W,X,it,It,ct);else if(st=I(C),typeof st=="function")for(C=st.call(C),st=0;!(W=C.next()).done;)W=W.value,It=tt+P(W,st++),vt+=re(W,X,it,It,ct);else if(It==="object"){if(typeof C.then=="function")return re(be(C),X,it,W,ct);throw X=String(C),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return vt}function q(C,X,it){if(C==null)return C;var W=[],ct=0;return re(C,W,"","",function(It){return X.call(it,It,ct++)}),W}function et(C){if(C._status===-1){var X=C._result;X=X(),X.then(function(it){(C._status===0||C._status===-1)&&(C._status=1,C._result=it)},function(it){(C._status===0||C._status===-1)&&(C._status=2,C._result=it)}),C._status===-1&&(C._status=0,C._result=X)}if(C._status===1)return C._result.default;throw C._result}var ut=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function jt(){}return Rt.Children={map:q,forEach:function(C,X,it){q(C,function(){X.apply(this,arguments)},it)},count:function(C){var X=0;return q(C,function(){X++}),X},toArray:function(C){return q(C,function(X){return X})||[]},only:function(C){if(!w(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},Rt.Component=J,Rt.Fragment=i,Rt.Profiler=l,Rt.PureComponent=dt,Rt.StrictMode=s,Rt.Suspense=y,Rt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=At,Rt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return At.H.useMemoCache(C)}},Rt.cache=function(C){return function(){return C.apply(null,arguments)}},Rt.cloneElement=function(C,X,it){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var W=Z({},C.props),ct=C.key,It=void 0;if(X!=null)for(vt in X.ref!==void 0&&(It=void 0),X.key!==void 0&&(ct=""+X.key),X)!wt.call(X,vt)||vt==="key"||vt==="__self"||vt==="__source"||vt==="ref"&&X.ref===void 0||(W[vt]=X[vt]);var vt=arguments.length-2;if(vt===1)W.children=it;else if(1<vt){for(var tt=Array(vt),st=0;st<vt;st++)tt[st]=arguments[st+2];W.children=tt}return M(C.type,ct,void 0,void 0,It,W)},Rt.createContext=function(C){return C={$$typeof:d,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:h,_context:C},C},Rt.createElement=function(C,X,it){var W,ct={},It=null;if(X!=null)for(W in X.key!==void 0&&(It=""+X.key),X)wt.call(X,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ct[W]=X[W]);var vt=arguments.length-2;if(vt===1)ct.children=it;else if(1<vt){for(var tt=Array(vt),st=0;st<vt;st++)tt[st]=arguments[st+2];ct.children=tt}if(C&&C.defaultProps)for(W in vt=C.defaultProps,vt)ct[W]===void 0&&(ct[W]=vt[W]);return M(C,It,void 0,void 0,null,ct)},Rt.createRef=function(){return{current:null}},Rt.forwardRef=function(C){return{$$typeof:g,render:C}},Rt.isValidElement=w,Rt.lazy=function(C){return{$$typeof:A,_payload:{_status:-1,_result:C},_init:et}},Rt.memo=function(C,X){return{$$typeof:_,type:C,compare:X===void 0?null:X}},Rt.startTransition=function(C){var X=At.T,it={};At.T=it;try{var W=C(),ct=At.S;ct!==null&&ct(it,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(jt,ut)}catch(It){ut(It)}finally{At.T=X}},Rt.unstable_useCacheRefresh=function(){return At.H.useCacheRefresh()},Rt.use=function(C){return At.H.use(C)},Rt.useActionState=function(C,X,it){return At.H.useActionState(C,X,it)},Rt.useCallback=function(C,X){return At.H.useCallback(C,X)},Rt.useContext=function(C){return At.H.useContext(C)},Rt.useDebugValue=function(){},Rt.useDeferredValue=function(C,X){return At.H.useDeferredValue(C,X)},Rt.useEffect=function(C,X,it){var W=At.H;if(typeof it=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(C,X)},Rt.useId=function(){return At.H.useId()},Rt.useImperativeHandle=function(C,X,it){return At.H.useImperativeHandle(C,X,it)},Rt.useInsertionEffect=function(C,X){return At.H.useInsertionEffect(C,X)},Rt.useLayoutEffect=function(C,X){return At.H.useLayoutEffect(C,X)},Rt.useMemo=function(C,X){return At.H.useMemo(C,X)},Rt.useOptimistic=function(C,X){return At.H.useOptimistic(C,X)},Rt.useReducer=function(C,X,it){return At.H.useReducer(C,X,it)},Rt.useRef=function(C){return At.H.useRef(C)},Rt.useState=function(C){return At.H.useState(C)},Rt.useSyncExternalStore=function(C,X,it){return At.H.useSyncExternalStore(C,X,it)},Rt.useTransition=function(){return At.H.useTransition()},Rt.version="19.1.1",Rt}var g_;function mm(){return g_||(g_=1,Ad.exports=QA()),Ad.exports}var ze=mm(),Sd={exports:{}},gl={},bd={exports:{}},wd={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function KA(){return p_||(p_=1,function(r){function t(q,et){var ut=q.length;q.push(et);t:for(;0<ut;){var jt=ut-1>>>1,C=q[jt];if(0<l(C,et))q[jt]=et,q[ut]=C,ut=jt;else break t}}function i(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var et=q[0],ut=q.pop();if(ut!==et){q[0]=ut;t:for(var jt=0,C=q.length,X=C>>>1;jt<X;){var it=2*(jt+1)-1,W=q[it],ct=it+1,It=q[ct];if(0>l(W,ut))ct<C&&0>l(It,W)?(q[jt]=It,q[ct]=ut,jt=ct):(q[jt]=W,q[it]=ut,jt=it);else if(ct<C&&0>l(It,ut))q[jt]=It,q[ct]=ut,jt=ct;else break t}}return et}function l(q,et){var ut=q.sortIndex-et.sortIndex;return ut!==0?ut:q.id-et.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;r.unstable_now=function(){return h.now()}}else{var d=Date,g=d.now();r.unstable_now=function(){return d.now()-g}}var y=[],_=[],A=1,D=null,I=3,H=!1,Z=!1,rt=!1,J=!1,gt=typeof setTimeout=="function"?setTimeout:null,dt=typeof clearTimeout=="function"?clearTimeout:null,ft=typeof setImmediate<"u"?setImmediate:null;function qt(q){for(var et=i(_);et!==null;){if(et.callback===null)s(_);else if(et.startTime<=q)s(_),et.sortIndex=et.expirationTime,t(y,et);else break;et=i(_)}}function At(q){if(rt=!1,qt(q),!Z)if(i(y)!==null)Z=!0,wt||(wt=!0,P());else{var et=i(_);et!==null&&re(At,et.startTime-q)}}var wt=!1,M=-1,S=5,w=-1;function O(){return J?!0:!(r.unstable_now()-w<S)}function V(){if(J=!1,wt){var q=r.unstable_now();w=q;var et=!0;try{t:{Z=!1,rt&&(rt=!1,dt(M),M=-1),H=!0;var ut=I;try{e:{for(qt(q),D=i(y);D!==null&&!(D.expirationTime>q&&O());){var jt=D.callback;if(typeof jt=="function"){D.callback=null,I=D.priorityLevel;var C=jt(D.expirationTime<=q);if(q=r.unstable_now(),typeof C=="function"){D.callback=C,qt(q),et=!0;break e}D===i(y)&&s(y),qt(q)}else s(y);D=i(y)}if(D!==null)et=!0;else{var X=i(_);X!==null&&re(At,X.startTime-q),et=!1}}break t}finally{D=null,I=ut,H=!1}et=void 0}}finally{et?P():wt=!1}}}var P;if(typeof ft=="function")P=function(){ft(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,be=R.port2;R.port1.onmessage=V,P=function(){be.postMessage(null)}}else P=function(){gt(V,0)};function re(q,et){M=gt(function(){q(r.unstable_now())},et)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(q){switch(I){case 1:case 2:case 3:var et=3;break;default:et=I}var ut=I;I=et;try{return q()}finally{I=ut}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(q,et){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ut=I;I=q;try{return et()}finally{I=ut}},r.unstable_scheduleCallback=function(q,et,ut){var jt=r.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?jt+ut:jt):ut=jt,q){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=ut+C,q={id:A++,callback:et,priorityLevel:q,startTime:ut,expirationTime:C,sortIndex:-1},ut>jt?(q.sortIndex=ut,t(_,q),i(y)===null&&q===i(_)&&(rt?(dt(M),M=-1):rt=!0,re(At,ut-jt))):(q.sortIndex=C,t(y,q),Z||H||(Z=!0,wt||(wt=!0,P()))),q},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(q){var et=I;return function(){var ut=I;I=et;try{return q.apply(this,arguments)}finally{I=ut}}}}(wd)),wd}var y_;function YA(){return y_||(y_=1,bd.exports=KA()),bd.exports}var Rd={exports:{}},Je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var __;function XA(){if(__)return Je;__=1;var r=mm();function t(y){var _="https://react.dev/errors/"+y;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)_+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+y+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function h(y,_,A){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:D==null?null:""+D,children:y,containerInfo:_,implementation:A}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,_){if(y==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return Je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Je.createPortal=function(y,_){var A=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(t(299));return h(y,_,null,A)},Je.flushSync=function(y){var _=d.T,A=s.p;try{if(d.T=null,s.p=2,y)return y()}finally{d.T=_,s.p=A,s.d.f()}},Je.preconnect=function(y,_){typeof y=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,s.d.C(y,_))},Je.prefetchDNS=function(y){typeof y=="string"&&s.d.D(y)},Je.preinit=function(y,_){if(typeof y=="string"&&_&&typeof _.as=="string"){var A=_.as,D=g(A,_.crossOrigin),I=typeof _.integrity=="string"?_.integrity:void 0,H=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;A==="style"?s.d.S(y,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:D,integrity:I,fetchPriority:H}):A==="script"&&s.d.X(y,{crossOrigin:D,integrity:I,fetchPriority:H,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},Je.preinitModule=function(y,_){if(typeof y=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var A=g(_.as,_.crossOrigin);s.d.M(y,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&s.d.M(y)},Je.preload=function(y,_){if(typeof y=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var A=_.as,D=g(A,_.crossOrigin);s.d.L(y,A,{crossOrigin:D,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},Je.preloadModule=function(y,_){if(typeof y=="string")if(_){var A=g(_.as,_.crossOrigin);s.d.m(y,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else s.d.m(y)},Je.requestFormReset=function(y){s.d.r(y)},Je.unstable_batchedUpdates=function(y,_){return y(_)},Je.useFormState=function(y,_,A){return d.H.useFormState(y,_,A)},Je.useFormStatus=function(){return d.H.useHostTransitionStatus()},Je.version="19.1.1",Je}var v_;function $A(){if(v_)return Rd.exports;v_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Rd.exports=XA(),Rd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E_;function ZA(){if(E_)return gl;E_=1;var r=YA(),t=mm(),i=$A();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function g(e){if(h(e)!==e)throw Error(s(188))}function y(e){var n=e.alternate;if(!n){if(n=h(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var c=a.return;if(c===null)break;var f=c.alternate;if(f===null){if(o=c.return,o!==null){a=o;continue}break}if(c.child===f.child){for(f=c.child;f;){if(f===a)return g(c),e;if(f===o)return g(c),n;f=f.sibling}throw Error(s(188))}if(a.return!==o.return)a=c,o=f;else{for(var v=!1,E=c.child;E;){if(E===a){v=!0,a=c,o=f;break}if(E===o){v=!0,o=c,a=f;break}E=E.sibling}if(!v){for(E=f.child;E;){if(E===a){v=!0,a=f,o=c;break}if(E===o){v=!0,o=f,a=c;break}E=E.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function _(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=_(e),n!==null)return n;e=e.sibling}return null}var A=Object.assign,D=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),H=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),rt=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),gt=Symbol.for("react.provider"),dt=Symbol.for("react.consumer"),ft=Symbol.for("react.context"),qt=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),wt=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var R=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===R?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case J:return"Profiler";case rt:return"StrictMode";case At:return"Suspense";case wt:return"SuspenseList";case w:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case H:return"Portal";case ft:return(e.displayName||"Context")+".Provider";case dt:return(e._context.displayName||"Context")+".Consumer";case qt:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return n=e.displayName||null,n!==null?n:be(e.type)||"Memo";case S:n=e._payload,e=e._init;try{return be(e(n))}catch{}}return null}var re=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},jt=[],C=-1;function X(e){return{current:e}}function it(e){0>C||(e.current=jt[C],jt[C]=null,C--)}function W(e,n){C++,jt[C]=e.current,e.current=n}var ct=X(null),It=X(null),vt=X(null),tt=X(null);function st(e,n){switch(W(vt,n),W(It,e),W(ct,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?jy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=jy(n),e=By(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}it(ct),W(ct,e)}function Nt(){it(ct),it(It),it(vt)}function oe(e){e.memoizedState!==null&&W(tt,e);var n=ct.current,a=By(n,e.type);n!==a&&(W(It,e),W(ct,a))}function te(e){It.current===e&&(it(ct),it(It)),tt.current===e&&(it(tt),ul._currentValue=ut)}var we=Object.prototype.hasOwnProperty,sn=r.unstable_scheduleCallback,wn=r.unstable_cancelCallback,Me=r.unstable_shouldYield,Rn=r.unstable_requestPaint,Xe=r.unstable_now,Bn=r.unstable_getCurrentPriorityLevel,Jr=r.unstable_ImmediatePriority,Hs=r.unstable_UserBlockingPriority,Wr=r.unstable_NormalPriority,Th=r.unstable_LowPriority,Gs=r.unstable_IdlePriority,oo=r.log,Kl=r.unstable_setDisableYieldValue,ce=null,Qt=null;function gn(e){if(typeof oo=="function"&&Kl(e),Qt&&typeof Qt.setStrictMode=="function")try{Qt.setStrictMode(ce,e)}catch{}}var $e=Math.clz32?Math.clz32:ts,Yl=Math.log,Ah=Math.LN2;function ts(e){return e>>>=0,e===0?32:31-(Yl(e)/Ah|0)|0}var es=256,ns=4194304;function qn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fs(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var c=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var E=o&134217727;return E!==0?(o=E&~f,o!==0?c=qn(o):(v&=E,v!==0?c=qn(v):a||(a=E&~e,a!==0&&(c=qn(a))))):(E=o&~f,E!==0?c=qn(E):v!==0?c=qn(v):a||(a=o&~e,a!==0&&(c=qn(a)))),c===0?0:n!==0&&n!==c&&(n&f)===0&&(f=c&-c,a=n&-n,f>=a||f===32&&(a&4194048)!==0)?n:c}function is(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function lo(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uo(){var e=es;return es<<=1,(es&4194048)===0&&(es=256),e}function co(){var e=ns;return ns<<=1,(ns&62914560)===0&&(ns=4194304),e}function Ai(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function Si(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ho(e,n,a,o,c,f){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var E=e.entanglements,b=e.expirationTimes,L=e.hiddenUpdates;for(a=v&~a;0<a;){var G=31-$e(a),K=1<<G;E[G]=0,b[G]=-1;var z=L[G];if(z!==null)for(L[G]=null,G=0;G<z.length;G++){var j=z[G];j!==null&&(j.lane&=-536870913)}a&=~K}o!==0&&Xn(e,o,0),f!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~n))}function Xn(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-$e(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&4194090}function fo(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-$e(a),c=1<<o;c&n|e[o]&n&&(e[o]|=n),a&=~c}}function ir(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Qs(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function rr(){var e=et.p;return e!==0?e:(e=window.event,e===void 0?32:a_(e.type))}function Xl(e,n){var a=et.p;try{return et.p=e,n()}finally{et.p=a}}var se=Math.random().toString(36).slice(2),Re="__reactFiber$"+se,_e="__reactProps$"+se,In="__reactContainer$"+se,mo="__reactEvents$"+se,Sh="__reactListeners$"+se,sr="__reactHandles$"+se,$l="__reactResources$"+se,rs="__reactMarker$"+se;function ar(e){delete e[Re],delete e[_e],delete e[mo],delete e[Sh],delete e[sr]}function bi(e){var n=e[Re];if(n)return n;for(var a=e.parentNode;a;){if(n=a[In]||a[Re]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=Fy(e);e!==null;){if(a=e[Re])return a;e=Fy(e)}return n}e=a,a=e.parentNode}return null}function $n(e){if(e=e[Re]||e[In]){var n=e.tag;if(n===5||n===6||n===13||n===26||n===27||n===3)return e}return null}function Zn(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function an(e){var n=e[$l];return n||(n=e[$l]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function de(e){e[rs]=!0}var go=new Set,Ks={};function Hn(e,n){wi(e,n),wi(e+"Capture",n)}function wi(e,n){for(Ks[e]=n,e=0;e<n.length;e++)go.add(n[e])}var Zl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},ss={};function Wl(e){return we.call(ss,e)?!0:we.call(Jl,e)?!1:Zl.test(e)?ss[e]=!0:(Jl[e]=!0,!1)}function or(e,n,a){if(Wl(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Jn(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Be(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}var as,tu;function Ri(e){if(as===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);as=n&&n[1]||"",tu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+as+e+tu}var Ys=!1;function Xs(e,n){if(!e||Ys)return"";Ys=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(j){var z=j}Reflect.construct(e,[],K)}else{try{K.call()}catch(j){z=j}e.call(K.prototype)}}else{try{throw Error()}catch(j){z=j}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(j){if(j&&z&&typeof j.stack=="string")return[j.stack,z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),v=f[0],E=f[1];if(v&&E){var b=v.split(`
`),L=E.split(`
`);for(c=o=0;o<b.length&&!b[o].includes("DetermineComponentFrameRoot");)o++;for(;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;if(o===b.length||c===L.length)for(o=b.length-1,c=L.length-1;1<=o&&0<=c&&b[o]!==L[c];)c--;for(;1<=o&&0<=c;o--,c--)if(b[o]!==L[c]){if(o!==1||c!==1)do if(o--,c--,0>c||b[o]!==L[c]){var G=`
`+b[o].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=o&&0<=c);break}}}finally{Ys=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ri(a):""}function po(e){switch(e.tag){case 26:case 27:case 5:return Ri(e.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 15:return Xs(e.type,!1);case 11:return Xs(e.type.render,!1);case 1:return Xs(e.type,!0);case 31:return Ri("Activity");default:return""}}function $s(e){try{var n="";do n+=po(e),e=e.return;while(e);return n}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function on(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yo(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function bh(e){var n=yo(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),o=""+e[n];if(!e.hasOwnProperty(n)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var c=a.get,f=a.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return c.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,n,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Zs(e){e._valueTracker||(e._valueTracker=bh(e))}function _o(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=yo(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function os(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wh=/[\n"\\]/g;function ve(e){return e.replace(wh,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function pn(e,n,a,o,c,f,v,E){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),n!=null?v==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+on(n)):e.value!==""+on(n)&&(e.value=""+on(n)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),n!=null?lr(e,v,on(n)):a!=null?lr(e,v,on(a)):o!=null&&e.removeAttribute("value"),c==null&&f!=null&&(e.defaultChecked=!!f),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?e.name=""+on(E):e.removeAttribute("name")}function ls(e,n,a,o,c,f,v,E){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||n!=null))return;a=a!=null?""+on(a):"",n=n!=null?""+on(n):a,E||n===e.value||(e.value=n),e.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=E?e.checked:!!o,e.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v)}function lr(e,n,a){n==="number"&&os(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Ii(e,n,a,o){if(e=e.options,n){n={};for(var c=0;c<a.length;c++)n["$"+a[c]]=!0;for(a=0;a<e.length;a++)c=n.hasOwnProperty("$"+e[a].value),e[a].selected!==c&&(e[a].selected=c),c&&o&&(e[a].defaultSelected=!0)}else{for(a=""+on(a),n=null,c=0;c<e.length;c++){if(e[c].value===a){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}n!==null||e[c].disabled||(n=e[c])}n!==null&&(n.selected=!0)}}function Xt(e,n,a){if(n!=null&&(n=""+on(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+on(a):""}function us(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(re(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=on(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o)}function Cn(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var cs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eu(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||cs.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function vo(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&a[c]!==o&&eu(e,c,o)}else for(var f in n)n.hasOwnProperty(f)&&eu(e,f,n[f])}function Eo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ih=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Js(e){return Ih.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Ci=null;function Dn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,Ni=null;function To(e){var n=$n(e);if(n&&(e=n.stateNode)){var a=e[_e]||null;t:switch(e=n.stateNode,n.type){case"input":if(pn(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+ve(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var c=o[_e]||null;if(!c)throw Error(s(90));pn(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&_o(o)}break t;case"textarea":Xt(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&Ii(e,!!a.multiple,n,!1)}}}var Wn=!1;function nu(e,n,a){if(Wn)return e(n,a);Wn=!0;try{var o=e(n);return o}finally{if(Wn=!1,(Di!==null||Ni!==null)&&(Xu(),Di&&(n=Di,e=Ni,Ni=Di=null,To(n),e)))for(n=0;n<e.length;n++)To(e[n])}}function hs(e,n){var a=e.stateNode;if(a===null)return null;var o=a[_e]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nn=!1;if(Gn)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){Nn=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{Nn=!1}var ti=null,ur=null,Oi=null;function Ao(){if(Oi)return Oi;var e,n=ur,a=n.length,o,c="value"in ti?ti.value:ti.textContent,f=c.length;for(e=0;e<a&&n[e]===c[e];e++);var v=a-e;for(o=1;o<=v&&n[a-o]===c[f-o];o++);return Oi=c.slice(e,1<o?1-o:void 0)}function ei(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function ni(){return!0}function So(){return!1}function xe(e){function n(a,o,c,f,v){this._reactName=a,this._targetInst=c,this.type=o,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(a=e[E],this[E]=a?a(f):f[E]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ni:So,this.isPropagationStopped=So,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),n}var Gt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ws=xe(Gt),ds=A({},Gt,{view:0,detail:0}),iu=xe(ds),ta,ea,ii,ms=A({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ys,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ii&&(ii&&e.type==="mousemove"?(ta=e.screenX-ii.screenX,ea=e.screenY-ii.screenY):ea=ta=0,ii=e),ta)},movementY:function(e){return"movementY"in e?e.movementY:ea}}),On=xe(ms),ru=A({},ms,{dataTransfer:0}),Ch=xe(ru),gs=A({},ds,{relatedTarget:0}),na=xe(gs),bo=A({},Gt,{animationName:0,elapsedTime:0,pseudoElement:0}),ia=xe(bo),su=A({},Gt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ra=xe(su),Dh=A({},Gt,{data:0}),wo=xe(Dh),ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},au={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ou={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ro(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ou[e])?!!n[e]:!1}function ys(){return Ro}var lu=A({},ds,{key:function(e){if(e.key){var n=ps[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=ei(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?au[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ys,charCode:function(e){return e.type==="keypress"?ei(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ei(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sa=xe(lu),uu=A({},ms,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Io=xe(uu),Vi=A({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ys}),cu=xe(Vi),hu=A({},Gt,{propertyName:0,elapsedTime:0,pseudoElement:0}),fu=xe(hu),du=A({},ms,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),aa=xe(du),ln=A({},Gt,{newState:0,oldState:0}),mu=xe(ln),gu=[9,13,27,32],ri=Gn&&"CompositionEvent"in window,u=null;Gn&&"documentMode"in document&&(u=document.documentMode);var m=Gn&&"TextEvent"in window&&!u,p=Gn&&(!ri||u&&8<u&&11>=u),T=" ",k=!1;function B(e,n){switch(e){case"keyup":return gu.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nt(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kt=!1;function Ie(e,n){switch(e){case"compositionend":return nt(n);case"keypress":return n.which!==32?null:(k=!0,T);case"textInput":return e=n.data,e===T&&k?null:e;default:return null}}function Ut(e,n){if(kt)return e==="compositionend"||!ri&&B(e,n)?(e=Ao(),Oi=ur=ti=null,kt=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return p&&n.locale!=="ko"?null:n.data;default:return null}}var Pe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ce(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Pe[e.type]:n==="textarea"}function Mi(e,n,a,o){Di?Ni?Ni.push(o):Ni=[o]:Di=o,n=ec(n,"onChange"),0<n.length&&(a=new Ws("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var qe=null,si=null;function Co(e){Py(e,0)}function pu(e){var n=Zn(e);if(_o(n))return e}function ng(e,n){if(e==="change")return n}var ig=!1;if(Gn){var Nh;if(Gn){var Oh="oninput"in document;if(!Oh){var rg=document.createElement("div");rg.setAttribute("oninput","return;"),Oh=typeof rg.oninput=="function"}Nh=Oh}else Nh=!1;ig=Nh&&(!document.documentMode||9<document.documentMode)}function sg(){qe&&(qe.detachEvent("onpropertychange",ag),si=qe=null)}function ag(e){if(e.propertyName==="value"&&pu(si)){var n=[];Mi(n,si,e,Dn(e)),nu(Co,n)}}function ET(e,n,a){e==="focusin"?(sg(),qe=n,si=a,qe.attachEvent("onpropertychange",ag)):e==="focusout"&&sg()}function TT(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return pu(si)}function AT(e,n){if(e==="click")return pu(n)}function ST(e,n){if(e==="input"||e==="change")return pu(n)}function bT(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var yn=typeof Object.is=="function"?Object.is:bT;function Do(e,n){if(yn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var c=a[o];if(!we.call(n,c)||!yn(e[c],n[c]))return!1}return!0}function og(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lg(e,n){var a=og(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=og(a)}}function ug(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ug(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function cg(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=os(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=os(e.document)}return n}function Vh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var wT=Gn&&"documentMode"in document&&11>=document.documentMode,oa=null,Mh=null,No=null,xh=!1;function hg(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xh||oa==null||oa!==os(o)||(o=oa,"selectionStart"in o&&Vh(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),No&&Do(No,o)||(No=o,o=ec(Mh,"onSelect"),0<o.length&&(n=new Ws("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=oa)))}function _s(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var la={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},Ph={},fg={};Gn&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete la.animationend.animation,delete la.animationiteration.animation,delete la.animationstart.animation),"TransitionEvent"in window||delete la.transitionend.transition);function vs(e){if(Ph[e])return Ph[e];if(!la[e])return e;var n=la[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in fg)return Ph[e]=n[a];return e}var dg=vs("animationend"),mg=vs("animationiteration"),gg=vs("animationstart"),RT=vs("transitionrun"),IT=vs("transitionstart"),CT=vs("transitioncancel"),pg=vs("transitionend"),yg=new Map,kh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kh.push("scrollEnd");function Fn(e,n){yg.set(e,n),Hn(n,[e])}var _g=new WeakMap;function Vn(e,n){if(typeof e=="object"&&e!==null){var a=_g.get(e);return a!==void 0?a:(n={value:e,source:n,stack:$s(n)},_g.set(e,n),n)}return{value:e,source:n,stack:$s(n)}}var Mn=[],ua=0,Uh=0;function yu(){for(var e=ua,n=Uh=ua=0;n<e;){var a=Mn[n];Mn[n++]=null;var o=Mn[n];Mn[n++]=null;var c=Mn[n];Mn[n++]=null;var f=Mn[n];if(Mn[n++]=null,o!==null&&c!==null){var v=o.pending;v===null?c.next=c:(c.next=v.next,v.next=c),o.pending=c}f!==0&&vg(a,c,f)}}function _u(e,n,a,o){Mn[ua++]=e,Mn[ua++]=n,Mn[ua++]=a,Mn[ua++]=o,Uh|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Lh(e,n,a,o){return _u(e,n,a,o),vu(e)}function ca(e,n){return _u(e,null,null,n),vu(e)}function vg(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var c=!1,f=e.return;f!==null;)f.childLanes|=a,o=f.alternate,o!==null&&(o.childLanes|=a),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(c=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,c&&n!==null&&(c=31-$e(a),e=f.hiddenUpdates,o=e[c],o===null?e[c]=[n]:o.push(n),n.lane=a|536870912),f):null}function vu(e){if(50<el)throw el=0,Ff=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ha={};function DT(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(e,n,a,o){return new DT(e,n,a,o)}function zh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xi(e,n){var a=e.alternate;return a===null?(a=_n(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Eg(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Eu(e,n,a,o,c,f){var v=0;if(o=e,typeof e=="function")zh(e)&&(v=1);else if(typeof e=="string")v=OA(e,a,ct.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case w:return e=_n(31,a,n,c),e.elementType=w,e.lanes=f,e;case Z:return Es(a.children,c,f,n);case rt:v=8,c|=24;break;case J:return e=_n(12,a,n,c|2),e.elementType=J,e.lanes=f,e;case At:return e=_n(13,a,n,c),e.elementType=At,e.lanes=f,e;case wt:return e=_n(19,a,n,c),e.elementType=wt,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gt:case ft:v=10;break t;case dt:v=9;break t;case qt:v=11;break t;case M:v=14;break t;case S:v=16,o=null;break t}v=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=_n(v,a,n,c),n.elementType=e,n.type=o,n.lanes=f,n}function Es(e,n,a,o){return e=_n(7,e,o,n),e.lanes=a,e}function jh(e,n,a){return e=_n(6,e,null,n),e.lanes=a,e}function Bh(e,n,a){return n=_n(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var fa=[],da=0,Tu=null,Au=0,xn=[],Pn=0,Ts=null,Pi=1,ki="";function As(e,n){fa[da++]=Au,fa[da++]=Tu,Tu=e,Au=n}function Tg(e,n,a){xn[Pn++]=Pi,xn[Pn++]=ki,xn[Pn++]=Ts,Ts=e;var o=Pi;e=ki;var c=32-$e(o)-1;o&=~(1<<c),a+=1;var f=32-$e(n)+c;if(30<f){var v=c-c%5;f=(o&(1<<v)-1).toString(32),o>>=v,c-=v,Pi=1<<32-$e(n)+c|a<<c|o,ki=f+e}else Pi=1<<f|a<<c|o,ki=e}function qh(e){e.return!==null&&(As(e,1),Tg(e,1,0))}function Hh(e){for(;e===Tu;)Tu=fa[--da],fa[da]=null,Au=fa[--da],fa[da]=null;for(;e===Ts;)Ts=xn[--Pn],xn[Pn]=null,ki=xn[--Pn],xn[Pn]=null,Pi=xn[--Pn],xn[Pn]=null}var un=null,he=null,Ht=!1,Ss=null,ai=!1,Gh=Error(s(519));function bs(e){var n=Error(s(418,""));throw Mo(Vn(n,e)),Gh}function Ag(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[Re]=e,n[_e]=o,a){case"dialog":Vt("cancel",n),Vt("close",n);break;case"iframe":case"object":case"embed":Vt("load",n);break;case"video":case"audio":for(a=0;a<il.length;a++)Vt(il[a],n);break;case"source":Vt("error",n);break;case"img":case"image":case"link":Vt("error",n),Vt("load",n);break;case"details":Vt("toggle",n);break;case"input":Vt("invalid",n),ls(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0),Zs(n);break;case"select":Vt("invalid",n);break;case"textarea":Vt("invalid",n),us(n,o.value,o.defaultValue,o.children),Zs(n)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||zy(n.textContent,a)?(o.popover!=null&&(Vt("beforetoggle",n),Vt("toggle",n)),o.onScroll!=null&&Vt("scroll",n),o.onScrollEnd!=null&&Vt("scrollend",n),o.onClick!=null&&(n.onclick=nc),n=!0):n=!1,n||bs(e)}function Sg(e){for(un=e.return;un;)switch(un.tag){case 5:case 13:ai=!1;return;case 27:case 3:ai=!0;return;default:un=un.return}}function Oo(e){if(e!==un)return!1;if(!Ht)return Sg(e),Ht=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||od(e.type,e.memoizedProps)),a=!a),a&&he&&bs(e),Sg(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));t:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(n===0){he=Kn(e.nextSibling);break t}n--}else a!=="$"&&a!=="$!"&&a!=="$?"||n++;e=e.nextSibling}he=null}}else n===27?(n=he,wr(e.type)?(e=hd,hd=null,he=e):he=n):he=un?Kn(e.stateNode.nextSibling):null;return!0}function Vo(){he=un=null,Ht=!1}function bg(){var e=Ss;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),Ss=null),e}function Mo(e){Ss===null?Ss=[e]:Ss.push(e)}var Fh=X(null),ws=null,Ui=null;function cr(e,n,a){W(Fh,n._currentValue),n._currentValue=a}function Li(e){e._currentValue=Fh.current,it(Fh)}function Qh(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Kh(e,n,a,o){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var f=c.dependencies;if(f!==null){var v=c.child;f=f.firstContext;t:for(;f!==null;){var E=f;f=c;for(var b=0;b<n.length;b++)if(E.context===n[b]){f.lanes|=a,E=f.alternate,E!==null&&(E.lanes|=a),Qh(f.return,a,e),o||(v=null);break t}f=E.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(s(341));v.lanes|=a,f=v.alternate,f!==null&&(f.lanes|=a),Qh(v,a,e),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===e){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function xo(e,n,a,o){e=null;for(var c=n,f=!1;c!==null;){if(!f){if((c.flags&524288)!==0)f=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var E=c.type;yn(c.pendingProps.value,v.value)||(e!==null?e.push(E):e=[E])}}else if(c===tt.current){if(v=c.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(ul):e=[ul])}c=c.return}e!==null&&Kh(n,e,a,o),n.flags|=262144}function Su(e){for(e=e.firstContext;e!==null;){if(!yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rs(e){ws=e,Ui=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ze(e){return wg(ws,e)}function bu(e,n){return ws===null&&Rs(e),wg(e,n)}function wg(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Ui===null){if(e===null)throw Error(s(308));Ui=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Ui=Ui.next=n;return a}var NT=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},OT=r.unstable_scheduleCallback,VT=r.unstable_NormalPriority,De={$$typeof:ft,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yh(){return{controller:new NT,data:new Map,refCount:0}}function Po(e){e.refCount--,e.refCount===0&&OT(VT,function(){e.controller.abort()})}var ko=null,Xh=0,ma=0,ga=null;function MT(e,n){if(ko===null){var a=ko=[];Xh=0,ma=Jf(),ga={status:"pending",value:void 0,then:function(o){a.push(o)}}}return Xh++,n.then(Rg,Rg),n}function Rg(){if(--Xh===0&&ko!==null){ga!==null&&(ga.status="fulfilled");var e=ko;ko=null,ma=0,ga=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function xT(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(c){a.push(c)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<a.length;c++)(0,a[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<a.length;c++)(0,a[c])(void 0)}),o}var Ig=q.S;q.S=function(e,n){typeof n=="object"&&n!==null&&typeof n.then=="function"&&MT(e,n),Ig!==null&&Ig(e,n)};var Is=X(null);function $h(){var e=Is.current;return e!==null?e:ee.pooledCache}function wu(e,n){n===null?W(Is,Is.current):W(Is,n.pool)}function Cg(){var e=$h();return e===null?null:{parent:De._currentValue,pool:e}}var Uo=Error(s(460)),Dg=Error(s(474)),Ru=Error(s(542)),Zh={then:function(){}};function Ng(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Iu(){}function Og(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Iu,Iu),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Mg(e),e;default:if(typeof n.status=="string")n.then(Iu,Iu);else{if(e=ee,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Mg(e),e}throw Lo=n,Uo}}var Lo=null;function Vg(){if(Lo===null)throw Error(s(459));var e=Lo;return Lo=null,e}function Mg(e){if(e===Uo||e===Ru)throw Error(s(483))}var hr=!1;function Jh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wh(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function dr(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Kt&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=vu(e),vg(e,null,a),n}return _u(e,o,n,a),vu(e)}function zo(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,fo(e,a)}}function tf(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var c=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?c=f=v:f=f.next=v,a=a.next}while(a!==null);f===null?c=f=n:f=f.next=n}else c=f=n;a={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var ef=!1;function jo(){if(ef){var e=ga;if(e!==null)throw e}}function Bo(e,n,a,o){ef=!1;var c=e.updateQueue;hr=!1;var f=c.firstBaseUpdate,v=c.lastBaseUpdate,E=c.shared.pending;if(E!==null){c.shared.pending=null;var b=E,L=b.next;b.next=null,v===null?f=L:v.next=L,v=b;var G=e.alternate;G!==null&&(G=G.updateQueue,E=G.lastBaseUpdate,E!==v&&(E===null?G.firstBaseUpdate=L:E.next=L,G.lastBaseUpdate=b))}if(f!==null){var K=c.baseState;v=0,G=L=b=null,E=f;do{var z=E.lane&-536870913,j=z!==E.lane;if(j?(Lt&z)===z:(o&z)===z){z!==0&&z===ma&&(ef=!0),G!==null&&(G=G.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});t:{var Et=e,pt=E;z=n;var Jt=a;switch(pt.tag){case 1:if(Et=pt.payload,typeof Et=="function"){K=Et.call(Jt,K,z);break t}K=Et;break t;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=pt.payload,z=typeof Et=="function"?Et.call(Jt,K,z):Et,z==null)break t;K=A({},K,z);break t;case 2:hr=!0}}z=E.callback,z!==null&&(e.flags|=64,j&&(e.flags|=8192),j=c.callbacks,j===null?c.callbacks=[z]:j.push(z))}else j={lane:z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},G===null?(L=G=j,b=K):G=G.next=j,v|=z;if(E=E.next,E===null){if(E=c.shared.pending,E===null)break;j=E,E=j.next,j.next=null,c.lastBaseUpdate=j,c.shared.pending=null}}while(!0);G===null&&(b=K),c.baseState=b,c.firstBaseUpdate=L,c.lastBaseUpdate=G,f===null&&(c.shared.lanes=0),Tr|=v,e.lanes=v,e.memoizedState=K}}function xg(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function Pg(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)xg(a[e],n)}var pa=X(null),Cu=X(0);function kg(e,n){e=Fi,W(Cu,e),W(pa,n),Fi=e|n.baseLanes}function nf(){W(Cu,Fi),W(pa,pa.current)}function rf(){Fi=Cu.current,it(pa),it(Cu)}var mr=0,Ct=null,$t=null,Ee=null,Du=!1,ya=!1,Cs=!1,Nu=0,qo=0,_a=null,PT=0;function me(){throw Error(s(321))}function sf(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!yn(e[a],n[a]))return!1;return!0}function af(e,n,a,o,c,f){return mr=f,Ct=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=e===null||e.memoizedState===null?vp:Ep,Cs=!1,f=a(o,c),Cs=!1,ya&&(f=Lg(n,a,o,c)),Ug(e),f}function Ug(e){q.H=ku;var n=$t!==null&&$t.next!==null;if(mr=0,Ee=$t=Ct=null,Du=!1,qo=0,_a=null,n)throw Error(s(300));e===null||ke||(e=e.dependencies,e!==null&&Su(e)&&(ke=!0))}function Lg(e,n,a,o){Ct=e;var c=0;do{if(ya&&(_a=null),qo=0,ya=!1,25<=c)throw Error(s(301));if(c+=1,Ee=$t=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}q.H=qT,f=n(a,o)}while(ya);return f}function kT(){var e=q.H,n=e.useState()[0];return n=typeof n.then=="function"?Ho(n):n,e=e.useState()[0],($t!==null?$t.memoizedState:null)!==e&&(Ct.flags|=1024),n}function of(){var e=Nu!==0;return Nu=0,e}function lf(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function uf(e){if(Du){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Du=!1}mr=0,Ee=$t=Ct=null,ya=!1,qo=Nu=0,_a=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?Ct.memoizedState=Ee=e:Ee=Ee.next=e,Ee}function Te(){if($t===null){var e=Ct.alternate;e=e!==null?e.memoizedState:null}else e=$t.next;var n=Ee===null?Ct.memoizedState:Ee.next;if(n!==null)Ee=n,$t=e;else{if(e===null)throw Ct.alternate===null?Error(s(467)):Error(s(310));$t=e,e={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},Ee===null?Ct.memoizedState=Ee=e:Ee=Ee.next=e}return Ee}function cf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ho(e){var n=qo;return qo+=1,_a===null&&(_a=[]),e=Og(_a,e,n),n=Ct,(Ee===null?n.memoizedState:Ee.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?vp:Ep),e}function Ou(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ho(e);if(e.$$typeof===ft)return Ze(e)}throw Error(s(438,String(e)))}function hf(e){var n=null,a=Ct.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=Ct.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=cf(),Ct.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=O;return n.index++,a}function zi(e,n){return typeof n=="function"?n(e):n}function Vu(e){var n=Te();return ff(n,$t,e)}function ff(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var c=e.baseQueue,f=o.pending;if(f!==null){if(c!==null){var v=c.next;c.next=f.next,f.next=v}n.baseQueue=c=f,o.pending=null}if(f=e.baseState,c===null)e.memoizedState=f;else{n=c.next;var E=v=null,b=null,L=n,G=!1;do{var K=L.lane&-536870913;if(K!==L.lane?(Lt&K)===K:(mr&K)===K){var z=L.revertLane;if(z===0)b!==null&&(b=b.next={lane:0,revertLane:0,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null}),K===ma&&(G=!0);else if((mr&z)===z){L=L.next,z===ma&&(G=!0);continue}else K={lane:0,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=K,v=f):b=b.next=K,Ct.lanes|=z,Tr|=z;K=L.action,Cs&&a(f,K),f=L.hasEagerState?L.eagerState:a(f,K)}else z={lane:K,revertLane:L.revertLane,action:L.action,hasEagerState:L.hasEagerState,eagerState:L.eagerState,next:null},b===null?(E=b=z,v=f):b=b.next=z,Ct.lanes|=K,Tr|=K;L=L.next}while(L!==null&&L!==n);if(b===null?v=f:b.next=E,!yn(f,e.memoizedState)&&(ke=!0,G&&(a=ga,a!==null)))throw a;e.memoizedState=f,e.baseState=v,e.baseQueue=b,o.lastRenderedState=f}return c===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function df(e){var n=Te(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,c=a.pending,f=n.memoizedState;if(c!==null){a.pending=null;var v=c=c.next;do f=e(f,v.action),v=v.next;while(v!==c);yn(f,n.memoizedState)||(ke=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),a.lastRenderedState=f}return[f,o]}function zg(e,n,a){var o=Ct,c=Te(),f=Ht;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=n();var v=!yn(($t||c).memoizedState,a);v&&(c.memoizedState=a,ke=!0),c=c.queue;var E=qg.bind(null,o,c,e);if(Go(2048,8,E,[e]),c.getSnapshot!==n||v||Ee!==null&&Ee.memoizedState.tag&1){if(o.flags|=2048,va(9,Mu(),Bg.bind(null,o,c,a,n),null),ee===null)throw Error(s(349));f||(mr&124)!==0||jg(o,n,a)}return a}function jg(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Ct.updateQueue,n===null?(n=cf(),Ct.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Bg(e,n,a,o){n.value=a,n.getSnapshot=o,Hg(n)&&Gg(e)}function qg(e,n,a){return a(function(){Hg(n)&&Gg(e)})}function Hg(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!yn(e,a)}catch{return!0}}function Gg(e){var n=ca(e,2);n!==null&&Sn(n,e,2)}function mf(e){var n=cn();if(typeof e=="function"){var a=e;if(e=a(),Cs){gn(!0);try{a()}finally{gn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:e},n}function Fg(e,n,a,o){return e.baseState=a,ff(e,$t,typeof o=="function"?o:zi)}function UT(e,n,a,o,c){if(Pu(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};q.T!==null?a(!0):f.isTransition=!1,o(f),a=n.pending,a===null?(f.next=n.pending=f,Qg(n,f)):(f.next=a.next,n.pending=a.next=f)}}function Qg(e,n){var a=n.action,o=n.payload,c=e.state;if(n.isTransition){var f=q.T,v={};q.T=v;try{var E=a(c,o),b=q.S;b!==null&&b(v,E),Kg(e,n,E)}catch(L){gf(e,n,L)}finally{q.T=f}}else try{f=a(c,o),Kg(e,n,f)}catch(L){gf(e,n,L)}}function Kg(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Yg(e,n,o)},function(o){return gf(e,n,o)}):Yg(e,n,a)}function Yg(e,n,a){n.status="fulfilled",n.value=a,Xg(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Qg(e,a)))}function gf(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,Xg(n),n=n.next;while(n!==o)}e.action=null}function Xg(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function $g(e,n){return n}function Zg(e,n){if(Ht){var a=ee.formState;if(a!==null){t:{var o=Ct;if(Ht){if(he){e:{for(var c=he,f=ai;c.nodeType!==8;){if(!f){c=null;break e}if(c=Kn(c.nextSibling),c===null){c=null;break e}}f=c.data,c=f==="F!"||f==="F"?c:null}if(c){he=Kn(c.nextSibling),o=c.data==="F!";break t}}bs(o)}o=!1}o&&(n=a[0])}}return a=cn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$g,lastRenderedState:n},a.queue=o,a=pp.bind(null,Ct,o),o.dispatch=a,o=mf(!1),f=Ef.bind(null,Ct,!1,o.queue),o=cn(),c={state:n,dispatch:null,action:e,pending:null},o.queue=c,a=UT.bind(null,Ct,c,f,a),c.dispatch=a,o.memoizedState=e,[n,a,!1]}function Jg(e){var n=Te();return Wg(n,$t,e)}function Wg(e,n,a){if(n=ff(e,n,$g)[0],e=Vu(zi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ho(n)}catch(v){throw v===Uo?Ru:v}else o=n;n=Te();var c=n.queue,f=c.dispatch;return a!==n.memoizedState&&(Ct.flags|=2048,va(9,Mu(),LT.bind(null,c,a),null)),[o,f,e]}function LT(e,n){e.action=n}function tp(e){var n=Te(),a=$t;if(a!==null)return Wg(n,a,e);Te(),n=n.memoizedState,a=Te();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function va(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=Ct.updateQueue,n===null&&(n=cf(),Ct.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Mu(){return{destroy:void 0,resource:void 0}}function ep(){return Te().memoizedState}function xu(e,n,a,o){var c=cn();o=o===void 0?null:o,Ct.flags|=e,c.memoizedState=va(1|n,Mu(),a,o)}function Go(e,n,a,o){var c=Te();o=o===void 0?null:o;var f=c.memoizedState.inst;$t!==null&&o!==null&&sf(o,$t.memoizedState.deps)?c.memoizedState=va(n,f,a,o):(Ct.flags|=e,c.memoizedState=va(1|n,f,a,o))}function np(e,n){xu(8390656,8,e,n)}function ip(e,n){Go(2048,8,e,n)}function rp(e,n){return Go(4,2,e,n)}function sp(e,n){return Go(4,4,e,n)}function ap(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function op(e,n,a){a=a!=null?a.concat([e]):null,Go(4,4,ap.bind(null,n,e),a)}function pf(){}function lp(e,n){var a=Te();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&sf(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function up(e,n){var a=Te();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&sf(n,o[1]))return o[0];if(o=e(),Cs){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[o,n],o}function yf(e,n,a){return a===void 0||(mr&1073741824)!==0?e.memoizedState=n:(e.memoizedState=a,e=fy(),Ct.lanes|=e,Tr|=e,a)}function cp(e,n,a,o){return yn(a,n)?a:pa.current!==null?(e=yf(e,a,o),yn(e,n)||(ke=!0),e):(mr&42)===0?(ke=!0,e.memoizedState=a):(e=fy(),Ct.lanes|=e,Tr|=e,n)}function hp(e,n,a,o,c){var f=et.p;et.p=f!==0&&8>f?f:8;var v=q.T,E={};q.T=E,Ef(e,!1,n,a);try{var b=c(),L=q.S;if(L!==null&&L(E,b),b!==null&&typeof b=="object"&&typeof b.then=="function"){var G=xT(b,o);Fo(e,n,G,An(e))}else Fo(e,n,o,An(e))}catch(K){Fo(e,n,{then:function(){},status:"rejected",reason:K},An())}finally{et.p=f,q.T=v}}function zT(){}function _f(e,n,a,o){if(e.tag!==5)throw Error(s(476));var c=fp(e).queue;hp(e,c,n,ut,a===null?zT:function(){return dp(e),a(o)})}function fp(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ut},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function dp(e){var n=fp(e).next.queue;Fo(e,n,{},An())}function vf(){return Ze(ul)}function mp(){return Te().memoizedState}function gp(){return Te().memoizedState}function jT(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=An();e=fr(a);var o=dr(n,e,a);o!==null&&(Sn(o,n,a),zo(o,n,a)),n={cache:Yh()},e.payload=n;return}n=n.return}}function BT(e,n,a){var o=An();a={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Pu(e)?yp(n,a):(a=Lh(e,n,a,o),a!==null&&(Sn(a,e,o),_p(a,n,o)))}function pp(e,n,a){var o=An();Fo(e,n,a,o)}function Fo(e,n,a,o){var c={lane:o,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pu(e))yp(n,c);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var v=n.lastRenderedState,E=f(v,a);if(c.hasEagerState=!0,c.eagerState=E,yn(E,v))return _u(e,n,c,0),ee===null&&yu(),!1}catch{}finally{}if(a=Lh(e,n,c,o),a!==null)return Sn(a,e,o),_p(a,n,o),!0}return!1}function Ef(e,n,a,o){if(o={lane:2,revertLane:Jf(),action:o,hasEagerState:!1,eagerState:null,next:null},Pu(e)){if(n)throw Error(s(479))}else n=Lh(e,a,o,2),n!==null&&Sn(n,e,2)}function Pu(e){var n=e.alternate;return e===Ct||n!==null&&n===Ct}function yp(e,n){ya=Du=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function _p(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,fo(e,a)}}var ku={readContext:Ze,use:Ou,useCallback:me,useContext:me,useEffect:me,useImperativeHandle:me,useLayoutEffect:me,useInsertionEffect:me,useMemo:me,useReducer:me,useRef:me,useState:me,useDebugValue:me,useDeferredValue:me,useTransition:me,useSyncExternalStore:me,useId:me,useHostTransitionStatus:me,useFormState:me,useActionState:me,useOptimistic:me,useMemoCache:me,useCacheRefresh:me},vp={readContext:Ze,use:Ou,useCallback:function(e,n){return cn().memoizedState=[e,n===void 0?null:n],e},useContext:Ze,useEffect:np,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,xu(4194308,4,ap.bind(null,n,e),a)},useLayoutEffect:function(e,n){return xu(4194308,4,e,n)},useInsertionEffect:function(e,n){xu(4,2,e,n)},useMemo:function(e,n){var a=cn();n=n===void 0?null:n;var o=e();if(Cs){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=cn();if(a!==void 0){var c=a(n);if(Cs){gn(!0);try{a(n)}finally{gn(!1)}}}else c=n;return o.memoizedState=o.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},o.queue=e,e=e.dispatch=BT.bind(null,Ct,e),[o.memoizedState,e]},useRef:function(e){var n=cn();return e={current:e},n.memoizedState=e},useState:function(e){e=mf(e);var n=e.queue,a=pp.bind(null,Ct,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:pf,useDeferredValue:function(e,n){var a=cn();return yf(a,e,n)},useTransition:function(){var e=mf(!1);return e=hp.bind(null,Ct,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=Ct,c=cn();if(Ht){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),ee===null)throw Error(s(349));(Lt&124)!==0||jg(o,n,a)}c.memoizedState=a;var f={value:a,getSnapshot:n};return c.queue=f,np(qg.bind(null,o,f,e),[e]),o.flags|=2048,va(9,Mu(),Bg.bind(null,o,f,a,n),null),a},useId:function(){var e=cn(),n=ee.identifierPrefix;if(Ht){var a=ki,o=Pi;a=(o&~(1<<32-$e(o)-1)).toString(32)+a,n="«"+n+"R"+a,a=Nu++,0<a&&(n+="H"+a.toString(32)),n+="»"}else a=PT++,n="«"+n+"r"+a.toString(32)+"»";return e.memoizedState=n},useHostTransitionStatus:vf,useFormState:Zg,useActionState:Zg,useOptimistic:function(e){var n=cn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Ef.bind(null,Ct,!0,a),a.dispatch=n,[e,n]},useMemoCache:hf,useCacheRefresh:function(){return cn().memoizedState=jT.bind(null,Ct)}},Ep={readContext:Ze,use:Ou,useCallback:lp,useContext:Ze,useEffect:ip,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:sp,useMemo:up,useReducer:Vu,useRef:ep,useState:function(){return Vu(zi)},useDebugValue:pf,useDeferredValue:function(e,n){var a=Te();return cp(a,$t.memoizedState,e,n)},useTransition:function(){var e=Vu(zi)[0],n=Te().memoizedState;return[typeof e=="boolean"?e:Ho(e),n]},useSyncExternalStore:zg,useId:mp,useHostTransitionStatus:vf,useFormState:Jg,useActionState:Jg,useOptimistic:function(e,n){var a=Te();return Fg(a,$t,e,n)},useMemoCache:hf,useCacheRefresh:gp},qT={readContext:Ze,use:Ou,useCallback:lp,useContext:Ze,useEffect:ip,useImperativeHandle:op,useInsertionEffect:rp,useLayoutEffect:sp,useMemo:up,useReducer:df,useRef:ep,useState:function(){return df(zi)},useDebugValue:pf,useDeferredValue:function(e,n){var a=Te();return $t===null?yf(a,e,n):cp(a,$t.memoizedState,e,n)},useTransition:function(){var e=df(zi)[0],n=Te().memoizedState;return[typeof e=="boolean"?e:Ho(e),n]},useSyncExternalStore:zg,useId:mp,useHostTransitionStatus:vf,useFormState:tp,useActionState:tp,useOptimistic:function(e,n){var a=Te();return $t!==null?Fg(a,$t,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:hf,useCacheRefresh:gp},Ea=null,Qo=0;function Uu(e){var n=Qo;return Qo+=1,Ea===null&&(Ea=[]),Og(Ea,e,n)}function Ko(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Lu(e,n){throw n.$$typeof===D?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Tp(e){var n=e._init;return n(e._payload)}function Ap(e){function n(x,N){if(e){var U=x.deletions;U===null?(x.deletions=[N],x.flags|=16):U.push(N)}}function a(x,N){if(!e)return null;for(;N!==null;)n(x,N),N=N.sibling;return null}function o(x){for(var N=new Map;x!==null;)x.key!==null?N.set(x.key,x):N.set(x.index,x),x=x.sibling;return N}function c(x,N){return x=xi(x,N),x.index=0,x.sibling=null,x}function f(x,N,U){return x.index=U,e?(U=x.alternate,U!==null?(U=U.index,U<N?(x.flags|=67108866,N):U):(x.flags|=67108866,N)):(x.flags|=1048576,N)}function v(x){return e&&x.alternate===null&&(x.flags|=67108866),x}function E(x,N,U,F){return N===null||N.tag!==6?(N=jh(U,x.mode,F),N.return=x,N):(N=c(N,U),N.return=x,N)}function b(x,N,U,F){var ot=U.type;return ot===Z?G(x,N,U.props.children,F,U.key):N!==null&&(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&Tp(ot)===N.type)?(N=c(N,U.props),Ko(N,U),N.return=x,N):(N=Eu(U.type,U.key,U.props,null,x.mode,F),Ko(N,U),N.return=x,N)}function L(x,N,U,F){return N===null||N.tag!==4||N.stateNode.containerInfo!==U.containerInfo||N.stateNode.implementation!==U.implementation?(N=Bh(U,x.mode,F),N.return=x,N):(N=c(N,U.children||[]),N.return=x,N)}function G(x,N,U,F,ot){return N===null||N.tag!==7?(N=Es(U,x.mode,F,ot),N.return=x,N):(N=c(N,U),N.return=x,N)}function K(x,N,U){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=jh(""+N,x.mode,U),N.return=x,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case I:return U=Eu(N.type,N.key,N.props,null,x.mode,U),Ko(U,N),U.return=x,U;case H:return N=Bh(N,x.mode,U),N.return=x,N;case S:var F=N._init;return N=F(N._payload),K(x,N,U)}if(re(N)||P(N))return N=Es(N,x.mode,U,null),N.return=x,N;if(typeof N.then=="function")return K(x,Uu(N),U);if(N.$$typeof===ft)return K(x,bu(x,N),U);Lu(x,N)}return null}function z(x,N,U,F){var ot=N!==null?N.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ot!==null?null:E(x,N,""+U,F);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case I:return U.key===ot?b(x,N,U,F):null;case H:return U.key===ot?L(x,N,U,F):null;case S:return ot=U._init,U=ot(U._payload),z(x,N,U,F)}if(re(U)||P(U))return ot!==null?null:G(x,N,U,F,null);if(typeof U.then=="function")return z(x,N,Uu(U),F);if(U.$$typeof===ft)return z(x,N,bu(x,U),F);Lu(x,U)}return null}function j(x,N,U,F,ot){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return x=x.get(U)||null,E(N,x,""+F,ot);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case I:return x=x.get(F.key===null?U:F.key)||null,b(N,x,F,ot);case H:return x=x.get(F.key===null?U:F.key)||null,L(N,x,F,ot);case S:var Dt=F._init;return F=Dt(F._payload),j(x,N,U,F,ot)}if(re(F)||P(F))return x=x.get(U)||null,G(N,x,F,ot,null);if(typeof F.then=="function")return j(x,N,U,Uu(F),ot);if(F.$$typeof===ft)return j(x,N,U,bu(N,F),ot);Lu(N,F)}return null}function Et(x,N,U,F){for(var ot=null,Dt=null,ht=N,yt=N=0,Le=null;ht!==null&&yt<U.length;yt++){ht.index>yt?(Le=ht,ht=null):Le=ht.sibling;var Bt=z(x,ht,U[yt],F);if(Bt===null){ht===null&&(ht=Le);break}e&&ht&&Bt.alternate===null&&n(x,ht),N=f(Bt,N,yt),Dt===null?ot=Bt:Dt.sibling=Bt,Dt=Bt,ht=Le}if(yt===U.length)return a(x,ht),Ht&&As(x,yt),ot;if(ht===null){for(;yt<U.length;yt++)ht=K(x,U[yt],F),ht!==null&&(N=f(ht,N,yt),Dt===null?ot=ht:Dt.sibling=ht,Dt=ht);return Ht&&As(x,yt),ot}for(ht=o(ht);yt<U.length;yt++)Le=j(ht,x,yt,U[yt],F),Le!==null&&(e&&Le.alternate!==null&&ht.delete(Le.key===null?yt:Le.key),N=f(Le,N,yt),Dt===null?ot=Le:Dt.sibling=Le,Dt=Le);return e&&ht.forEach(function(Nr){return n(x,Nr)}),Ht&&As(x,yt),ot}function pt(x,N,U,F){if(U==null)throw Error(s(151));for(var ot=null,Dt=null,ht=N,yt=N=0,Le=null,Bt=U.next();ht!==null&&!Bt.done;yt++,Bt=U.next()){ht.index>yt?(Le=ht,ht=null):Le=ht.sibling;var Nr=z(x,ht,Bt.value,F);if(Nr===null){ht===null&&(ht=Le);break}e&&ht&&Nr.alternate===null&&n(x,ht),N=f(Nr,N,yt),Dt===null?ot=Nr:Dt.sibling=Nr,Dt=Nr,ht=Le}if(Bt.done)return a(x,ht),Ht&&As(x,yt),ot;if(ht===null){for(;!Bt.done;yt++,Bt=U.next())Bt=K(x,Bt.value,F),Bt!==null&&(N=f(Bt,N,yt),Dt===null?ot=Bt:Dt.sibling=Bt,Dt=Bt);return Ht&&As(x,yt),ot}for(ht=o(ht);!Bt.done;yt++,Bt=U.next())Bt=j(ht,x,yt,Bt.value,F),Bt!==null&&(e&&Bt.alternate!==null&&ht.delete(Bt.key===null?yt:Bt.key),N=f(Bt,N,yt),Dt===null?ot=Bt:Dt.sibling=Bt,Dt=Bt);return e&&ht.forEach(function(HA){return n(x,HA)}),Ht&&As(x,yt),ot}function Jt(x,N,U,F){if(typeof U=="object"&&U!==null&&U.type===Z&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case I:t:{for(var ot=U.key;N!==null;){if(N.key===ot){if(ot=U.type,ot===Z){if(N.tag===7){a(x,N.sibling),F=c(N,U.props.children),F.return=x,x=F;break t}}else if(N.elementType===ot||typeof ot=="object"&&ot!==null&&ot.$$typeof===S&&Tp(ot)===N.type){a(x,N.sibling),F=c(N,U.props),Ko(F,U),F.return=x,x=F;break t}a(x,N);break}else n(x,N);N=N.sibling}U.type===Z?(F=Es(U.props.children,x.mode,F,U.key),F.return=x,x=F):(F=Eu(U.type,U.key,U.props,null,x.mode,F),Ko(F,U),F.return=x,x=F)}return v(x);case H:t:{for(ot=U.key;N!==null;){if(N.key===ot)if(N.tag===4&&N.stateNode.containerInfo===U.containerInfo&&N.stateNode.implementation===U.implementation){a(x,N.sibling),F=c(N,U.children||[]),F.return=x,x=F;break t}else{a(x,N);break}else n(x,N);N=N.sibling}F=Bh(U,x.mode,F),F.return=x,x=F}return v(x);case S:return ot=U._init,U=ot(U._payload),Jt(x,N,U,F)}if(re(U))return Et(x,N,U,F);if(P(U)){if(ot=P(U),typeof ot!="function")throw Error(s(150));return U=ot.call(U),pt(x,N,U,F)}if(typeof U.then=="function")return Jt(x,N,Uu(U),F);if(U.$$typeof===ft)return Jt(x,N,bu(x,U),F);Lu(x,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,N!==null&&N.tag===6?(a(x,N.sibling),F=c(N,U),F.return=x,x=F):(a(x,N),F=jh(U,x.mode,F),F.return=x,x=F),v(x)):a(x,N)}return function(x,N,U,F){try{Qo=0;var ot=Jt(x,N,U,F);return Ea=null,ot}catch(ht){if(ht===Uo||ht===Ru)throw ht;var Dt=_n(29,ht,null,x.mode);return Dt.lanes=F,Dt.return=x,Dt}finally{}}}var Ta=Ap(!0),Sp=Ap(!1),kn=X(null),oi=null;function gr(e){var n=e.alternate;W(Ne,Ne.current&1),W(kn,e),oi===null&&(n===null||pa.current!==null||n.memoizedState!==null)&&(oi=e)}function bp(e){if(e.tag===22){if(W(Ne,Ne.current),W(kn,e),oi===null){var n=e.alternate;n!==null&&n.memoizedState!==null&&(oi=e)}}else pr()}function pr(){W(Ne,Ne.current),W(kn,kn.current)}function ji(e){it(kn),oi===e&&(oi=null),it(Ne)}var Ne=X(0);function zu(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||cd(a)))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}function Tf(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:A({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Af={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=An(),c=fr(o);c.payload=n,a!=null&&(c.callback=a),n=dr(e,c,o),n!==null&&(Sn(n,e,o),zo(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=An(),c=fr(o);c.tag=1,c.payload=n,a!=null&&(c.callback=a),n=dr(e,c,o),n!==null&&(Sn(n,e,o),zo(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=An(),o=fr(a);o.tag=2,n!=null&&(o.callback=n),n=dr(e,o,a),n!==null&&(Sn(n,e,a),zo(n,e,a))}};function wp(e,n,a,o,c,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,v):n.prototype&&n.prototype.isPureReactComponent?!Do(a,o)||!Do(c,f):!0}function Rp(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Af.enqueueReplaceState(n,n.state,null)}function Ds(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=A({},a));for(var c in e)a[c]===void 0&&(a[c]=e[c])}return a}var ju=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function Ip(e){ju(e)}function Cp(e){console.error(e)}function Dp(e){ju(e)}function Bu(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Np(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Sf(e,n,a){return a=fr(a),a.tag=3,a.payload={element:null},a.callback=function(){Bu(e,n)},a}function Op(e){return e=fr(e),e.tag=3,e}function Vp(e,n,a,o){var c=a.type.getDerivedStateFromError;if(typeof c=="function"){var f=o.value;e.payload=function(){return c(f)},e.callback=function(){Np(n,a,o)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Np(n,a,o),typeof c!="function"&&(Ar===null?Ar=new Set([this]):Ar.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function HT(e,n,a,o,c){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&xo(n,a,c,!0),a=kn.current,a!==null){switch(a.tag){case 13:return oi===null?Kf():a.alternate===null&&fe===0&&(fe=3),a.flags&=-257,a.flags|=65536,a.lanes=c,o===Zh?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),Xf(e,o,c)),!1;case 22:return a.flags|=65536,o===Zh?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),Xf(e,o,c)),!1}throw Error(s(435,a.tag))}return Xf(e,o,c),Kf(),!1}if(Ht)return n=kn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==Gh&&(e=Error(s(422),{cause:o}),Mo(Vn(e,a)))):(o!==Gh&&(n=Error(s(423),{cause:o}),Mo(Vn(n,a))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,o=Vn(o,a),c=Sf(e.stateNode,o,c),tf(e,c),fe!==4&&(fe=2)),!1;var f=Error(s(520),{cause:o});if(f=Vn(f,a),tl===null?tl=[f]:tl.push(f),fe!==4&&(fe=2),n===null)return!0;o=Vn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=c&-c,a.lanes|=e,e=Sf(a.stateNode,o,e),tf(a,e),!1;case 1:if(n=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ar===null||!Ar.has(f))))return a.flags|=65536,c&=-c,a.lanes|=c,c=Op(c),Vp(c,e,a,o),tf(a,c),!1}a=a.return}while(a!==null);return!1}var Mp=Error(s(461)),ke=!1;function He(e,n,a,o){n.child=e===null?Sp(n,null,a,o):Ta(n,e.child,a,o)}function xp(e,n,a,o,c){a=a.render;var f=n.ref;if("ref"in o){var v={};for(var E in o)E!=="ref"&&(v[E]=o[E])}else v=o;return Rs(n),o=af(e,n,a,v,f,c),E=of(),e!==null&&!ke?(lf(e,n,c),Bi(e,n,c)):(Ht&&E&&qh(n),n.flags|=1,He(e,n,o,c),n.child)}function Pp(e,n,a,o,c){if(e===null){var f=a.type;return typeof f=="function"&&!zh(f)&&f.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=f,kp(e,n,f,o,c)):(e=Eu(a.type,null,o,n,n.mode,c),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!Of(e,c)){var v=f.memoizedProps;if(a=a.compare,a=a!==null?a:Do,a(v,o)&&e.ref===n.ref)return Bi(e,n,c)}return n.flags|=1,e=xi(f,o),e.ref=n.ref,e.return=n,n.child=e}function kp(e,n,a,o,c){if(e!==null){var f=e.memoizedProps;if(Do(f,o)&&e.ref===n.ref)if(ke=!1,n.pendingProps=o=f,Of(e,c))(e.flags&131072)!==0&&(ke=!0);else return n.lanes=e.lanes,Bi(e,n,c)}return bf(e,n,a,o,c)}function Up(e,n,a){var o=n.pendingProps,c=o.children,f=e!==null?e.memoizedState:null;if(o.mode==="hidden"){if((n.flags&128)!==0){if(o=f!==null?f.baseLanes|a:a,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;n.childLanes=f&~o}else n.childLanes=0,n.child=null;return Lp(e,n,o,a)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&wu(n,f!==null?f.cachePool:null),f!==null?kg(n,f):nf(),bp(n);else return n.lanes=n.childLanes=536870912,Lp(e,n,f!==null?f.baseLanes|a:a,a)}else f!==null?(wu(n,f.cachePool),kg(n,f),pr(),n.memoizedState=null):(e!==null&&wu(n,null),nf(),pr());return He(e,n,c,a),n.child}function Lp(e,n,a,o){var c=$h();return c=c===null?null:{parent:De._currentValue,pool:c},n.memoizedState={baseLanes:a,cachePool:c},e!==null&&wu(n,null),nf(),bp(n),e!==null&&xo(e,n,o,!0),null}function qu(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function bf(e,n,a,o,c){return Rs(n),a=af(e,n,a,o,void 0,c),o=of(),e!==null&&!ke?(lf(e,n,c),Bi(e,n,c)):(Ht&&o&&qh(n),n.flags|=1,He(e,n,a,c),n.child)}function zp(e,n,a,o,c,f){return Rs(n),n.updateQueue=null,a=Lg(n,o,a,c),Ug(e),o=of(),e!==null&&!ke?(lf(e,n,f),Bi(e,n,f)):(Ht&&o&&qh(n),n.flags|=1,He(e,n,a,f),n.child)}function jp(e,n,a,o,c){if(Rs(n),n.stateNode===null){var f=ha,v=a.contextType;typeof v=="object"&&v!==null&&(f=Ze(v)),f=new a(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Af,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Jh(n),v=a.contextType,f.context=typeof v=="object"&&v!==null?Ze(v):ha,f.state=n.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Tf(n,a,v,o),f.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&Af.enqueueReplaceState(f,f.state,null),Bo(n,o,f,c),jo(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var E=n.memoizedProps,b=Ds(a,E);f.props=b;var L=f.context,G=a.contextType;v=ha,typeof G=="object"&&G!==null&&(v=Ze(G));var K=a.getDerivedStateFromProps;G=typeof K=="function"||typeof f.getSnapshotBeforeUpdate=="function",E=n.pendingProps!==E,G||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(E||L!==v)&&Rp(n,f,o,v),hr=!1;var z=n.memoizedState;f.state=z,Bo(n,o,f,c),jo(),L=n.memoizedState,E||z!==L||hr?(typeof K=="function"&&(Tf(n,a,K,o),L=n.memoizedState),(b=hr||wp(n,a,b,o,z,L,v))?(G||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=L),f.props=o,f.state=L,f.context=v,o=b):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Wh(e,n),v=n.memoizedProps,G=Ds(a,v),f.props=G,K=n.pendingProps,z=f.context,L=a.contextType,b=ha,typeof L=="object"&&L!==null&&(b=Ze(L)),E=a.getDerivedStateFromProps,(L=typeof E=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==K||z!==b)&&Rp(n,f,o,b),hr=!1,z=n.memoizedState,f.state=z,Bo(n,o,f,c),jo();var j=n.memoizedState;v!==K||z!==j||hr||e!==null&&e.dependencies!==null&&Su(e.dependencies)?(typeof E=="function"&&(Tf(n,a,E,o),j=n.memoizedState),(G=hr||wp(n,a,G,o,z,j,b)||e!==null&&e.dependencies!==null&&Su(e.dependencies))?(L||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,j,b),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,j,b)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=j),f.props=o,f.state=j,f.context=b,o=G):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&z===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,qu(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=Ta(n,e.child,null,c),n.child=Ta(n,null,a,c)):He(e,n,a,c),n.memoizedState=f.state,e=n.child):e=Bi(e,n,c),e}function Bp(e,n,a,o){return Vo(),n.flags|=256,He(e,n,a,o),n.child}var wf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rf(e){return{baseLanes:e,cachePool:Cg()}}function If(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=Un),e}function qp(e,n,a){var o=n.pendingProps,c=!1,f=(n.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Ne.current&2)!==0),v&&(c=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,e===null){if(Ht){if(c?gr(n):pr(),Ht){var E=he,b;if(b=E){t:{for(b=E,E=ai;b.nodeType!==8;){if(!E){E=null;break t}if(b=Kn(b.nextSibling),b===null){E=null;break t}}E=b}E!==null?(n.memoizedState={dehydrated:E,treeContext:Ts!==null?{id:Pi,overflow:ki}:null,retryLane:536870912,hydrationErrors:null},b=_n(18,null,null,0),b.stateNode=E,b.return=n,n.child=b,un=n,he=null,b=!0):b=!1}b||bs(n)}if(E=n.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return cd(E)?n.lanes=32:n.lanes=536870912,null;ji(n)}return E=o.children,o=o.fallback,c?(pr(),c=n.mode,E=Hu({mode:"hidden",children:E},c),o=Es(o,c,a,null),E.return=n,o.return=n,E.sibling=o,n.child=E,c=n.child,c.memoizedState=Rf(a),c.childLanes=If(e,v,a),n.memoizedState=wf,o):(gr(n),Cf(n,E))}if(b=e.memoizedState,b!==null&&(E=b.dehydrated,E!==null)){if(f)n.flags&256?(gr(n),n.flags&=-257,n=Df(e,n,a)):n.memoizedState!==null?(pr(),n.child=e.child,n.flags|=128,n=null):(pr(),c=o.fallback,E=n.mode,o=Hu({mode:"visible",children:o.children},E),c=Es(c,E,a,null),c.flags|=2,o.return=n,c.return=n,o.sibling=c,n.child=o,Ta(n,e.child,null,a),o=n.child,o.memoizedState=Rf(a),o.childLanes=If(e,v,a),n.memoizedState=wf,n=c);else if(gr(n),cd(E)){if(v=E.nextSibling&&E.nextSibling.dataset,v)var L=v.dgst;v=L,o=Error(s(419)),o.stack="",o.digest=v,Mo({value:o,source:null,stack:null}),n=Df(e,n,a)}else if(ke||xo(e,n,a,!1),v=(a&e.childLanes)!==0,ke||v){if(v=ee,v!==null&&(o=a&-a,o=(o&42)!==0?1:ir(o),o=(o&(v.suspendedLanes|a))!==0?0:o,o!==0&&o!==b.retryLane))throw b.retryLane=o,ca(e,o),Sn(v,e,o),Mp;E.data==="$?"||Kf(),n=Df(e,n,a)}else E.data==="$?"?(n.flags|=192,n.child=e.child,n=null):(e=b.treeContext,he=Kn(E.nextSibling),un=n,Ht=!0,Ss=null,ai=!1,e!==null&&(xn[Pn++]=Pi,xn[Pn++]=ki,xn[Pn++]=Ts,Pi=e.id,ki=e.overflow,Ts=n),n=Cf(n,o.children),n.flags|=4096);return n}return c?(pr(),c=o.fallback,E=n.mode,b=e.child,L=b.sibling,o=xi(b,{mode:"hidden",children:o.children}),o.subtreeFlags=b.subtreeFlags&65011712,L!==null?c=xi(L,c):(c=Es(c,E,a,null),c.flags|=2),c.return=n,o.return=n,o.sibling=c,n.child=o,o=c,c=n.child,E=e.child.memoizedState,E===null?E=Rf(a):(b=E.cachePool,b!==null?(L=De._currentValue,b=b.parent!==L?{parent:L,pool:L}:b):b=Cg(),E={baseLanes:E.baseLanes|a,cachePool:b}),c.memoizedState=E,c.childLanes=If(e,v,a),n.memoizedState=wf,o):(gr(n),a=e.child,e=a.sibling,a=xi(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(v=n.deletions,v===null?(n.deletions=[e],n.flags|=16):v.push(e)),n.child=a,n.memoizedState=null,a)}function Cf(e,n){return n=Hu({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Hu(e,n){return e=_n(22,e,null,n),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Df(e,n,a){return Ta(n,e.child,null,a),e=Cf(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function Hp(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Qh(e.return,n,a)}function Nf(e,n,a,o,c){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:c}:(f.isBackwards=n,f.rendering=null,f.renderingStartTime=0,f.last=o,f.tail=a,f.tailMode=c)}function Gp(e,n,a){var o=n.pendingProps,c=o.revealOrder,f=o.tail;if(He(e,n,o.children,a),o=Ne.current,(o&2)!==0)o=o&1|2,n.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Hp(e,a,n);else if(e.tag===19)Hp(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}switch(W(Ne,o),c){case"forwards":for(a=n.child,c=null;a!==null;)e=a.alternate,e!==null&&zu(e)===null&&(c=a),a=a.sibling;a=c,a===null?(c=n.child,n.child=null):(c=a.sibling,a.sibling=null),Nf(n,!1,c,a,f);break;case"backwards":for(a=null,c=n.child,n.child=null;c!==null;){if(e=c.alternate,e!==null&&zu(e)===null){n.child=c;break}e=c.sibling,c.sibling=a,a=c,c=e}Nf(n,!0,a,null,f);break;case"together":Nf(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Bi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Tr|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(xo(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=xi(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=xi(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Of(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Su(e)))}function GT(e,n,a){switch(n.tag){case 3:st(n,n.stateNode.containerInfo),cr(n,De,e.memoizedState.cache),Vo();break;case 27:case 5:oe(n);break;case 4:st(n,n.stateNode.containerInfo);break;case 10:cr(n,n.type,n.memoizedProps.value);break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(gr(n),n.flags|=128,null):(a&n.child.childLanes)!==0?qp(e,n,a):(gr(n),e=Bi(e,n,a),e!==null?e.sibling:null);gr(n);break;case 19:var c=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(xo(e,n,a,!1),o=(a&n.childLanes)!==0),c){if(o)return Gp(e,n,a);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),W(Ne,Ne.current),o)break;return null;case 22:case 23:return n.lanes=0,Up(e,n,a);case 24:cr(n,De,e.memoizedState.cache)}return Bi(e,n,a)}function Fp(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)ke=!0;else{if(!Of(e,a)&&(n.flags&128)===0)return ke=!1,GT(e,n,a);ke=(e.flags&131072)!==0}else ke=!1,Ht&&(n.flags&1048576)!==0&&Tg(n,Au,n.index);switch(n.lanes=0,n.tag){case 16:t:{e=n.pendingProps;var o=n.elementType,c=o._init;if(o=c(o._payload),n.type=o,typeof o=="function")zh(o)?(e=Ds(o,e),n.tag=1,n=jp(null,n,o,e,a)):(n.tag=0,n=bf(null,n,o,e,a));else{if(o!=null){if(c=o.$$typeof,c===qt){n.tag=11,n=xp(null,n,o,e,a);break t}else if(c===M){n.tag=14,n=Pp(null,n,o,e,a);break t}}throw n=be(o)||o,Error(s(306,n,""))}}return n;case 0:return bf(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,c=Ds(o,n.pendingProps),jp(e,n,o,c,a);case 3:t:{if(st(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;c=f.element,Wh(e,n),Bo(n,o,null,a);var v=n.memoizedState;if(o=v.cache,cr(n,De,o),o!==f.cache&&Kh(n,[De],a,!0),jo(),o=v.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=Bp(e,n,o,a);break t}else if(o!==c){c=Vn(Error(s(424)),n),Mo(c),n=Bp(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(he=Kn(e.firstChild),un=n,Ht=!0,Ss=null,ai=!0,a=Sp(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vo(),o===c){n=Bi(e,n,a);break t}He(e,n,o,a)}n=n.child}return n;case 26:return qu(e,n),e===null?(a=Xy(n.type,null,n.pendingProps,null))?n.memoizedState=a:Ht||(a=n.type,e=n.pendingProps,o=ic(vt.current).createElement(a),o[Re]=n,o[_e]=e,Fe(o,a,e),de(o),n.stateNode=o):n.memoizedState=Xy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return oe(n),e===null&&Ht&&(o=n.stateNode=Qy(n.type,n.pendingProps,vt.current),un=n,ai=!0,c=he,wr(n.type)?(hd=c,he=Kn(o.firstChild)):he=c),He(e,n,n.pendingProps.children,a),qu(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Ht&&((c=o=he)&&(o=_A(o,n.type,n.pendingProps,ai),o!==null?(n.stateNode=o,un=n,he=Kn(o.firstChild),ai=!1,c=!0):c=!1),c||bs(n)),oe(n),c=n.type,f=n.pendingProps,v=e!==null?e.memoizedProps:null,o=f.children,od(c,f)?o=null:v!==null&&od(c,v)&&(n.flags|=32),n.memoizedState!==null&&(c=af(e,n,kT,null,null,a),ul._currentValue=c),qu(e,n),He(e,n,o,a),n.child;case 6:return e===null&&Ht&&((e=a=he)&&(a=vA(a,n.pendingProps,ai),a!==null?(n.stateNode=a,un=n,he=null,e=!0):e=!1),e||bs(n)),null;case 13:return qp(e,n,a);case 4:return st(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Ta(n,null,o,a):He(e,n,o,a),n.child;case 11:return xp(e,n,n.type,n.pendingProps,a);case 7:return He(e,n,n.pendingProps,a),n.child;case 8:return He(e,n,n.pendingProps.children,a),n.child;case 12:return He(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,cr(n,n.type,o.value),He(e,n,o.children,a),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,Rs(n),c=Ze(c),o=o(c),n.flags|=1,He(e,n,o,a),n.child;case 14:return Pp(e,n,n.type,n.pendingProps,a);case 15:return kp(e,n,n.type,n.pendingProps,a);case 19:return Gp(e,n,a);case 31:return o=n.pendingProps,a=n.mode,o={mode:o.mode,children:o.children},e===null?(a=Hu(o,a),a.ref=n.ref,n.child=a,a.return=n,n=a):(a=xi(e.child,o),a.ref=n.ref,n.child=a,a.return=n,n=a),n;case 22:return Up(e,n,a);case 24:return Rs(n),o=Ze(De),e===null?(c=$h(),c===null&&(c=ee,f=Yh(),c.pooledCache=f,f.refCount++,f!==null&&(c.pooledCacheLanes|=a),c=f),n.memoizedState={parent:o,cache:c},Jh(n),cr(n,De,c)):((e.lanes&a)!==0&&(Wh(e,n),Bo(n,null,null,a),jo()),c=e.memoizedState,f=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),cr(n,De,o)):(o=f.cache,cr(n,De,o),o!==c.cache&&Kh(n,[De],a,!0))),He(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function qi(e){e.flags|=4}function Qp(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!t_(n)){if(n=kn.current,n!==null&&((Lt&4194048)===Lt?oi!==null:(Lt&62914560)!==Lt&&(Lt&536870912)===0||n!==oi))throw Lo=Zh,Dg;e.flags|=8192}}function Gu(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?co():536870912,e.lanes|=n,wa|=n)}function Yo(e,n){if(!Ht)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function le(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)a|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function FT(e,n,a){var o=n.pendingProps;switch(Hh(n),n.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return le(n),null;case 1:return le(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Li(De),Nt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Oo(n)?qi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,bg())),le(n),null;case 26:return a=n.memoizedState,e===null?(qi(n),a!==null?(le(n),Qp(n,a)):(le(n),n.flags&=-16777217)):a?a!==e.memoizedState?(qi(n),le(n),Qp(n,a)):(le(n),n.flags&=-16777217):(e.memoizedProps!==o&&qi(n),le(n),n.flags&=-16777217),null;case 27:te(n),a=vt.current;var c=n.type;if(e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return le(n),null}e=ct.current,Oo(n)?Ag(n):(e=Qy(c,o,a),n.stateNode=e,qi(n))}return le(n),null;case 5:if(te(n),a=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return le(n),null}if(e=ct.current,Oo(n))Ag(n);else{switch(c=ic(vt.current),e){case 1:e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=c.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=c.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof o.is=="string"?c.createElement("select",{is:o.is}):c.createElement("select"),o.multiple?e.multiple=!0:o.size&&(e.size=o.size);break;default:e=typeof o.is=="string"?c.createElement(a,{is:o.is}):c.createElement(a)}}e[Re]=n,e[_e]=o;t:for(c=n.child;c!==null;){if(c.tag===5||c.tag===6)e.appendChild(c.stateNode);else if(c.tag!==4&&c.tag!==27&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break t;for(;c.sibling===null;){if(c.return===null||c.return===n)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}n.stateNode=e;t:switch(Fe(e,a,o),a){case"button":case"input":case"select":case"textarea":e=!!o.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&qi(n)}}return le(n),n.flags&=-16777217,null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&qi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=vt.current,Oo(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,c=un,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}e[Re]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||zy(e.nodeValue,a)),e||bs(n)}else e=ic(e).createTextNode(o),e[Re]=n,n.stateNode=e}return le(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Oo(n),o!==null&&o.dehydrated!==null){if(e===null){if(!c)throw Error(s(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(s(317));c[Re]=n}else Vo(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;le(n),c=!1}else c=bg(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(ji(n),n):(ji(n),null)}if(ji(n),(n.flags&128)!==0)return n.lanes=a,n;if(a=o!==null,e=e!==null&&e.memoizedState!==null,a){o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool);var f=null;o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==c&&(o.flags|=2048)}return a!==e&&a&&(n.child.flags|=8192),Gu(n,n.updateQueue),le(n),null;case 4:return Nt(),e===null&&nd(n.stateNode.containerInfo),le(n),null;case 10:return Li(n.type),le(n),null;case 19:if(it(Ne),c=n.memoizedState,c===null)return le(n),null;if(o=(n.flags&128)!==0,f=c.rendering,f===null)if(o)Yo(c,!1);else{if(fe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=zu(e),f!==null){for(n.flags|=128,Yo(c,!1),e=f.updateQueue,n.updateQueue=e,Gu(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Eg(a,e),a=a.sibling;return W(Ne,Ne.current&1|2),n.child}e=e.sibling}c.tail!==null&&Xe()>Ku&&(n.flags|=128,o=!0,Yo(c,!1),n.lanes=4194304)}else{if(!o)if(e=zu(f),e!==null){if(n.flags|=128,o=!0,e=e.updateQueue,n.updateQueue=e,Gu(n,e),Yo(c,!0),c.tail===null&&c.tailMode==="hidden"&&!f.alternate&&!Ht)return le(n),null}else 2*Xe()-c.renderingStartTime>Ku&&a!==536870912&&(n.flags|=128,o=!0,Yo(c,!1),n.lanes=4194304);c.isBackwards?(f.sibling=n.child,n.child=f):(e=c.last,e!==null?e.sibling=f:n.child=f,c.last=f)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Xe(),n.sibling=null,e=Ne.current,W(Ne,o?e&1|2:e&1),n):(le(n),null);case 22:case 23:return ji(n),rf(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(le(n),n.subtreeFlags&6&&(n.flags|=8192)):le(n),a=n.updateQueue,a!==null&&Gu(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&it(Is),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Li(De),le(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function QT(e,n){switch(Hh(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Li(De),Nt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return te(n),null;case 13:if(ji(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Vo()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return it(Ne),null;case 4:return Nt(),null;case 10:return Li(n.type),null;case 22:case 23:return ji(n),rf(),e!==null&&it(Is),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Li(De),null;case 25:return null;default:return null}}function Kp(e,n){switch(Hh(n),n.tag){case 3:Li(De),Nt();break;case 26:case 27:case 5:te(n);break;case 4:Nt();break;case 13:ji(n);break;case 19:it(Ne);break;case 10:Li(n.type);break;case 22:case 23:ji(n),rf(),e!==null&&it(Is);break;case 24:Li(De)}}function Xo(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var c=o.next;a=c;do{if((a.tag&e)===e){o=void 0;var f=a.create,v=a.inst;o=f(),v.destroy=o}a=a.next}while(a!==c)}}catch(E){Wt(n,n.return,E)}}function yr(e,n,a){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var f=c.next;o=f;do{if((o.tag&e)===e){var v=o.inst,E=v.destroy;if(E!==void 0){v.destroy=void 0,c=n;var b=a,L=E;try{L()}catch(G){Wt(c,b,G)}}}o=o.next}while(o!==f)}}catch(G){Wt(n,n.return,G)}}function Yp(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{Pg(n,a)}catch(o){Wt(e,e.return,o)}}}function Xp(e,n,a){a.props=Ds(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){Wt(e,n,o)}}function $o(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(c){Wt(e,n,c)}}function li(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(c){Wt(e,n,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(c){Wt(e,n,c)}else a.current=null}function $p(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(c){Wt(e,e.return,c)}}function Vf(e,n,a){try{var o=e.stateNode;dA(o,e.type,a,n),o[_e]=n}catch(c){Wt(e,e.return,c)}}function Zp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wr(e.type)||e.tag===4}function Mf(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Zp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xf(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=nc));else if(o!==4&&(o===27&&wr(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(xf(e,n,a),e=e.sibling;e!==null;)xf(e,n,a),e=e.sibling}function Fu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&wr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Fu(e,n,a),e=e.sibling;e!==null;)Fu(e,n,a),e=e.sibling}function Jp(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);Fe(n,o,a),n[Re]=e,n[_e]=a}catch(f){Wt(e,e.return,f)}}var Hi=!1,ge=!1,Pf=!1,Wp=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function KT(e,n){if(e=e.containerInfo,sd=uc,e=cg(e),Vh(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var c=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break t}var v=0,E=-1,b=-1,L=0,G=0,K=e,z=null;e:for(;;){for(var j;K!==a||c!==0&&K.nodeType!==3||(E=v+c),K!==f||o!==0&&K.nodeType!==3||(b=v+o),K.nodeType===3&&(v+=K.nodeValue.length),(j=K.firstChild)!==null;)z=K,K=j;for(;;){if(K===e)break e;if(z===a&&++L===c&&(E=v),z===f&&++G===o&&(b=v),(j=K.nextSibling)!==null)break;K=z,z=K.parentNode}K=j}a=E===-1||b===-1?null:{start:E,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(ad={focusedElem:e,selectionRange:a},uc=!1,Ue=n;Ue!==null;)if(n=Ue,e=n.child,(n.subtreeFlags&1024)!==0&&e!==null)e.return=n,Ue=e;else for(;Ue!==null;){switch(n=Ue,f=n.alternate,e=n.flags,n.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,a=n,c=f.memoizedProps,f=f.memoizedState,o=a.stateNode;try{var Et=Ds(a.type,c,a.elementType===a.type);e=o.getSnapshotBeforeUpdate(Et,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(pt){Wt(a,a.return,pt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)ud(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ud(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Ue=e;break}Ue=n.return}}function ty(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:_r(e,a),o&4&&Xo(5,a);break;case 1:if(_r(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(v){Wt(a,a.return,v)}else{var c=Ds(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(c,n,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Wt(a,a.return,v)}}o&64&&Yp(a),o&512&&$o(a,a.return);break;case 3:if(_r(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{Pg(e,n)}catch(v){Wt(a,a.return,v)}}break;case 27:n===null&&o&4&&Jp(a);case 26:case 5:_r(e,a),n===null&&o&4&&$p(a),o&512&&$o(a,a.return);break;case 12:_r(e,a);break;case 13:_r(e,a),o&4&&iy(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=nA.bind(null,a),EA(e,a))));break;case 22:if(o=a.memoizedState!==null||Hi,!o){n=n!==null&&n.memoizedState!==null||ge,c=Hi;var f=ge;Hi=o,(ge=n)&&!f?vr(e,a,(a.subtreeFlags&8772)!==0):_r(e,a),Hi=c,ge=f}break;case 30:break;default:_r(e,a)}}function ey(e){var n=e.alternate;n!==null&&(e.alternate=null,ey(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&ar(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ae=null,hn=!1;function Gi(e,n,a){for(a=a.child;a!==null;)ny(e,n,a),a=a.sibling}function ny(e,n,a){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(ce,a)}catch{}switch(a.tag){case 26:ge||li(a,n),Gi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ge||li(a,n);var o=ae,c=hn;wr(a.type)&&(ae=a.stateNode,hn=!1),Gi(e,n,a),sl(a.stateNode),ae=o,hn=c;break;case 5:ge||li(a,n);case 6:if(o=ae,c=hn,ae=null,Gi(e,n,a),ae=o,hn=c,ae!==null)if(hn)try{(ae.nodeType===9?ae.body:ae.nodeName==="HTML"?ae.ownerDocument.body:ae).removeChild(a.stateNode)}catch(f){Wt(a,n,f)}else try{ae.removeChild(a.stateNode)}catch(f){Wt(a,n,f)}break;case 18:ae!==null&&(hn?(e=ae,Gy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),dl(e)):Gy(ae,a.stateNode));break;case 4:o=ae,c=hn,ae=a.stateNode.containerInfo,hn=!0,Gi(e,n,a),ae=o,hn=c;break;case 0:case 11:case 14:case 15:ge||yr(2,a,n),ge||yr(4,a,n),Gi(e,n,a);break;case 1:ge||(li(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&Xp(a,n,o)),Gi(e,n,a);break;case 21:Gi(e,n,a);break;case 22:ge=(o=ge)||a.memoizedState!==null,Gi(e,n,a),ge=o;break;default:Gi(e,n,a)}}function iy(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{dl(e)}catch(a){Wt(n,n.return,a)}}function YT(e){switch(e.tag){case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Wp),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Wp),n;default:throw Error(s(435,e.tag))}}function kf(e,n){var a=YT(e);n.forEach(function(o){var c=iA.bind(null,e,o);a.has(o)||(a.add(o),o.then(c,c))})}function vn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var c=a[o],f=e,v=n,E=v;t:for(;E!==null;){switch(E.tag){case 27:if(wr(E.type)){ae=E.stateNode,hn=!1;break t}break;case 5:ae=E.stateNode,hn=!1;break t;case 3:case 4:ae=E.stateNode.containerInfo,hn=!0;break t}E=E.return}if(ae===null)throw Error(s(160));ny(f,v,c),ae=null,hn=!1,f=c.alternate,f!==null&&(f.return=null),c.return=null}if(n.subtreeFlags&13878)for(n=n.child;n!==null;)ry(n,e),n=n.sibling}var Qn=null;function ry(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:vn(n,e),En(e),o&4&&(yr(3,e,e.return),Xo(3,e),yr(5,e,e.return));break;case 1:vn(n,e),En(e),o&512&&(ge||a===null||li(a,a.return)),o&64&&Hi&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var c=Qn;if(vn(n,e),En(e),o&512&&(ge||a===null||li(a,a.return)),o&4){var f=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,c=c.ownerDocument||c;e:switch(o){case"title":f=c.getElementsByTagName("title")[0],(!f||f[rs]||f[Re]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=c.createElement(o),c.head.insertBefore(f,c.querySelector("head > title"))),Fe(f,o,a),f[Re]=e,de(f),o=f;break t;case"link":var v=Jy("link","href",c).get(o+(a.href||""));if(v){for(var E=0;E<v.length;E++)if(f=v[E],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(E,1);break e}}f=c.createElement(o),Fe(f,o,a),c.head.appendChild(f);break;case"meta":if(v=Jy("meta","content",c).get(o+(a.content||""))){for(E=0;E<v.length;E++)if(f=v[E],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(E,1);break e}}f=c.createElement(o),Fe(f,o,a),c.head.appendChild(f);break;default:throw Error(s(468,o))}f[Re]=e,de(f),o=f}e.stateNode=o}else Wy(c,e.type,e.stateNode);else e.stateNode=Zy(c,o,e.memoizedProps);else f!==o?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,o===null?Wy(c,e.type,e.stateNode):Zy(c,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Vf(e,e.memoizedProps,a.memoizedProps)}break;case 27:vn(n,e),En(e),o&512&&(ge||a===null||li(a,a.return)),a!==null&&o&4&&Vf(e,e.memoizedProps,a.memoizedProps);break;case 5:if(vn(n,e),En(e),o&512&&(ge||a===null||li(a,a.return)),e.flags&32){c=e.stateNode;try{Cn(c,"")}catch(j){Wt(e,e.return,j)}}o&4&&e.stateNode!=null&&(c=e.memoizedProps,Vf(e,c,a!==null?a.memoizedProps:c)),o&1024&&(Pf=!0);break;case 6:if(vn(n,e),En(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(j){Wt(e,e.return,j)}}break;case 3:if(ac=null,c=Qn,Qn=rc(n.containerInfo),vn(n,e),Qn=c,En(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{dl(n.containerInfo)}catch(j){Wt(e,e.return,j)}Pf&&(Pf=!1,sy(e));break;case 4:o=Qn,Qn=rc(e.stateNode.containerInfo),vn(n,e),En(e),Qn=o;break;case 12:vn(n,e),En(e);break;case 13:vn(n,e),En(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qf=Xe()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,kf(e,o)));break;case 22:c=e.memoizedState!==null;var b=a!==null&&a.memoizedState!==null,L=Hi,G=ge;if(Hi=L||c,ge=G||b,vn(n,e),ge=G,Hi=L,En(e),o&8192)t:for(n=e.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(a===null||b||Hi||ge||Ns(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){b=a=n;try{if(f=b.stateNode,c)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{E=b.stateNode;var K=b.memoizedProps.style,z=K!=null&&K.hasOwnProperty("display")?K.display:null;E.style.display=z==null||typeof z=="boolean"?"":(""+z).trim()}}catch(j){Wt(b,b.return,j)}}}else if(n.tag===6){if(a===null){b=n;try{b.stateNode.nodeValue=c?"":b.memoizedProps}catch(j){Wt(b,b.return,j)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,kf(e,a))));break;case 19:vn(n,e),En(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,kf(e,o)));break;case 30:break;case 21:break;default:vn(n,e),En(e)}}function En(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(Zp(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var c=a.stateNode,f=Mf(e);Fu(e,f,c);break;case 5:var v=a.stateNode;a.flags&32&&(Cn(v,""),a.flags&=-33);var E=Mf(e);Fu(e,E,v);break;case 3:case 4:var b=a.stateNode.containerInfo,L=Mf(e);xf(e,L,b);break;default:throw Error(s(161))}}catch(G){Wt(e,e.return,G)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function sy(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;sy(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function _r(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ty(e,n.alternate,n),n=n.sibling}function Ns(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:yr(4,n,n.return),Ns(n);break;case 1:li(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Xp(n,n.return,a),Ns(n);break;case 27:sl(n.stateNode);case 26:case 5:li(n,n.return),Ns(n);break;case 22:n.memoizedState===null&&Ns(n);break;case 30:Ns(n);break;default:Ns(n)}e=e.sibling}}function vr(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=e,f=n,v=f.flags;switch(f.tag){case 0:case 11:case 15:vr(c,f,a),Xo(4,f);break;case 1:if(vr(c,f,a),o=f,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(L){Wt(o,o.return,L)}if(o=f,c=o.updateQueue,c!==null){var E=o.stateNode;try{var b=c.shared.hiddenCallbacks;if(b!==null)for(c.shared.hiddenCallbacks=null,c=0;c<b.length;c++)xg(b[c],E)}catch(L){Wt(o,o.return,L)}}a&&v&64&&Yp(f),$o(f,f.return);break;case 27:Jp(f);case 26:case 5:vr(c,f,a),a&&o===null&&v&4&&$p(f),$o(f,f.return);break;case 12:vr(c,f,a);break;case 13:vr(c,f,a),a&&v&4&&iy(c,f);break;case 22:f.memoizedState===null&&vr(c,f,a),$o(f,f.return);break;case 30:break;default:vr(c,f,a)}n=n.sibling}}function Uf(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Po(a))}function Lf(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Po(e))}function ui(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ay(e,n,a,o),n=n.sibling}function ay(e,n,a,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:ui(e,n,a,o),c&2048&&Xo(9,n);break;case 1:ui(e,n,a,o);break;case 3:ui(e,n,a,o),c&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Po(e)));break;case 12:if(c&2048){ui(e,n,a,o),e=n.stateNode;try{var f=n.memoizedProps,v=f.id,E=f.onPostCommit;typeof E=="function"&&E(v,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(b){Wt(n,n.return,b)}}else ui(e,n,a,o);break;case 13:ui(e,n,a,o);break;case 23:break;case 22:f=n.stateNode,v=n.alternate,n.memoizedState!==null?f._visibility&2?ui(e,n,a,o):Zo(e,n):f._visibility&2?ui(e,n,a,o):(f._visibility|=2,Aa(e,n,a,o,(n.subtreeFlags&10256)!==0)),c&2048&&Uf(v,n);break;case 24:ui(e,n,a,o),c&2048&&Lf(n.alternate,n);break;default:ui(e,n,a,o)}}function Aa(e,n,a,o,c){for(c=c&&(n.subtreeFlags&10256)!==0,n=n.child;n!==null;){var f=e,v=n,E=a,b=o,L=v.flags;switch(v.tag){case 0:case 11:case 15:Aa(f,v,E,b,c),Xo(8,v);break;case 23:break;case 22:var G=v.stateNode;v.memoizedState!==null?G._visibility&2?Aa(f,v,E,b,c):Zo(f,v):(G._visibility|=2,Aa(f,v,E,b,c)),c&&L&2048&&Uf(v.alternate,v);break;case 24:Aa(f,v,E,b,c),c&&L&2048&&Lf(v.alternate,v);break;default:Aa(f,v,E,b,c)}n=n.sibling}}function Zo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,c=o.flags;switch(o.tag){case 22:Zo(a,o),c&2048&&Uf(o.alternate,o);break;case 24:Zo(a,o),c&2048&&Lf(o.alternate,o);break;default:Zo(a,o)}n=n.sibling}}var Jo=8192;function Sa(e){if(e.subtreeFlags&Jo)for(e=e.child;e!==null;)oy(e),e=e.sibling}function oy(e){switch(e.tag){case 26:Sa(e),e.flags&Jo&&e.memoizedState!==null&&MA(Qn,e.memoizedState,e.memoizedProps);break;case 5:Sa(e);break;case 3:case 4:var n=Qn;Qn=rc(e.stateNode.containerInfo),Sa(e),Qn=n;break;case 22:e.memoizedState===null&&(n=e.alternate,n!==null&&n.memoizedState!==null?(n=Jo,Jo=16777216,Sa(e),Jo=n):Sa(e));break;default:Sa(e)}}function ly(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Wo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ue=o,cy(o,e)}ly(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)uy(e),e=e.sibling}function uy(e){switch(e.tag){case 0:case 11:case 15:Wo(e),e.flags&2048&&yr(9,e,e.return);break;case 3:Wo(e);break;case 12:Wo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Qu(e)):Wo(e);break;default:Wo(e)}}function Qu(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ue=o,cy(o,e)}ly(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:yr(8,n,n.return),Qu(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,Qu(n));break;default:Qu(n)}e=e.sibling}}function cy(e,n){for(;Ue!==null;){var a=Ue;switch(a.tag){case 0:case 11:case 15:yr(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Po(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ue=o;else t:for(a=e;Ue!==null;){o=Ue;var c=o.sibling,f=o.return;if(ey(o),o===a){Ue=null;break t}if(c!==null){c.return=f,Ue=c;break t}Ue=f}}}var XT={getCacheForType:function(e){var n=Ze(De),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a}},$T=typeof WeakMap=="function"?WeakMap:Map,Kt=0,ee=null,Ot=null,Lt=0,Yt=0,Tn=null,Er=!1,ba=!1,zf=!1,Fi=0,fe=0,Tr=0,Os=0,jf=0,Un=0,wa=0,tl=null,fn=null,Bf=!1,qf=0,Ku=1/0,Yu=null,Ar=null,Ge=0,Sr=null,Ra=null,Ia=0,Hf=0,Gf=null,hy=null,el=0,Ff=null;function An(){if((Kt&2)!==0&&Lt!==0)return Lt&-Lt;if(q.T!==null){var e=ma;return e!==0?e:Jf()}return rr()}function fy(){Un===0&&(Un=(Lt&536870912)===0||Ht?uo():536870912);var e=kn.current;return e!==null&&(e.flags|=32),Un}function Sn(e,n,a){(e===ee&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)&&(Ca(e,0),br(e,Lt,Un,!1)),Si(e,a),((Kt&2)===0||e!==ee)&&(e===ee&&((Kt&2)===0&&(Os|=a),fe===4&&br(e,Lt,Un,!1)),ci(e))}function dy(e,n,a){if((Kt&6)!==0)throw Error(s(327));var o=!a&&(n&124)===0&&(n&e.expiredLanes)===0||is(e,n),c=o?WT(e,n):Yf(e,n,!0),f=o;do{if(c===0){ba&&!o&&br(e,n,0,!1);break}else{if(a=e.current.alternate,f&&!ZT(a)){c=Yf(e,n,!1),f=!1;continue}if(c===2){if(f=n,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;t:{var E=e;c=tl;var b=E.current.memoizedState.isDehydrated;if(b&&(Ca(E,v).flags|=256),v=Yf(E,v,!1),v!==2){if(zf&&!b){E.errorRecoveryDisabledLanes|=f,Os|=f,c=4;break t}f=fn,fn=c,f!==null&&(fn===null?fn=f:fn.push.apply(fn,f))}c=v}if(f=!1,c!==2)continue}}if(c===1){Ca(e,0),br(e,n,0,!0);break}t:{switch(o=e,f=c,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:br(o,n,Un,!Er);break t;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(c=qf+300-Xe(),10<c)){if(br(o,n,Un,!Er),Fs(o,0,!0)!==0)break t;o.timeoutHandle=qy(my.bind(null,o,a,fn,Yu,Bf,n,Un,Os,wa,Er,f,2,-0,0),c);break t}my(o,a,fn,Yu,Bf,n,Un,Os,wa,Er,f,0,-0,0)}}break}while(!0);ci(e)}function my(e,n,a,o,c,f,v,E,b,L,G,K,z,j){if(e.timeoutHandle=-1,K=n.subtreeFlags,(K&8192||(K&16785408)===16785408)&&(ll={stylesheets:null,count:0,unsuspend:VA},oy(n),K=xA(),K!==null)){e.cancelPendingCommit=K(Ty.bind(null,e,n,f,a,o,c,v,E,b,G,1,z,j)),br(e,f,v,!L);return}Ty(e,n,f,a,o,c,v,E,b)}function ZT(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var c=a[o],f=c.getSnapshot;c=c.value;try{if(!yn(f(),c))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function br(e,n,a,o){n&=~jf,n&=~Os,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var c=n;0<c;){var f=31-$e(c),v=1<<f;o[f]=-1,c&=~v}a!==0&&Xn(e,a,n)}function Xu(){return(Kt&6)===0?(nl(0),!1):!0}function Qf(){if(Ot!==null){if(Yt===0)var e=Ot.return;else e=Ot,Ui=ws=null,uf(e),Ea=null,Qo=0,e=Ot;for(;e!==null;)Kp(e.alternate,e),e=e.return;Ot=null}}function Ca(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,gA(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Qf(),ee=e,Ot=a=xi(e.current,null),Lt=n,Yt=0,Tn=null,Er=!1,ba=is(e,n),zf=!1,wa=Un=jf=Os=Tr=fe=0,fn=tl=null,Bf=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var c=31-$e(o),f=1<<c;n|=e[c],o&=~f}return Fi=n,yu(),a}function gy(e,n){Ct=null,q.H=ku,n===Uo||n===Ru?(n=Vg(),Yt=3):n===Dg?(n=Vg(),Yt=4):Yt=n===Mp?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Tn=n,Ot===null&&(fe=1,Bu(e,Vn(n,e.current)))}function py(){var e=q.H;return q.H=ku,e===null?ku:e}function yy(){var e=q.A;return q.A=XT,e}function Kf(){fe=4,Er||(Lt&4194048)!==Lt&&kn.current!==null||(ba=!0),(Tr&134217727)===0&&(Os&134217727)===0||ee===null||br(ee,Lt,Un,!1)}function Yf(e,n,a){var o=Kt;Kt|=2;var c=py(),f=yy();(ee!==e||Lt!==n)&&(Yu=null,Ca(e,n)),n=!1;var v=fe;t:do try{if(Yt!==0&&Ot!==null){var E=Ot,b=Tn;switch(Yt){case 8:Qf(),v=6;break t;case 3:case 2:case 9:case 6:kn.current===null&&(n=!0);var L=Yt;if(Yt=0,Tn=null,Da(e,E,b,L),a&&ba){v=0;break t}break;default:L=Yt,Yt=0,Tn=null,Da(e,E,b,L)}}JT(),v=fe;break}catch(G){gy(e,G)}while(!0);return n&&e.shellSuspendCounter++,Ui=ws=null,Kt=o,q.H=c,q.A=f,Ot===null&&(ee=null,Lt=0,yu()),v}function JT(){for(;Ot!==null;)_y(Ot)}function WT(e,n){var a=Kt;Kt|=2;var o=py(),c=yy();ee!==e||Lt!==n?(Yu=null,Ku=Xe()+500,Ca(e,n)):ba=is(e,n);t:do try{if(Yt!==0&&Ot!==null){n=Ot;var f=Tn;e:switch(Yt){case 1:Yt=0,Tn=null,Da(e,n,f,1);break;case 2:case 9:if(Ng(f)){Yt=0,Tn=null,vy(n);break}n=function(){Yt!==2&&Yt!==9||ee!==e||(Yt=7),ci(e)},f.then(n,n);break t;case 3:Yt=7;break t;case 4:Yt=5;break t;case 7:Ng(f)?(Yt=0,Tn=null,vy(n)):(Yt=0,Tn=null,Da(e,n,f,7));break;case 5:var v=null;switch(Ot.tag){case 26:v=Ot.memoizedState;case 5:case 27:var E=Ot;if(!v||t_(v)){Yt=0,Tn=null;var b=E.sibling;if(b!==null)Ot=b;else{var L=E.return;L!==null?(Ot=L,$u(L)):Ot=null}break e}}Yt=0,Tn=null,Da(e,n,f,5);break;case 6:Yt=0,Tn=null,Da(e,n,f,6);break;case 8:Qf(),fe=6;break t;default:throw Error(s(462))}}tA();break}catch(G){gy(e,G)}while(!0);return Ui=ws=null,q.H=o,q.A=c,Kt=a,Ot!==null?0:(ee=null,Lt=0,yu(),fe)}function tA(){for(;Ot!==null&&!Me();)_y(Ot)}function _y(e){var n=Fp(e.alternate,e,Fi);e.memoizedProps=e.pendingProps,n===null?$u(e):Ot=n}function vy(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=zp(a,n,n.pendingProps,n.type,void 0,Lt);break;case 11:n=zp(a,n,n.pendingProps,n.type.render,n.ref,Lt);break;case 5:uf(n);default:Kp(a,n),n=Ot=Eg(n,Fi),n=Fp(a,n,Fi)}e.memoizedProps=e.pendingProps,n===null?$u(e):Ot=n}function Da(e,n,a,o){Ui=ws=null,uf(n),Ea=null,Qo=0;var c=n.return;try{if(HT(e,c,n,a,Lt)){fe=1,Bu(e,Vn(a,e.current)),Ot=null;return}}catch(f){if(c!==null)throw Ot=c,f;fe=1,Bu(e,Vn(a,e.current)),Ot=null;return}n.flags&32768?(Ht||o===1?e=!0:ba||(Lt&536870912)!==0?e=!1:(Er=e=!0,(o===2||o===9||o===3||o===6)&&(o=kn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ey(n,e)):$u(n)}function $u(e){var n=e;do{if((n.flags&32768)!==0){Ey(n,Er);return}e=n.return;var a=FT(n.alternate,n,Fi);if(a!==null){Ot=a;return}if(n=n.sibling,n!==null){Ot=n;return}Ot=n=e}while(n!==null);fe===0&&(fe=5)}function Ey(e,n){do{var a=QT(e.alternate,e);if(a!==null){a.flags&=32767,Ot=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Ot=e;return}Ot=e=a}while(e!==null);fe=6,Ot=null}function Ty(e,n,a,o,c,f,v,E,b){e.cancelPendingCommit=null;do Zu();while(Ge!==0);if((Kt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=Uh,ho(e,a,f,v,E,b),e===ee&&(Ot=ee=null,Lt=0),Ra=n,Sr=e,Ia=a,Hf=f,Gf=c,hy=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,rA(Wr,function(){return Ry(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=q.T,q.T=null,c=et.p,et.p=2,v=Kt,Kt|=4;try{KT(e,n,a)}finally{Kt=v,et.p=c,q.T=o}}Ge=1,Ay(),Sy(),by()}}function Ay(){if(Ge===1){Ge=0;var e=Sr,n=Ra,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var o=et.p;et.p=2;var c=Kt;Kt|=4;try{ry(n,e);var f=ad,v=cg(e.containerInfo),E=f.focusedElem,b=f.selectionRange;if(v!==E&&E&&E.ownerDocument&&ug(E.ownerDocument.documentElement,E)){if(b!==null&&Vh(E)){var L=b.start,G=b.end;if(G===void 0&&(G=L),"selectionStart"in E)E.selectionStart=L,E.selectionEnd=Math.min(G,E.value.length);else{var K=E.ownerDocument||document,z=K&&K.defaultView||window;if(z.getSelection){var j=z.getSelection(),Et=E.textContent.length,pt=Math.min(b.start,Et),Jt=b.end===void 0?pt:Math.min(b.end,Et);!j.extend&&pt>Jt&&(v=Jt,Jt=pt,pt=v);var x=lg(E,pt),N=lg(E,Jt);if(x&&N&&(j.rangeCount!==1||j.anchorNode!==x.node||j.anchorOffset!==x.offset||j.focusNode!==N.node||j.focusOffset!==N.offset)){var U=K.createRange();U.setStart(x.node,x.offset),j.removeAllRanges(),pt>Jt?(j.addRange(U),j.extend(N.node,N.offset)):(U.setEnd(N.node,N.offset),j.addRange(U))}}}}for(K=[],j=E;j=j.parentNode;)j.nodeType===1&&K.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<K.length;E++){var F=K[E];F.element.scrollLeft=F.left,F.element.scrollTop=F.top}}uc=!!sd,ad=sd=null}finally{Kt=c,et.p=o,q.T=a}}e.current=n,Ge=2}}function Sy(){if(Ge===2){Ge=0;var e=Sr,n=Ra,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var o=et.p;et.p=2;var c=Kt;Kt|=4;try{ty(e,n.alternate,n)}finally{Kt=c,et.p=o,q.T=a}}Ge=3}}function by(){if(Ge===4||Ge===3){Ge=0,Rn();var e=Sr,n=Ra,a=Ia,o=hy;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Ge=5:(Ge=0,Ra=Sr=null,wy(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Ar=null),Qs(a),n=n.stateNode,Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(ce,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=q.T,c=et.p,et.p=2,q.T=null;try{for(var f=e.onRecoverableError,v=0;v<o.length;v++){var E=o[v];f(E.value,{componentStack:E.stack})}}finally{q.T=n,et.p=c}}(Ia&3)!==0&&Zu(),ci(e),c=e.pendingLanes,(a&4194090)!==0&&(c&42)!==0?e===Ff?el++:(el=0,Ff=e):el=0,nl(0)}}function wy(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Po(n)))}function Zu(e){return Ay(),Sy(),by(),Ry()}function Ry(){if(Ge!==5)return!1;var e=Sr,n=Hf;Hf=0;var a=Qs(Ia),o=q.T,c=et.p;try{et.p=32>a?32:a,q.T=null,a=Gf,Gf=null;var f=Sr,v=Ia;if(Ge=0,Ra=Sr=null,Ia=0,(Kt&6)!==0)throw Error(s(331));var E=Kt;if(Kt|=4,uy(f.current),ay(f,f.current,v,a),Kt=E,nl(0,!1),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(ce,f)}catch{}return!0}finally{et.p=c,q.T=o,wy(e,n)}}function Iy(e,n,a){n=Vn(a,n),n=Sf(e.stateNode,n,2),e=dr(e,n,2),e!==null&&(Si(e,2),ci(e))}function Wt(e,n,a){if(e.tag===3)Iy(e,e,a);else for(;n!==null;){if(n.tag===3){Iy(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ar===null||!Ar.has(o))){e=Vn(a,e),a=Op(2),o=dr(n,a,2),o!==null&&(Vp(a,o,n,e),Si(o,2),ci(o));break}}n=n.return}}function Xf(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new $T;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(a)||(zf=!0,c.add(a),e=eA.bind(null,e,n,a),n.then(e,e))}function eA(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ee===e&&(Lt&a)===a&&(fe===4||fe===3&&(Lt&62914560)===Lt&&300>Xe()-qf?(Kt&2)===0&&Ca(e,0):jf|=a,wa===Lt&&(wa=0)),ci(e)}function Cy(e,n){n===0&&(n=co()),e=ca(e,n),e!==null&&(Si(e,n),ci(e))}function nA(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Cy(e,a)}function iA(e,n){var a=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(a=c.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Cy(e,a)}function rA(e,n){return sn(e,n)}var Ju=null,Na=null,$f=!1,Wu=!1,Zf=!1,Vs=0;function ci(e){e!==Na&&e.next===null&&(Na===null?Ju=Na=e:Na=Na.next=e),Wu=!0,$f||($f=!0,aA())}function nl(e,n){if(!Zf&&Wu){Zf=!0;do for(var a=!1,o=Ju;o!==null;){if(e!==0){var c=o.pendingLanes;if(c===0)var f=0;else{var v=o.suspendedLanes,E=o.pingedLanes;f=(1<<31-$e(42|e)+1)-1,f&=c&~(v&~E),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,Vy(o,f))}else f=Lt,f=Fs(o,o===ee?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||is(o,f)||(a=!0,Vy(o,f));o=o.next}while(a);Zf=!1}}function sA(){Dy()}function Dy(){Wu=$f=!1;var e=0;Vs!==0&&(mA()&&(e=Vs),Vs=0);for(var n=Xe(),a=null,o=Ju;o!==null;){var c=o.next,f=Ny(o,n);f===0?(o.next=null,a===null?Ju=c:a.next=c,c===null&&(Na=a)):(a=o,(e!==0||(f&3)!==0)&&(Wu=!0)),o=c}nl(e)}function Ny(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-$e(f),E=1<<v,b=c[v];b===-1?((E&a)===0||(E&o)!==0)&&(c[v]=lo(E,n)):b<=n&&(e.expiredLanes|=E),f&=~E}if(n=ee,a=Lt,a=Fs(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(Yt===2||Yt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&wn(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||is(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&wn(o),Qs(a)){case 2:case 8:a=Hs;break;case 32:a=Wr;break;case 268435456:a=Gs;break;default:a=Wr}return o=Oy.bind(null,e),a=sn(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&wn(o),e.callbackPriority=2,e.callbackNode=null,2}function Oy(e,n){if(Ge!==0&&Ge!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Zu()&&e.callbackNode!==a)return null;var o=Lt;return o=Fs(e,e===ee?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(dy(e,o,n),Ny(e,Xe()),e.callbackNode!=null&&e.callbackNode===a?Oy.bind(null,e):null)}function Vy(e,n){if(Zu())return null;dy(e,n,!0)}function aA(){pA(function(){(Kt&6)!==0?sn(Jr,sA):Dy()})}function Jf(){return Vs===0&&(Vs=uo()),Vs}function My(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Js(""+e)}function xy(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function oA(e,n,a,o,c){if(n==="submit"&&a&&a.stateNode===c){var f=My((c[_e]||null).action),v=o.submitter;v&&(n=(n=v[_e]||null)?My(n.formAction):v.getAttribute("formAction"),n!==null&&(f=n,v=null));var E=new Ws("action","action",null,o,c);e.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Vs!==0){var b=v?xy(c,v):new FormData(c);_f(a,{pending:!0,data:b,method:c.method,action:f},null,b)}}else typeof f=="function"&&(E.preventDefault(),b=v?xy(c,v):new FormData(c),_f(a,{pending:!0,data:b,method:c.method,action:f},f,b))},currentTarget:c}]})}}for(var Wf=0;Wf<kh.length;Wf++){var td=kh[Wf],lA=td.toLowerCase(),uA=td[0].toUpperCase()+td.slice(1);Fn(lA,"on"+uA)}Fn(dg,"onAnimationEnd"),Fn(mg,"onAnimationIteration"),Fn(gg,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(RT,"onTransitionRun"),Fn(IT,"onTransitionStart"),Fn(CT,"onTransitionCancel"),Fn(pg,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(il));function Py(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],c=o.event;o=o.listeners;t:{var f=void 0;if(n)for(var v=o.length-1;0<=v;v--){var E=o[v],b=E.instance,L=E.currentTarget;if(E=E.listener,b!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(G){ju(G)}c.currentTarget=null,f=b}else for(v=0;v<o.length;v++){if(E=o[v],b=E.instance,L=E.currentTarget,E=E.listener,b!==f&&c.isPropagationStopped())break t;f=E,c.currentTarget=L;try{f(c)}catch(G){ju(G)}c.currentTarget=null,f=b}}}}function Vt(e,n){var a=n[mo];a===void 0&&(a=n[mo]=new Set);var o=e+"__bubble";a.has(o)||(ky(n,e,2,!1),a.add(o))}function ed(e,n,a){var o=0;n&&(o|=4),ky(a,e,o,n)}var tc="_reactListening"+Math.random().toString(36).slice(2);function nd(e){if(!e[tc]){e[tc]=!0,go.forEach(function(a){a!=="selectionchange"&&(cA.has(a)||ed(a,!1,e),ed(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[tc]||(n[tc]=!0,ed("selectionchange",!1,n))}}function ky(e,n,a,o){switch(a_(n)){case 2:var c=UA;break;case 8:c=LA;break;default:c=pd}a=c.bind(null,n,a,e),c=void 0,!Nn||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(n,a,{capture:!0,passive:c}):e.addEventListener(n,a,!0):c!==void 0?e.addEventListener(n,a,{passive:c}):e.addEventListener(n,a,!1)}function id(e,n,a,o,c){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var E=o.stateNode.containerInfo;if(E===c)break;if(v===4)for(v=o.return;v!==null;){var b=v.tag;if((b===3||b===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;E!==null;){if(v=bi(E),v===null)return;if(b=v.tag,b===5||b===6||b===26||b===27){o=f=v;continue t}E=E.parentNode}}o=o.return}nu(function(){var L=f,G=Dn(a),K=[];t:{var z=yg.get(e);if(z!==void 0){var j=Ws,Et=e;switch(e){case"keypress":if(ei(a)===0)break t;case"keydown":case"keyup":j=sa;break;case"focusin":Et="focus",j=na;break;case"focusout":Et="blur",j=na;break;case"beforeblur":case"afterblur":j=na;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=On;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=Ch;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=cu;break;case dg:case mg:case gg:j=ia;break;case pg:j=fu;break;case"scroll":case"scrollend":j=iu;break;case"wheel":j=aa;break;case"copy":case"cut":case"paste":j=ra;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=Io;break;case"toggle":case"beforetoggle":j=mu}var pt=(n&4)!==0,Jt=!pt&&(e==="scroll"||e==="scrollend"),x=pt?z!==null?z+"Capture":null:z;pt=[];for(var N=L,U;N!==null;){var F=N;if(U=F.stateNode,F=F.tag,F!==5&&F!==26&&F!==27||U===null||x===null||(F=hs(N,x),F!=null&&pt.push(rl(N,F,U))),Jt)break;N=N.return}0<pt.length&&(z=new j(z,Et,null,a,G),K.push({event:z,listeners:pt}))}}if((n&7)===0){t:{if(z=e==="mouseover"||e==="pointerover",j=e==="mouseout"||e==="pointerout",z&&a!==Ci&&(Et=a.relatedTarget||a.fromElement)&&(bi(Et)||Et[In]))break t;if((j||z)&&(z=G.window===G?G:(z=G.ownerDocument)?z.defaultView||z.parentWindow:window,j?(Et=a.relatedTarget||a.toElement,j=L,Et=Et?bi(Et):null,Et!==null&&(Jt=h(Et),pt=Et.tag,Et!==Jt||pt!==5&&pt!==27&&pt!==6)&&(Et=null)):(j=null,Et=L),j!==Et)){if(pt=On,F="onMouseLeave",x="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(pt=Io,F="onPointerLeave",x="onPointerEnter",N="pointer"),Jt=j==null?z:Zn(j),U=Et==null?z:Zn(Et),z=new pt(F,N+"leave",j,a,G),z.target=Jt,z.relatedTarget=U,F=null,bi(G)===L&&(pt=new pt(x,N+"enter",Et,a,G),pt.target=U,pt.relatedTarget=Jt,F=pt),Jt=F,j&&Et)e:{for(pt=j,x=Et,N=0,U=pt;U;U=Oa(U))N++;for(U=0,F=x;F;F=Oa(F))U++;for(;0<N-U;)pt=Oa(pt),N--;for(;0<U-N;)x=Oa(x),U--;for(;N--;){if(pt===x||x!==null&&pt===x.alternate)break e;pt=Oa(pt),x=Oa(x)}pt=null}else pt=null;j!==null&&Uy(K,z,j,pt,!1),Et!==null&&Jt!==null&&Uy(K,Jt,Et,pt,!0)}}t:{if(z=L?Zn(L):window,j=z.nodeName&&z.nodeName.toLowerCase(),j==="select"||j==="input"&&z.type==="file")var ot=ng;else if(Ce(z))if(ig)ot=ST;else{ot=TT;var Dt=ET}else j=z.nodeName,!j||j.toLowerCase()!=="input"||z.type!=="checkbox"&&z.type!=="radio"?L&&Eo(L.elementType)&&(ot=ng):ot=AT;if(ot&&(ot=ot(e,L))){Mi(K,ot,a,G);break t}Dt&&Dt(e,z,L),e==="focusout"&&L&&z.type==="number"&&L.memoizedProps.value!=null&&lr(z,"number",z.value)}switch(Dt=L?Zn(L):window,e){case"focusin":(Ce(Dt)||Dt.contentEditable==="true")&&(oa=Dt,Mh=L,No=null);break;case"focusout":No=Mh=oa=null;break;case"mousedown":xh=!0;break;case"contextmenu":case"mouseup":case"dragend":xh=!1,hg(K,a,G);break;case"selectionchange":if(wT)break;case"keydown":case"keyup":hg(K,a,G)}var ht;if(ri)t:{switch(e){case"compositionstart":var yt="onCompositionStart";break t;case"compositionend":yt="onCompositionEnd";break t;case"compositionupdate":yt="onCompositionUpdate";break t}yt=void 0}else kt?B(e,a)&&(yt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(yt="onCompositionStart");yt&&(p&&a.locale!=="ko"&&(kt||yt!=="onCompositionStart"?yt==="onCompositionEnd"&&kt&&(ht=Ao()):(ti=G,ur="value"in ti?ti.value:ti.textContent,kt=!0)),Dt=ec(L,yt),0<Dt.length&&(yt=new wo(yt,e,null,a,G),K.push({event:yt,listeners:Dt}),ht?yt.data=ht:(ht=nt(a),ht!==null&&(yt.data=ht)))),(ht=m?Ie(e,a):Ut(e,a))&&(yt=ec(L,"onBeforeInput"),0<yt.length&&(Dt=new wo("onBeforeInput","beforeinput",null,a,G),K.push({event:Dt,listeners:yt}),Dt.data=ht)),oA(K,e,L,a,G)}Py(K,n)})}function rl(e,n,a){return{instance:e,listener:n,currentTarget:a}}function ec(e,n){for(var a=n+"Capture",o=[];e!==null;){var c=e,f=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||f===null||(c=hs(e,a),c!=null&&o.unshift(rl(e,c,f)),c=hs(e,n),c!=null&&o.push(rl(e,c,f))),e.tag===3)return o;e=e.return}return[]}function Oa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Uy(e,n,a,o,c){for(var f=n._reactName,v=[];a!==null&&a!==o;){var E=a,b=E.alternate,L=E.stateNode;if(E=E.tag,b!==null&&b===o)break;E!==5&&E!==26&&E!==27||L===null||(b=L,c?(L=hs(a,f),L!=null&&v.unshift(rl(a,L,b))):c||(L=hs(a,f),L!=null&&v.push(rl(a,L,b)))),a=a.return}v.length!==0&&e.push({event:n,listeners:v})}var hA=/\r\n?/g,fA=/\u0000|\uFFFD/g;function Ly(e){return(typeof e=="string"?e:""+e).replace(hA,`
`).replace(fA,"")}function zy(e,n){return n=Ly(n),Ly(e)===n}function nc(){}function Zt(e,n,a,o,c,f){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Cn(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Cn(e,""+o);break;case"className":Jn(e,"class",o);break;case"tabIndex":Jn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(e,a,o);break;case"style":vo(e,o,f);break;case"data":if(n!=="object"){Jn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Js(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(n!=="input"&&Zt(e,n,"name",c.name,c,null),Zt(e,n,"formEncType",c.formEncType,c,null),Zt(e,n,"formMethod",c.formMethod,c,null),Zt(e,n,"formTarget",c.formTarget,c,null)):(Zt(e,n,"encType",c.encType,c,null),Zt(e,n,"method",c.method,c,null),Zt(e,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Js(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=nc);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Js(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Vt("beforetoggle",e),Vt("toggle",e),or(e,"popover",o);break;case"xlinkActuate":Be(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Be(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Be(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Be(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Be(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Be(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Be(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Be(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Be(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":or(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Rh.get(a)||a,or(e,a,o))}}function rd(e,n,a,o,c,f){switch(a){case"style":vo(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(c.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?Cn(e,o):(typeof o=="number"||typeof o=="bigint")&&Cn(e,""+o);break;case"onScroll":o!=null&&Vt("scroll",e);break;case"onScrollEnd":o!=null&&Vt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=nc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ks.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(c=a.endsWith("Capture"),n=a.slice(2,c?a.length-7:void 0),f=e[_e]||null,f=f!=null?f[a]:null,typeof f=="function"&&e.removeEventListener(n,f,c),typeof o=="function")){typeof f!="function"&&f!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,c);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):or(e,a,o)}}}function Fe(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vt("error",e),Vt("load",e);var o=!1,c=!1,f;for(f in a)if(a.hasOwnProperty(f)){var v=a[f];if(v!=null)switch(f){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,f,v,a,null)}}c&&Zt(e,n,"srcSet",a.srcSet,a,null),o&&Zt(e,n,"src",a.src,a,null);return;case"input":Vt("invalid",e);var E=f=v=c=null,b=null,L=null;for(o in a)if(a.hasOwnProperty(o)){var G=a[o];if(G!=null)switch(o){case"name":c=G;break;case"type":v=G;break;case"checked":b=G;break;case"defaultChecked":L=G;break;case"value":f=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Zt(e,n,o,G,a,null)}}ls(e,f,E,b,L,v,c,!1),Zs(e);return;case"select":Vt("invalid",e),o=v=f=null;for(c in a)if(a.hasOwnProperty(c)&&(E=a[c],E!=null))switch(c){case"value":f=E;break;case"defaultValue":v=E;break;case"multiple":o=E;default:Zt(e,n,c,E,a,null)}n=f,a=v,e.multiple=!!o,n!=null?Ii(e,!!o,n,!1):a!=null&&Ii(e,!!o,a,!0);return;case"textarea":Vt("invalid",e),f=c=o=null;for(v in a)if(a.hasOwnProperty(v)&&(E=a[v],E!=null))switch(v){case"value":o=E;break;case"defaultValue":c=E;break;case"children":f=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:Zt(e,n,v,E,a,null)}us(e,o,c,f),Zs(e);return;case"option":for(b in a)if(a.hasOwnProperty(b)&&(o=a[b],o!=null))switch(b){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Zt(e,n,b,o,a,null)}return;case"dialog":Vt("beforetoggle",e),Vt("toggle",e),Vt("cancel",e),Vt("close",e);break;case"iframe":case"object":Vt("load",e);break;case"video":case"audio":for(o=0;o<il.length;o++)Vt(il[o],e);break;case"image":Vt("error",e),Vt("load",e);break;case"details":Vt("toggle",e);break;case"embed":case"source":case"link":Vt("error",e),Vt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(L in a)if(a.hasOwnProperty(L)&&(o=a[L],o!=null))switch(L){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Zt(e,n,L,o,a,null)}return;default:if(Eo(n)){for(G in a)a.hasOwnProperty(G)&&(o=a[G],o!==void 0&&rd(e,n,G,o,a,void 0));return}}for(E in a)a.hasOwnProperty(E)&&(o=a[E],o!=null&&Zt(e,n,E,o,a,null))}function dA(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,f=null,v=null,E=null,b=null,L=null,G=null;for(j in a){var K=a[j];if(a.hasOwnProperty(j)&&K!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":b=K;default:o.hasOwnProperty(j)||Zt(e,n,j,null,o,K)}}for(var z in o){var j=o[z];if(K=a[z],o.hasOwnProperty(z)&&(j!=null||K!=null))switch(z){case"type":f=j;break;case"name":c=j;break;case"checked":L=j;break;case"defaultChecked":G=j;break;case"value":v=j;break;case"defaultValue":E=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(137,n));break;default:j!==K&&Zt(e,n,z,j,o,K)}}pn(e,v,E,b,L,G,f,c);return;case"select":j=v=E=z=null;for(f in a)if(b=a[f],a.hasOwnProperty(f)&&b!=null)switch(f){case"value":break;case"multiple":j=b;default:o.hasOwnProperty(f)||Zt(e,n,f,null,o,b)}for(c in o)if(f=o[c],b=a[c],o.hasOwnProperty(c)&&(f!=null||b!=null))switch(c){case"value":z=f;break;case"defaultValue":E=f;break;case"multiple":v=f;default:f!==b&&Zt(e,n,c,f,o,b)}n=E,a=v,o=j,z!=null?Ii(e,!!a,z,!1):!!o!=!!a&&(n!=null?Ii(e,!!a,n,!0):Ii(e,!!a,a?[]:"",!1));return;case"textarea":j=z=null;for(E in a)if(c=a[E],a.hasOwnProperty(E)&&c!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:Zt(e,n,E,null,o,c)}for(v in o)if(c=o[v],f=a[v],o.hasOwnProperty(v)&&(c!=null||f!=null))switch(v){case"value":z=c;break;case"defaultValue":j=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(s(91));break;default:c!==f&&Zt(e,n,v,c,o,f)}Xt(e,z,j);return;case"option":for(var Et in a)if(z=a[Et],a.hasOwnProperty(Et)&&z!=null&&!o.hasOwnProperty(Et))switch(Et){case"selected":e.selected=!1;break;default:Zt(e,n,Et,null,o,z)}for(b in o)if(z=o[b],j=a[b],o.hasOwnProperty(b)&&z!==j&&(z!=null||j!=null))switch(b){case"selected":e.selected=z&&typeof z!="function"&&typeof z!="symbol";break;default:Zt(e,n,b,z,o,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var pt in a)z=a[pt],a.hasOwnProperty(pt)&&z!=null&&!o.hasOwnProperty(pt)&&Zt(e,n,pt,null,o,z);for(L in o)if(z=o[L],j=a[L],o.hasOwnProperty(L)&&z!==j&&(z!=null||j!=null))switch(L){case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(s(137,n));break;default:Zt(e,n,L,z,o,j)}return;default:if(Eo(n)){for(var Jt in a)z=a[Jt],a.hasOwnProperty(Jt)&&z!==void 0&&!o.hasOwnProperty(Jt)&&rd(e,n,Jt,void 0,o,z);for(G in o)z=o[G],j=a[G],!o.hasOwnProperty(G)||z===j||z===void 0&&j===void 0||rd(e,n,G,z,o,j);return}}for(var x in a)z=a[x],a.hasOwnProperty(x)&&z!=null&&!o.hasOwnProperty(x)&&Zt(e,n,x,null,o,z);for(K in o)z=o[K],j=a[K],!o.hasOwnProperty(K)||z===j||z==null&&j==null||Zt(e,n,K,z,o,j)}var sd=null,ad=null;function ic(e){return e.nodeType===9?e:e.ownerDocument}function jy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function By(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function od(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var ld=null;function mA(){var e=window.event;return e&&e.type==="popstate"?e===ld?!1:(ld=e,!0):(ld=null,!1)}var qy=typeof setTimeout=="function"?setTimeout:void 0,gA=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,pA=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(e){return Hy.resolve(null).then(e).catch(yA)}:qy;function yA(e){setTimeout(function(){throw e})}function wr(e){return e==="head"}function Gy(e,n){var a=n,o=0,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<o&&8>o){a=o;var v=e.ownerDocument;if(a&1&&sl(v.documentElement),a&2&&sl(v.body),a&4)for(a=v.head,sl(a),v=a.firstChild;v;){var E=v.nextSibling,b=v.nodeName;v[rs]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=E}}if(c===0){e.removeChild(f),dl(n);return}c--}else a==="$"||a==="$?"||a==="$!"?c++:o=a.charCodeAt(0)-48;else o=0;a=f}while(a);dl(n)}function ud(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":ud(a),ar(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function _A(e,n,a,o){for(;e.nodeType===1;){var c=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[rs])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Kn(e.nextSibling),e===null)break}return null}function vA(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Kn(e.nextSibling),e===null))return null;return e}function cd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function EA(e,n){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Kn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="F!"||n==="F")break;if(n==="/$")return null}}return e}var hd=null;function Fy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(n===0)return e;n--}else a==="/$"&&n++}e=e.previousSibling}return null}function Qy(e,n,a){switch(n=ic(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function sl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);ar(e)}var Ln=new Map,Ky=new Set;function rc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Qi=et.d;et.d={f:TA,r:AA,D:SA,C:bA,L:wA,m:RA,X:CA,S:IA,M:DA};function TA(){var e=Qi.f(),n=Xu();return e||n}function AA(e){var n=$n(e);n!==null&&n.tag===5&&n.type==="form"?dp(n):Qi.r(e)}var Va=typeof document>"u"?null:document;function Yy(e,n,a){var o=Va;if(o&&typeof n=="string"&&n){var c=ve(n);c='link[rel="'+e+'"][href="'+c+'"]',typeof a=="string"&&(c+='[crossorigin="'+a+'"]'),Ky.has(c)||(Ky.add(c),e={rel:e,crossOrigin:a,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),Fe(n,"link",e),de(n),o.head.appendChild(n)))}}function SA(e){Qi.D(e),Yy("dns-prefetch",e,null)}function bA(e,n){Qi.C(e,n),Yy("preconnect",e,n)}function wA(e,n,a){Qi.L(e,n,a);var o=Va;if(o&&e&&n){var c='link[rel="preload"][as="'+ve(n)+'"]';n==="image"&&a&&a.imageSrcSet?(c+='[imagesrcset="'+ve(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(c+='[imagesizes="'+ve(a.imageSizes)+'"]')):c+='[href="'+ve(e)+'"]';var f=c;switch(n){case"style":f=Ma(e);break;case"script":f=xa(e)}Ln.has(f)||(e=A({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Ln.set(f,e),o.querySelector(c)!==null||n==="style"&&o.querySelector(al(f))||n==="script"&&o.querySelector(ol(f))||(n=o.createElement("link"),Fe(n,"link",e),de(n),o.head.appendChild(n)))}}function RA(e,n){Qi.m(e,n);var a=Va;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+ve(o)+'"][href="'+ve(e)+'"]',f=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=xa(e)}if(!Ln.has(f)&&(e=A({rel:"modulepreload",href:e},n),Ln.set(f,e),a.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ol(f)))return}o=a.createElement("link"),Fe(o,"link",e),de(o),a.head.appendChild(o)}}}function IA(e,n,a){Qi.S(e,n,a);var o=Va;if(o&&e){var c=an(o).hoistableStyles,f=Ma(e);n=n||"default";var v=c.get(f);if(!v){var E={loading:0,preload:null};if(v=o.querySelector(al(f)))E.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Ln.get(f))&&fd(e,a);var b=v=o.createElement("link");de(b),Fe(b,"link",e),b._p=new Promise(function(L,G){b.onload=L,b.onerror=G}),b.addEventListener("load",function(){E.loading|=1}),b.addEventListener("error",function(){E.loading|=2}),E.loading|=4,sc(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:E},c.set(f,v)}}}function CA(e,n){Qi.X(e,n);var a=Va;if(a&&e){var o=an(a).hoistableScripts,c=xa(e),f=o.get(c);f||(f=a.querySelector(ol(c)),f||(e=A({src:e,async:!0},n),(n=Ln.get(c))&&dd(e,n),f=a.createElement("script"),de(f),Fe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function DA(e,n){Qi.M(e,n);var a=Va;if(a&&e){var o=an(a).hoistableScripts,c=xa(e),f=o.get(c);f||(f=a.querySelector(ol(c)),f||(e=A({src:e,async:!0,type:"module"},n),(n=Ln.get(c))&&dd(e,n),f=a.createElement("script"),de(f),Fe(f,"link",e),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(c,f))}}function Xy(e,n,a,o){var c=(c=vt.current)?rc(c):null;if(!c)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ma(a.href),a=an(c).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ma(a.href);var f=an(c).hoistableStyles,v=f.get(e);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=c.querySelector(al(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Ln.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Ln.set(e,a),f||NA(c,e,a,v.state))),n&&o===null)throw Error(s(528,""));return v}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=xa(a),a=an(c).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ma(e){return'href="'+ve(e)+'"'}function al(e){return'link[rel="stylesheet"]['+e+"]"}function $y(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function NA(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Fe(n,"link",a),de(n),e.head.appendChild(n))}function xa(e){return'[src="'+ve(e)+'"]'}function ol(e){return"script[async]"+e}function Zy(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ve(a.href)+'"]');if(o)return n.instance=o,de(o),o;var c=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),de(o),Fe(o,"style",c),sc(o,a.precedence,e),n.instance=o;case"stylesheet":c=Ma(a.href);var f=e.querySelector(al(c));if(f)return n.state.loading|=4,n.instance=f,de(f),f;o=$y(a),(c=Ln.get(c))&&fd(o,c),f=(e.ownerDocument||e).createElement("link"),de(f);var v=f;return v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Fe(f,"link",o),n.state.loading|=4,sc(f,a.precedence,e),n.instance=f;case"script":return f=xa(a.src),(c=e.querySelector(ol(f)))?(n.instance=c,de(c),c):(o=a,(c=Ln.get(f))&&(o=A({},a),dd(o,c)),e=e.ownerDocument||e,c=e.createElement("script"),de(c),Fe(c,"link",o),e.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,sc(o,a.precedence,e));return n.instance}function sc(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,f=c,v=0;v<o.length;v++){var E=o[v];if(E.dataset.precedence===n)f=E;else if(f!==c)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function fd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function dd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var ac=null;function Jy(e,n,a){if(ac===null){var o=new Map,c=ac=new Map;c.set(a,o)}else c=ac,o=c.get(a),o||(o=new Map,c.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),c=0;c<a.length;c++){var f=a[c];if(!(f[rs]||f[Re]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(n)||"";v=e+v;var E=o.get(v);E?E.push(f):o.set(v,[f])}}return o}function Wy(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function OA(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function t_(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var ll=null;function VA(){}function MA(e,n,a){if(ll===null)throw Error(s(475));var o=ll;if(n.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var c=Ma(a.href),f=e.querySelector(al(c));if(f){e=f._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(o.count++,o=oc.bind(o),e.then(o,o)),n.state.loading|=4,n.instance=f,de(f);return}f=e.ownerDocument||e,a=$y(a),(c=Ln.get(c))&&fd(a,c),f=f.createElement("link"),de(f);var v=f;v._p=new Promise(function(E,b){v.onload=E,v.onerror=b}),Fe(f,"link",a),n.instance=f}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(o.count++,n=oc.bind(o),e.addEventListener("load",n),e.addEventListener("error",n))}}function xA(){if(ll===null)throw Error(s(475));var e=ll;return e.stylesheets&&e.count===0&&md(e,e.stylesheets),0<e.count?function(n){var a=setTimeout(function(){if(e.stylesheets&&md(e,e.stylesheets),e.unsuspend){var o=e.unsuspend;e.unsuspend=null,o()}},6e4);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(a)}}:null}function oc(){if(this.count--,this.count===0){if(this.stylesheets)md(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var lc=null;function md(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,lc=new Map,n.forEach(PA,e),lc=null,oc.call(e))}function PA(e,n){if(!(n.state.loading&4)){var a=lc.get(e);if(a)var o=a.get(null);else{a=new Map,lc.set(e,a);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<c.length;f++){var v=c[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),o=v)}o&&a.set(null,o)}c=n.instance,v=c.getAttribute("data-precedence"),f=a.get(v)||o,f===o&&a.set(null,c),a.set(v,c),this.count++,o=oc.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),f?f.parentNode.insertBefore(c,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),n.state.loading|=4}}var ul={$$typeof:ft,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function kA(e,n,a,o,c,f,v,E){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function e_(e,n,a,o,c,f,v,E,b,L,G,K){return e=new kA(e,n,a,v,E,b,L,K),n=1,f===!0&&(n|=24),f=_n(3,null,null,n),e.current=f,f.stateNode=e,n=Yh(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:a,cache:n},Jh(f),e}function n_(e){return e?(e=ha,e):ha}function i_(e,n,a,o,c,f){c=n_(c),o.context===null?o.context=c:o.pendingContext=c,o=fr(n),o.payload={element:a},f=f===void 0?null:f,f!==null&&(o.callback=f),a=dr(e,o,n),a!==null&&(Sn(a,e,n),zo(a,e,n))}function r_(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function gd(e,n){r_(e,n),(e=e.alternate)&&r_(e,n)}function s_(e){if(e.tag===13){var n=ca(e,67108864);n!==null&&Sn(n,e,67108864),gd(e,67108864)}}var uc=!0;function UA(e,n,a,o){var c=q.T;q.T=null;var f=et.p;try{et.p=2,pd(e,n,a,o)}finally{et.p=f,q.T=c}}function LA(e,n,a,o){var c=q.T;q.T=null;var f=et.p;try{et.p=8,pd(e,n,a,o)}finally{et.p=f,q.T=c}}function pd(e,n,a,o){if(uc){var c=yd(o);if(c===null)id(e,n,o,cc,a),o_(e,o);else if(jA(c,e,n,a,o))o.stopPropagation();else if(o_(e,o),n&4&&-1<zA.indexOf(e)){for(;c!==null;){var f=$n(c);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=qn(f.pendingLanes);if(v!==0){var E=f;for(E.pendingLanes|=2,E.entangledLanes|=2;v;){var b=1<<31-$e(v);E.entanglements[1]|=b,v&=~b}ci(f),(Kt&6)===0&&(Ku=Xe()+500,nl(0))}}break;case 13:E=ca(f,2),E!==null&&Sn(E,f,2),Xu(),gd(f,2)}if(f=yd(o),f===null&&id(e,n,o,cc,a),f===c)break;c=f}c!==null&&o.stopPropagation()}else id(e,n,o,null,a)}}function yd(e){return e=Dn(e),_d(e)}var cc=null;function _d(e){if(cc=null,e=bi(e),e!==null){var n=h(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=d(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return cc=e,null}function a_(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bn()){case Jr:return 2;case Hs:return 8;case Wr:case Th:return 32;case Gs:return 268435456;default:return 32}default:return 32}}var vd=!1,Rr=null,Ir=null,Cr=null,cl=new Map,hl=new Map,Dr=[],zA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function o_(e,n){switch(e){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":cl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":hl.delete(n.pointerId)}}function fl(e,n,a,o,c,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:f,targetContainers:[c]},n!==null&&(n=$n(n),n!==null&&s_(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),e)}function jA(e,n,a,o,c){switch(n){case"focusin":return Rr=fl(Rr,e,n,a,o,c),!0;case"dragenter":return Ir=fl(Ir,e,n,a,o,c),!0;case"mouseover":return Cr=fl(Cr,e,n,a,o,c),!0;case"pointerover":var f=c.pointerId;return cl.set(f,fl(cl.get(f)||null,e,n,a,o,c)),!0;case"gotpointercapture":return f=c.pointerId,hl.set(f,fl(hl.get(f)||null,e,n,a,o,c)),!0}return!1}function l_(e){var n=bi(e.target);if(n!==null){var a=h(n);if(a!==null){if(n=a.tag,n===13){if(n=d(a),n!==null){e.blockedOn=n,Xl(e.priority,function(){if(a.tag===13){var o=An();o=ir(o);var c=ca(a,o);c!==null&&Sn(c,a,o),gd(a,o)}});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=yd(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Ci=o,a.target.dispatchEvent(o),Ci=null}else return n=$n(a),n!==null&&s_(n),e.blockedOn=a,!1;n.shift()}return!0}function u_(e,n,a){hc(e)&&a.delete(n)}function BA(){vd=!1,Rr!==null&&hc(Rr)&&(Rr=null),Ir!==null&&hc(Ir)&&(Ir=null),Cr!==null&&hc(Cr)&&(Cr=null),cl.forEach(u_),hl.forEach(u_)}function fc(e,n){e.blockedOn===n&&(e.blockedOn=null,vd||(vd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,BA)))}var dc=null;function c_(e){dc!==e&&(dc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){dc===e&&(dc=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],c=e[n+2];if(typeof o!="function"){if(_d(o||a)===null)continue;break}var f=$n(a);f!==null&&(e.splice(n,3),n-=3,_f(f,{pending:!0,data:c,method:a.method,action:o},o,c))}}))}function dl(e){function n(b){return fc(b,e)}Rr!==null&&fc(Rr,e),Ir!==null&&fc(Ir,e),Cr!==null&&fc(Cr,e),cl.forEach(n),hl.forEach(n);for(var a=0;a<Dr.length;a++){var o=Dr[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Dr.length&&(a=Dr[0],a.blockedOn===null);)l_(a),a.blockedOn===null&&Dr.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var c=a[o],f=a[o+1],v=c[_e]||null;if(typeof f=="function")v||c_(a);else if(v){var E=null;if(f&&f.hasAttribute("formAction")){if(c=f,v=f[_e]||null)E=v.formAction;else if(_d(c)!==null)continue}else E=v.action;typeof E=="function"?a[o+1]=E:(a.splice(o,3),o-=3),c_(a)}}}function Ed(e){this._internalRoot=e}mc.prototype.render=Ed.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=An();i_(a,o,e,n,null,null)},mc.prototype.unmount=Ed.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;i_(e.current,2,null,e,null,null),Xu(),n[In]=null}};function mc(e){this._internalRoot=e}mc.prototype.unstable_scheduleHydration=function(e){if(e){var n=rr();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Dr.length&&n!==0&&n<Dr[a].priority;a++);Dr.splice(a,0,e),a===0&&l_(e)}};var h_=t.version;if(h_!=="19.1.1")throw Error(s(527,h_,"19.1.1"));et.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=y(n),e=e!==null?_(e):null,e=e===null?null:e.stateNode,e};var qA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{ce=gc.inject(qA),Qt=gc}catch{}}return gl.createRoot=function(e,n){if(!l(e))throw Error(s(299));var a=!1,o="",c=Ip,f=Cp,v=Dp,E=null;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(E=n.unstable_transitionCallbacks)),n=e_(e,1,!1,null,null,a,o,c,f,v,E,null),e[In]=n.current,nd(e),new Ed(n)},gl.hydrateRoot=function(e,n,a){if(!l(e))throw Error(s(299));var o=!1,c="",f=Ip,v=Cp,E=Dp,b=null,L=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(E=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(b=a.unstable_transitionCallbacks),a.formState!==void 0&&(L=a.formState)),n=e_(e,1,!0,n,a??null,o,c,f,v,E,b,L),n.context=n_(null),a=n.current,o=An(),o=ir(o),c=fr(o),c.callback=null,dr(a,c,o),a=o,n.current.lanes=a,Si(n,a),ci(n),e[In]=n.current,nd(e),new mc(n)},gl.version="19.1.1",gl}var T_;function JA(){if(T_)return Sd.exports;T_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(t){console.error(t)}}return r(),Sd.exports=ZA(),Sd.exports}var WA=JA();const tS=()=>{};var A_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=function(r){const t=[];let i=0;for(let s=0;s<r.length;s++){let l=r.charCodeAt(s);l<128?t[i++]=l:l<2048?(t[i++]=l>>6|192,t[i++]=l&63|128):(l&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++s)&1023),t[i++]=l>>18|240,t[i++]=l>>12&63|128,t[i++]=l>>6&63|128,t[i++]=l&63|128):(t[i++]=l>>12|224,t[i++]=l>>6&63|128,t[i++]=l&63|128)}return t},eS=function(r){const t=[];let i=0,s=0;for(;i<r.length;){const l=r[i++];if(l<128)t[s++]=String.fromCharCode(l);else if(l>191&&l<224){const h=r[i++];t[s++]=String.fromCharCode((l&31)<<6|h&63)}else if(l>239&&l<365){const h=r[i++],d=r[i++],g=r[i++],y=((l&7)<<18|(h&63)<<12|(d&63)<<6|g&63)-65536;t[s++]=String.fromCharCode(55296+(y>>10)),t[s++]=String.fromCharCode(56320+(y&1023))}else{const h=r[i++],d=r[i++];t[s++]=String.fromCharCode((l&15)<<12|(h&63)<<6|d&63)}}return t.join("")},Zv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,t){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let l=0;l<r.length;l+=3){const h=r[l],d=l+1<r.length,g=d?r[l+1]:0,y=l+2<r.length,_=y?r[l+2]:0,A=h>>2,D=(h&3)<<4|g>>4;let I=(g&15)<<2|_>>6,H=_&63;y||(H=64,d||(I=64)),s.push(i[A],i[D],i[I],i[H])}return s.join("")},encodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(r):this.encodeByteArray($v(r),t)},decodeString(r,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(r):eS(this.decodeStringToByteArray(r,t))},decodeStringToByteArray(r,t){this.init_();const i=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let l=0;l<r.length;){const h=i[r.charAt(l++)],g=l<r.length?i[r.charAt(l)]:0;++l;const _=l<r.length?i[r.charAt(l)]:64;++l;const D=l<r.length?i[r.charAt(l)]:64;if(++l,h==null||g==null||_==null||D==null)throw new nS;const I=h<<2|g>>4;if(s.push(I),_!==64){const H=g<<4&240|_>>2;if(s.push(H),D!==64){const Z=_<<6&192|D;s.push(Z)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class nS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const iS=function(r){const t=$v(r);return Zv.encodeByteArray(t,!0)},xc=function(r){return iS(r).replace(/\./g,"")},Jv=function(r){try{return Zv.decodeString(r,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=()=>rS().__FIREBASE_DEFAULTS__,aS=()=>{if(typeof process>"u"||typeof A_>"u")return;const r=A_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},oS=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=r&&Jv(r[1]);return t&&JSON.parse(t)},th=()=>{try{return tS()||sS()||aS()||oS()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Wv=r=>th()?.emulatorHosts?.[r],lS=r=>{const t=Wv(r);if(!t)return;const i=t.lastIndexOf(":");if(i<=0||i+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(i+1),10);return t[0]==="["?[t.substring(1,i-1),s]:[t.substring(0,i),s]},t0=()=>th()?.config,e0=r=>th()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}wrapCallback(t){return(i,s)=>{i?this.reject(i):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(i):t(i,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function n0(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cS(r,t){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},s=t||"demo-project",l=r.iat||0,h=r.sub||r.user_id;if(!h)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:l,exp:l+3600,auth_time:l,sub:h,user_id:h,firebase:{sign_in_provider:"custom",identities:{}},...r};return[xc(JSON.stringify(i)),xc(JSON.stringify(d)),""].join(".")}const Tl={};function hS(){const r={prod:[],emulator:[]};for(const t of Object.keys(Tl))Tl[t]?r.emulator.push(t):r.prod.push(t);return r}function fS(r){let t=document.getElementById(r),i=!1;return t||(t=document.createElement("div"),t.setAttribute("id",r),i=!0),{created:i,element:t}}let S_=!1;function i0(r,t){if(typeof window>"u"||typeof document>"u"||!to(window.location.host)||Tl[r]===t||Tl[r]||S_)return;Tl[r]=t;function i(I){return`__firebase__banner__${I}`}const s="__firebase__banner",h=hS().prod.length>0;function d(){const I=document.getElementById(s);I&&I.remove()}function g(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function y(I,H){I.setAttribute("width","24"),I.setAttribute("id",H),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function _(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{S_=!0,d()},I}function A(I,H){I.setAttribute("id",H),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function D(){const I=fS(s),H=i("text"),Z=document.getElementById(H)||document.createElement("span"),rt=i("learnmore"),J=document.getElementById(rt)||document.createElement("a"),gt=i("preprendIcon"),dt=document.getElementById(gt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ft=I.element;g(ft),A(J,rt);const qt=_();y(dt,gt),ft.append(dt,Z,J,qt),document.body.appendChild(ft)}h?(Z.innerText="Preview backend disconnected.",dt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(dt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Z.innerText="Preview backend running in this workspace."),Z.setAttribute("id",H)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",D):D()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nn())}function mS(){const r=th()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pS(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function yS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _S(){const r=nn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function vS(){return!mS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ES(){try{return typeof indexedDB=="object"}catch{return!1}}function TS(){return new Promise((r,t)=>{try{let i=!0;const s="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(s);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(s),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{t(l.error?.message||"")}}catch(i){t(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="FirebaseError";class nr extends Error{constructor(t,i,s){super(i),this.code=t,this.customData=s,this.name=AS,Object.setPrototypeOf(this,nr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pl.prototype.create)}}class Pl{constructor(t,i,s){this.service=t,this.serviceName=i,this.errors=s}create(t,...i){const s=i[0]||{},l=`${this.service}/${t}`,h=this.errors[t],d=h?SS(h,s):"Error",g=`${this.serviceName}: ${d} (${l}).`;return new nr(l,g,s)}}function SS(r,t){return r.replace(bS,(i,s)=>{const l=t[s];return l!=null?String(l):`<${s}?>`})}const bS=/\{\$([^}]+)}/g;function wS(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}function ks(r,t){if(r===t)return!0;const i=Object.keys(r),s=Object.keys(t);for(const l of i){if(!s.includes(l))return!1;const h=r[l],d=t[l];if(b_(h)&&b_(d)){if(!ks(h,d))return!1}else if(h!==d)return!1}for(const l of s)if(!i.includes(l))return!1;return!0}function b_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kl(r){const t=[];for(const[i,s]of Object.entries(r))Array.isArray(s)?s.forEach(l=>{t.push(encodeURIComponent(i)+"="+encodeURIComponent(l))}):t.push(encodeURIComponent(i)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function RS(r,t){const i=new IS(r,t);return i.subscribe.bind(i)}class IS{constructor(t,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(i=>{i.next(t)})}error(t){this.forEachObserver(i=>{i.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,i,s){let l;if(t===void 0&&i===void 0&&s===void 0)throw new Error("Missing Observer.");CS(t,["next","error","complete"])?l=t:l={next:t,error:i,complete:s},l.next===void 0&&(l.next=Id),l.error===void 0&&(l.error=Id),l.complete===void 0&&(l.complete=Id);const h=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?l.error(this.finalError):l.complete()}catch{}}),this.observers.push(l),h}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,t)}sendOne(t,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{i(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CS(r,t){if(typeof r!="object"||r===null)return!1;for(const i of t)if(i in r&&typeof r[i]=="function")return!0;return!1}function Id(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(r){return r&&r._delegate?r._delegate:r}class Us{constructor(t,i,s){this.name=t,this.instanceFactory=i,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(t,i){this.name=t,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const i=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(i)){const s=new uS;if(this.instancesDeferred.set(i,s),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&s.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(t){const i=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(OS(t))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[i,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const h=this.getOrInitializeService({instanceIdentifier:l});s.resolve(h)}catch{}}}}clearInstance(t=Ms){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...t.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ms){return this.instances.has(t)}getOptions(t=Ms){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:i={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:s,options:i});for(const[h,d]of this.instancesDeferred.entries()){const g=this.normalizeInstanceIdentifier(h);s===g&&d.resolve(l)}return l}onInit(t,i){const s=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(s)??new Set;l.add(t),this.onInitCallbacks.set(s,l);const h=this.instances.get(s);return h&&t(h,s),()=>{l.delete(t)}}invokeOnInitCallbacks(t,i){const s=this.onInitCallbacks.get(i);if(s)for(const l of s)try{l(t,i)}catch{}}getOrInitializeService({instanceIdentifier:t,options:i={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:NS(t),options:i}),this.instances.set(t,s),this.instancesOptions.set(t,i),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ms){return this.component?this.component.multipleInstances?t:Ms:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NS(r){return r===Ms?void 0:r}function OS(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const i=this.getProvider(t.name);if(i.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);i.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const i=new DS(t,this);return this.providers.set(t,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Mt||(Mt={}));const MS={debug:Mt.DEBUG,verbose:Mt.VERBOSE,info:Mt.INFO,warn:Mt.WARN,error:Mt.ERROR,silent:Mt.SILENT},xS=Mt.INFO,PS={[Mt.DEBUG]:"log",[Mt.VERBOSE]:"log",[Mt.INFO]:"info",[Mt.WARN]:"warn",[Mt.ERROR]:"error"},kS=(r,t,...i)=>{if(t<r.logLevel)return;const s=new Date().toISOString(),l=PS[t];if(l)console[l](`[${s}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class gm{constructor(t){this.name=t,this._logLevel=xS,this._logHandler=kS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?MS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Mt.DEBUG,...t),this._logHandler(this,Mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Mt.VERBOSE,...t),this._logHandler(this,Mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Mt.INFO,...t),this._logHandler(this,Mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Mt.WARN,...t),this._logHandler(this,Mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Mt.ERROR,...t),this._logHandler(this,Mt.ERROR,...t)}}const US=(r,t)=>t.some(i=>r instanceof i);let w_,R_;function LS(){return w_||(w_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zS(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const r0=new WeakMap,qd=new WeakMap,s0=new WeakMap,Cd=new WeakMap,pm=new WeakMap;function jS(r){const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("success",h),r.removeEventListener("error",d)},h=()=>{i(Lr(r.result)),l()},d=()=>{s(r.error),l()};r.addEventListener("success",h),r.addEventListener("error",d)});return t.then(i=>{i instanceof IDBCursor&&r0.set(i,r)}).catch(()=>{}),pm.set(t,r),t}function BS(r){if(qd.has(r))return;const t=new Promise((i,s)=>{const l=()=>{r.removeEventListener("complete",h),r.removeEventListener("error",d),r.removeEventListener("abort",d)},h=()=>{i(),l()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",h),r.addEventListener("error",d),r.addEventListener("abort",d)});qd.set(r,t)}let Hd={get(r,t,i){if(r instanceof IDBTransaction){if(t==="done")return qd.get(r);if(t==="objectStoreNames")return r.objectStoreNames||s0.get(r);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Lr(r[t])},set(r,t,i){return r[t]=i,!0},has(r,t){return r instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in r}};function qS(r){Hd=r(Hd)}function HS(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...i){const s=r.call(Dd(this),t,...i);return s0.set(s,t.sort?t.sort():[t]),Lr(s)}:zS().includes(r)?function(...t){return r.apply(Dd(this),t),Lr(r0.get(this))}:function(...t){return Lr(r.apply(Dd(this),t))}}function GS(r){return typeof r=="function"?HS(r):(r instanceof IDBTransaction&&BS(r),US(r,LS())?new Proxy(r,Hd):r)}function Lr(r){if(r instanceof IDBRequest)return jS(r);if(Cd.has(r))return Cd.get(r);const t=GS(r);return t!==r&&(Cd.set(r,t),pm.set(t,r)),t}const Dd=r=>pm.get(r);function FS(r,t,{blocked:i,upgrade:s,blocking:l,terminated:h}={}){const d=indexedDB.open(r,t),g=Lr(d);return s&&d.addEventListener("upgradeneeded",y=>{s(Lr(d.result),y.oldVersion,y.newVersion,Lr(d.transaction),y)}),i&&d.addEventListener("blocked",y=>i(y.oldVersion,y.newVersion,y)),g.then(y=>{h&&y.addEventListener("close",()=>h()),l&&y.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),g}const QS=["get","getKey","getAll","getAllKeys","count"],KS=["put","add","delete","clear"],Nd=new Map;function I_(r,t){if(!(r instanceof IDBDatabase&&!(t in r)&&typeof t=="string"))return;if(Nd.get(t))return Nd.get(t);const i=t.replace(/FromIndex$/,""),s=t!==i,l=KS.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(l||QS.includes(i)))return;const h=async function(d,...g){const y=this.transaction(d,l?"readwrite":"readonly");let _=y.store;return s&&(_=_.index(g.shift())),(await Promise.all([_[i](...g),l&&y.done]))[0]};return Nd.set(t,h),h}qS(r=>({...r,get:(t,i,s)=>I_(t,i)||r.get(t,i,s),has:(t,i)=>!!I_(t,i)||r.has(t,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(XS(i)){const s=i.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(i=>i).join(" ")}}function XS(r){return r.getComponent()?.type==="VERSION"}const Gd="@firebase/app",C_="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i=new gm("@firebase/app"),$S="@firebase/app-compat",ZS="@firebase/analytics-compat",JS="@firebase/analytics",WS="@firebase/app-check-compat",t1="@firebase/app-check",e1="@firebase/auth",n1="@firebase/auth-compat",i1="@firebase/database",r1="@firebase/data-connect",s1="@firebase/database-compat",a1="@firebase/functions",o1="@firebase/functions-compat",l1="@firebase/installations",u1="@firebase/installations-compat",c1="@firebase/messaging",h1="@firebase/messaging-compat",f1="@firebase/performance",d1="@firebase/performance-compat",m1="@firebase/remote-config",g1="@firebase/remote-config-compat",p1="@firebase/storage",y1="@firebase/storage-compat",_1="@firebase/firestore",v1="@firebase/ai",E1="@firebase/firestore-compat",T1="firebase",A1="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="[DEFAULT]",S1={[Gd]:"fire-core",[$S]:"fire-core-compat",[JS]:"fire-analytics",[ZS]:"fire-analytics-compat",[t1]:"fire-app-check",[WS]:"fire-app-check-compat",[e1]:"fire-auth",[n1]:"fire-auth-compat",[i1]:"fire-rtdb",[r1]:"fire-data-connect",[s1]:"fire-rtdb-compat",[a1]:"fire-fn",[o1]:"fire-fn-compat",[l1]:"fire-iid",[u1]:"fire-iid-compat",[c1]:"fire-fcm",[h1]:"fire-fcm-compat",[f1]:"fire-perf",[d1]:"fire-perf-compat",[m1]:"fire-rc",[g1]:"fire-rc-compat",[p1]:"fire-gcs",[y1]:"fire-gcs-compat",[_1]:"fire-fst",[E1]:"fire-fst-compat",[v1]:"fire-vertex","fire-js":"fire-js",[T1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Map,b1=new Map,Qd=new Map;function D_(r,t){try{r.container.addComponent(t)}catch(i){$i.debug(`Component ${t.name} failed to register with FirebaseApp ${r.name}`,i)}}function Qa(r){const t=r.name;if(Qd.has(t))return $i.debug(`There were multiple attempts to register component ${t}.`),!1;Qd.set(t,r);for(const i of Pc.values())D_(i,r);for(const i of b1.values())D_(i,r);return!0}function ym(r,t){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(t)}function zn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new Pl("app","Firebase",w1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(t,i,s){this._isDeleted=!1,this._options={...t},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=A1;function a0(r,t={}){let i=r;typeof t!="object"&&(t={name:t});const s={name:Fd,automaticDataCollectionEnabled:!0,...t},l=s.name;if(typeof l!="string"||!l)throw zr.create("bad-app-name",{appName:String(l)});if(i||(i=t0()),!i)throw zr.create("no-options");const h=Pc.get(l);if(h){if(ks(i,h.options)&&ks(s,h.config))return h;throw zr.create("duplicate-app",{appName:l})}const d=new VS(l);for(const y of Qd.values())d.addComponent(y);const g=new R1(i,s,d);return Pc.set(l,g),g}function o0(r=Fd){const t=Pc.get(r);if(!t&&r===Fd&&t0())return a0();if(!t)throw zr.create("no-app",{appName:r});return t}function jr(r,t,i){let s=S1[r]??r;i&&(s+=`-${i}`);const l=s.match(/\s|\//),h=t.match(/\s|\//);if(l||h){const d=[`Unable to register library "${s}" with version "${t}":`];l&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${t}" contains illegal characters (whitespace or "/")`),$i.warn(d.join(" "));return}Qa(new Us(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="firebase-heartbeat-database",C1=1,Il="firebase-heartbeat-store";let Od=null;function l0(){return Od||(Od=FS(I1,C1,{upgrade:(r,t)=>{switch(t){case 0:try{r.createObjectStore(Il)}catch(i){console.warn(i)}}}}).catch(r=>{throw zr.create("idb-open",{originalErrorMessage:r.message})})),Od}async function D1(r){try{const i=(await l0()).transaction(Il),s=await i.objectStore(Il).get(u0(r));return await i.done,s}catch(t){if(t instanceof nr)$i.warn(t.message);else{const i=zr.create("idb-get",{originalErrorMessage:t?.message});$i.warn(i.message)}}}async function N_(r,t){try{const s=(await l0()).transaction(Il,"readwrite");await s.objectStore(Il).put(t,u0(r)),await s.done}catch(i){if(i instanceof nr)$i.warn(i.message);else{const s=zr.create("idb-set",{originalErrorMessage:i?.message});$i.warn(s.message)}}}function u0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=1024,O1=30;class V1{constructor(t){this.container=t,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new x1(i),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=O_();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(l=>l.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>O1){const l=P1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){$i.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=O_(),{heartbeatsToSend:i,unsentEntries:s}=M1(this._heartbeatsCache.heartbeats),l=xc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return $i.warn(t),""}}}function O_(){return new Date().toISOString().substring(0,10)}function M1(r,t=N1){const i=[];let s=r.slice();for(const l of r){const h=i.find(d=>d.agent===l.agent);if(h){if(h.dates.push(l.date),V_(i)>t){h.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),V_(i)>t){i.pop();break}s=s.slice(1)}return{heartbeatsToSend:i,unsentEntries:s}}class x1{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ES()?TS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await D1(this.app);return i?.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return N_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return N_(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function V_(r){return xc(JSON.stringify({version:2,heartbeats:r})).length}function P1(r){if(r.length===0)return-1;let t=0,i=r[0].date;for(let s=1;s<r.length;s++)r[s].date<i&&(i=r[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(r){Qa(new Us("platform-logger",t=>new YS(t),"PRIVATE")),Qa(new Us("heartbeat",t=>new V1(t),"PRIVATE")),jr(Gd,C_,r),jr(Gd,C_,"esm2020"),jr("fire-js","")}k1("");var U1="firebase",L1="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr(U1,L1,"app");function c0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const z1=c0,h0=new Pl("auth","Firebase",c0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new gm("@firebase/auth");function j1(r,...t){kc.logLevel<=Mt.WARN&&kc.warn(`Auth (${eo}): ${r}`,...t)}function bc(r,...t){kc.logLevel<=Mt.ERROR&&kc.error(`Auth (${eo}): ${r}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(r,...t){throw _m(r,...t)}function fi(r,...t){return _m(r,...t)}function f0(r,t,i){const s={...z1(),[t]:i};return new Pl("auth","Firebase",s).create(t,{appName:r.name})}function Xi(r){return f0(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _m(r,...t){if(typeof r!="string"){const i=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(i,...s)}return h0.create(r,...t)}function Tt(r,t,...i){if(!r)throw _m(t,...i)}function Ki(r){const t="INTERNAL ASSERTION FAILED: "+r;throw bc(t),new Error(t)}function Ji(r,t){r||Ki(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(){return typeof self<"u"&&self.location?.href||""}function B1(){return M_()==="http:"||M_()==="https:"}function M_(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B1()||pS()||"connection"in navigator)?navigator.onLine:!0}function H1(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(t,i){this.shortDelay=t,this.longDelay=i,Ji(i>t,"Short delay should be less than long delay!"),this.isMobile=dS()||yS()}get(){return q1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(r,t){Ji(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return t?`${i}${t.startsWith("/")?t.slice(1):t}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{static initialize(t,i,s){this.fetchImpl=t,i&&(this.headersImpl=i),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Q1=new Ul(3e4,6e4);function Ll(r,t){return r.tenantId&&!t.tenantId?{...t,tenantId:r.tenantId}:t}async function no(r,t,i,s,l={}){return m0(r,l,async()=>{let h={},d={};s&&(t==="GET"?d=s:h={body:JSON.stringify(s)});const g=kl({key:r.config.apiKey,...d}).slice(1),y=await r._getAdditionalHeaders();y["Content-Type"]="application/json",r.languageCode&&(y["X-Firebase-Locale"]=r.languageCode);const _={method:t,headers:y,...h};return gS()||(_.referrerPolicy="no-referrer"),r.emulatorConfig&&to(r.emulatorConfig.host)&&(_.credentials="include"),d0.fetch()(await g0(r,r.config.apiHost,i,g),_)})}async function m0(r,t,i){r._canInitEmulator=!1;const s={...G1,...t};try{const l=new K1(r),h=await Promise.race([i(),l.promise]);l.clearNetworkTimeout();const d=await h.json();if("needConfirmation"in d)throw pc(r,"account-exists-with-different-credential",d);if(h.ok&&!("errorMessage"in d))return d;{const g=h.ok?d.errorMessage:d.error.message,[y,_]=g.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(r,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw pc(r,"email-already-in-use",d);if(y==="USER_DISABLED")throw pc(r,"user-disabled",d);const A=s[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(_)throw f0(r,A,_);Zi(r,A)}}catch(l){if(l instanceof nr)throw l;Zi(r,"network-request-failed",{message:String(l)})}}async function Em(r,t,i,s,l={}){const h=await no(r,t,i,s,l);return"mfaPendingCredential"in h&&Zi(r,"multi-factor-auth-required",{_serverResponse:h}),h}async function g0(r,t,i,s){const l=`${t}${i}?${s}`,h=r,d=h.config.emulator?vm(r.config,l):`${r.config.apiScheme}://${l}`;return F1.includes(i)&&(await h._persistenceManagerAvailable,h._getPersistenceType()==="COOKIE")?h._getPersistence()._getFinalTarget(d).toString():d}class K1{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((i,s)=>{this.timer=setTimeout(()=>s(fi(this.auth,"network-request-failed")),Q1.get())})}}function pc(r,t,i){const s={appName:r.name};i.email&&(s.email=i.email),i.phoneNumber&&(s.phoneNumber=i.phoneNumber);const l=fi(r,t,s);return l.customData._tokenResponse=i,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y1(r,t){return no(r,"POST","/v1/accounts:delete",t)}async function Uc(r,t){return no(r,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(r){if(r)try{const t=new Date(Number(r));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function X1(r,t=!1){const i=rn(r),s=await i.getIdToken(t),l=Tm(s);Tt(l&&l.exp&&l.auth_time&&l.iat,i.auth,"internal-error");const h=typeof l.firebase=="object"?l.firebase:void 0,d=h?.sign_in_provider;return{claims:l,token:s,authTime:Al(Vd(l.auth_time)),issuedAtTime:Al(Vd(l.iat)),expirationTime:Al(Vd(l.exp)),signInProvider:d||null,signInSecondFactor:h?.sign_in_second_factor||null}}function Vd(r){return Number(r)*1e3}function Tm(r){const[t,i,s]=r.split(".");if(t===void 0||i===void 0||s===void 0)return bc("JWT malformed, contained fewer than 3 sections"),null;try{const l=Jv(i);return l?JSON.parse(l):(bc("Failed to decode base64 JWT payload"),null)}catch(l){return bc("Caught error parsing JWT payload as JSON",l?.toString()),null}}function x_(r){const t=Tm(r);return Tt(t,"internal-error"),Tt(typeof t.exp<"u","internal-error"),Tt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(r,t,i=!1){if(i)return t;try{return await t}catch(s){throw s instanceof nr&&$1(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function $1({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const i=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,i){this.createdAt=t,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=Al(this.lastLoginAt),this.creationTime=Al(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(r){const t=r.auth,i=await r.getIdToken(),s=await Cl(r,Uc(t,{idToken:i}));Tt(s?.users.length,t,"internal-error");const l=s.users[0];r._notifyReloadListener(l);const h=l.providerUserInfo?.length?p0(l.providerUserInfo):[],d=W1(r.providerData,h),g=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!d?.length,_=g?y:!1,A={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Yd(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(r,A)}async function J1(r){const t=rn(r);await Lc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function W1(r,t){return[...r.filter(s=>!t.some(l=>l.providerId===s.providerId)),...t]}function p0(r){return r.map(({providerId:t,...i})=>({providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(r,t){const i=await m0(r,{},async()=>{const s=kl({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:h}=r.config,d=await g0(r,l,"/v1/token",`key=${h}`),g=await r._getAdditionalHeaders();g["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:g,body:s};return r.emulatorConfig&&to(r.emulatorConfig.host)&&(y.credentials="include"),d0.fetch()(d,y)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function eb(r,t){return no(r,"POST","/v2/accounts:revokeToken",Ll(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Tt(t.idToken,"internal-error"),Tt(typeof t.idToken<"u","internal-error"),Tt(typeof t.refreshToken<"u","internal-error");const i="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):x_(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,i)}updateFromIdToken(t){Tt(t.length!==0,"internal-error");const i=x_(t);this.updateTokensAndExpiration(t,null,i)}async getToken(t,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,i){const{accessToken:s,refreshToken:l,expiresIn:h}=await tb(t,i);this.updateTokensAndExpiration(s,l,Number(h))}updateTokensAndExpiration(t,i,s){this.refreshToken=i||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,i){const{refreshToken:s,accessToken:l,expirationTime:h}=i,d=new Ba;return s&&(Tt(typeof s=="string","internal-error",{appName:t}),d.refreshToken=s),l&&(Tt(typeof l=="string","internal-error",{appName:t}),d.accessToken=l),h&&(Tt(typeof h=="number","internal-error",{appName:t}),d.expirationTime=h),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ba,this.toJSON())}_performRefresh(){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(r,t){Tt(typeof r=="string"||typeof r>"u","internal-error",{appName:t})}class Yn{constructor({uid:t,auth:i,stsTokenManager:s,...l}){this.providerId="firebase",this.proactiveRefresh=new Z1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Yd(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(t){const i=await Cl(this,this.stsTokenManager.getToken(this.auth,t));return Tt(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(t){return X1(this,t)}reload(){return J1(this)}_assign(t){this!==t&&(Tt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(i=>({...i})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const i=new Yn({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(t){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,i=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),i&&await Lc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Xi(this.auth));const t=await this.getIdToken();return await Cl(this,Y1(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,i){const s=i.displayName??void 0,l=i.email??void 0,h=i.phoneNumber??void 0,d=i.photoURL??void 0,g=i.tenantId??void 0,y=i._redirectEventId??void 0,_=i.createdAt??void 0,A=i.lastLoginAt??void 0,{uid:D,emailVerified:I,isAnonymous:H,providerData:Z,stsTokenManager:rt}=i;Tt(D&&rt,t,"internal-error");const J=Ba.fromJSON(this.name,rt);Tt(typeof D=="string",t,"internal-error"),Or(s,t.name),Or(l,t.name),Tt(typeof I=="boolean",t,"internal-error"),Tt(typeof H=="boolean",t,"internal-error"),Or(h,t.name),Or(d,t.name),Or(g,t.name),Or(y,t.name),Or(_,t.name),Or(A,t.name);const gt=new Yn({uid:D,auth:t,email:l,emailVerified:I,displayName:s,isAnonymous:H,photoURL:d,phoneNumber:h,tenantId:g,stsTokenManager:J,createdAt:_,lastLoginAt:A});return Z&&Array.isArray(Z)&&(gt.providerData=Z.map(dt=>({...dt}))),y&&(gt._redirectEventId=y),gt}static async _fromIdTokenResponse(t,i,s=!1){const l=new Ba;l.updateFromServerResponse(i);const h=new Yn({uid:i.localId,auth:t,stsTokenManager:l,isAnonymous:s});return await Lc(h),h}static async _fromGetAccountInfoResponse(t,i,s){const l=i.users[0];Tt(l.localId!==void 0,"internal-error");const h=l.providerUserInfo!==void 0?p0(l.providerUserInfo):[],d=!(l.email&&l.passwordHash)&&!h?.length,g=new Ba;g.updateFromIdToken(s);const y=new Yn({uid:l.localId,auth:t,stsTokenManager:g,isAnonymous:d}),_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:h,metadata:new Yd(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!h?.length};return Object.assign(y,_),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new Map;function Yi(r){Ji(r instanceof Function,"Expected a class definition");let t=P_.get(r);return t?(Ji(t instanceof r,"Instance stored in cache mismatched with class"),t):(t=new r,P_.set(r,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,i){this.storage[t]=i}async _get(t){const i=this.storage[t];return i===void 0?null:i}async _remove(t){delete this.storage[t]}_addListener(t,i){}_removeListener(t,i){}}y0.type="NONE";const k_=y0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(r,t,i){return`firebase:${r}:${t}:${i}`}class qa{constructor(t,i,s){this.persistence=t,this.auth=i,this.userKey=s;const{config:l,name:h}=this.auth;this.fullUserKey=wc(this.userKey,l.apiKey,h),this.fullPersistenceKey=wc("persistence",l.apiKey,h),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const i=await Uc(this.auth,{idToken:t}).catch(()=>{});return i?Yn._fromGetAccountInfoResponse(this.auth,i,t):null}return Yn._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,i,s="authUser"){if(!i.length)return new qa(Yi(k_),t,s);const l=(await Promise.all(i.map(async _=>{if(await _._isAvailable())return _}))).filter(_=>_);let h=l[0]||Yi(k_);const d=wc(s,t.config.apiKey,t.name);let g=null;for(const _ of i)try{const A=await _._get(d);if(A){let D;if(typeof A=="string"){const I=await Uc(t,{idToken:A}).catch(()=>{});if(!I)break;D=await Yn._fromGetAccountInfoResponse(t,I,A)}else D=Yn._fromJSON(t,A);_!==h&&(g=D),h=_;break}}catch{}const y=l.filter(_=>_._shouldAllowMigration);return!h._shouldAllowMigration||!y.length?new qa(h,t,s):(h=y[0],g&&await h._set(d,g.toJSON()),await Promise.all(i.map(async _=>{if(_!==h)try{await _._remove(d)}catch{}})),new qa(h,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(r){const t=r.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(T0(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(_0(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(S0(t))return"Blackberry";if(b0(t))return"Webos";if(v0(t))return"Safari";if((t.includes("chrome/")||E0(t))&&!t.includes("edge/"))return"Chrome";if(A0(t))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(i);if(s?.length===2)return s[1]}return"Other"}function _0(r=nn()){return/firefox\//i.test(r)}function v0(r=nn()){const t=r.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function E0(r=nn()){return/crios\//i.test(r)}function T0(r=nn()){return/iemobile/i.test(r)}function A0(r=nn()){return/android/i.test(r)}function S0(r=nn()){return/blackberry/i.test(r)}function b0(r=nn()){return/webos/i.test(r)}function Am(r=nn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function nb(r=nn()){return Am(r)&&!!window.navigator?.standalone}function ib(){return _S()&&document.documentMode===10}function w0(r=nn()){return Am(r)||A0(r)||b0(r)||S0(r)||/windows phone/i.test(r)||T0(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(r,t=[]){let i;switch(r){case"Browser":i=U_(nn());break;case"Worker":i=`${U_(nn())}-${r}`;break;default:i=r}const s=t.length?t.join(","):"FirebaseCore-web";return`${i}/JsCore/${eo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,i){const s=h=>new Promise((d,g)=>{try{const y=t(h);d(y)}catch(y){g(y)}});s.onAbort=i,this.queue.push(s);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const i=[];try{for(const s of this.queue)await s(t),s.onAbort&&i.push(s.onAbort)}catch(s){i.reverse();for(const l of i)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(r,t={}){return no(r,"GET","/v2/passwordPolicy",Ll(r,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=6;class ob{constructor(t){const i=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??ab,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,i),this.validatePasswordCharacterOptions(t,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(t,i){const s=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;s&&(i.meetsMinPasswordLength=t.length>=s),l&&(i.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let s;for(let l=0;l<t.length;l++)s=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(i,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,i,s,l,h){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(t,i,s,l){this.app=t,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=s,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new L_(this),this.idTokenSubscription=new L_(this),this.beforeStateQueue=new rb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion,this._persistenceManagerAvailable=new Promise(h=>this._resolvePersistenceManagerAvailable=h)}_initializeWithPersistence(t,i){return i&&(this._popupRedirectResolver=Yi(i)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await qa.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const i=await Uc(this,{idToken:t}),s=await Yn._fromGetAccountInfoResponse(this,i,t);await this.directlySetCurrentUser(s)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(zn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,l=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=this.redirectUser?._redirectEventId,d=s?._redirectEventId,g=await this.tryRedirectSignIn(t);(!h||h===d)&&g?.user&&(s=g.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(h){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(t){try{await Lc(t)}catch(i){if(i?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=H1()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zn(this.app))return Promise.reject(Xi(this));const i=t?rn(t):null;return i&&Tt(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(t,i=!1){if(!this._deleted)return t&&Tt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zn(this.app)?Promise.reject(Xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yi(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await sb(this),i=new ob(t);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Pl("auth","Firebase",t())}onAuthStateChanged(t,i,s){return this.registerStateListener(this.authStateSubscription,t,i,s)}beforeAuthStateChanged(t,i){return this.beforeStateQueue.pushCallback(t,i)}onIdTokenChanged(t,i,s){return this.registerStateListener(this.idTokenSubscription,t,i,s)}authStateReady(){return new Promise((t,i)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},i)}})}async revokeAccessToken(t){if(this.currentUser){const i=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:i};this.tenantId!=null&&(s.tenantId=this.tenantId),await eb(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,i){const s=await this.getOrInitRedirectPersistenceManager(i);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const i=t&&Yi(t)||this._popupRedirectResolver;Tt(i,this,"argument-error"),this.redirectPersistenceManager=await qa.create(this,[Yi(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,i,s,l){if(this._deleted)return()=>{};const h=typeof i=="function"?i:i.next.bind(i);let d=!1;const g=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(g,this,"internal-error"),g.then(()=>{d||h(this.currentUser)}),typeof i=="function"){const y=t.addObserver(i,s,l);return()=>{d=!0,y()}}else{const y=t.addObserver(i);return()=>{d=!0,y()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=R0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&j1(`Error while retrieving App Check token: ${t.error}`),t?.token}}function zl(r){return rn(r)}class L_{constructor(t){this.auth=t,this.observer=null,this.addObserver=RS(i=>this.observer=i)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ub(r){Sm=r}function cb(r){return Sm.loadJS(r)}function hb(){return Sm.gapiScript}function fb(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(r,t){const i=ym(r,"auth");if(i.isInitialized()){const l=i.getImmediate(),h=i.getOptions();if(ks(h,t??{}))return l;Zi(l,"already-initialized")}return i.initialize({options:t})}function mb(r,t){const i=t?.persistence||[],s=(Array.isArray(i)?i:[i]).map(Yi);t?.errorMap&&r._updateErrorMap(t.errorMap),r._initializeWithPersistence(s,t?.popupRedirectResolver)}function gb(r,t,i){const s=zl(r);Tt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const l=!1,h=I0(t),{host:d,port:g}=pb(t),y=g===null?"":`:${g}`,_={url:`${h}//${d}${y}/`},A=Object.freeze({host:d,port:g,protocol:h.replace(":",""),options:Object.freeze({disableWarnings:l})});if(!s._canInitEmulator){Tt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Tt(ks(_,s.config.emulator)&&ks(A,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=_,s.emulatorConfig=A,s.settings.appVerificationDisabledForTesting=!0,to(d)?(n0(`${h}//${d}${y}`),i0("Auth",!0)):yb()}function I0(r){const t=r.indexOf(":");return t<0?"":r.substr(0,t+1)}function pb(r){const t=I0(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(t.length));if(!i)return{host:"",port:null};const s=i[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(s);if(l){const h=l[1];return{host:h,port:z_(s.substr(h.length+1))}}else{const[h,d]=s.split(":");return{host:h,port:z_(d)}}}function z_(r){if(!r)return null;const t=Number(r);return isNaN(t)?null:t}function yb(){function r(){const t=document.createElement("p"),i=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,i){this.providerId=t,this.signInMethod=i}toJSON(){return Ki("not implemented")}_getIdTokenResponse(t){return Ki("not implemented")}_linkToIdToken(t,i){return Ki("not implemented")}_getReauthenticationResolver(t){return Ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(r,t){return Em(r,"POST","/v1/accounts:signInWithIdp",Ll(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="http://localhost";class Ls extends C0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const i=new Ls(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(i.idToken=t.idToken),t.accessToken&&(i.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(i.nonce=t.nonce),t.pendingToken&&(i.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(i.accessToken=t.oauthToken,i.secret=t.oauthTokenSecret):Zi("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const i=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:l,...h}=i;if(!s||!l)return null;const d=new Ls(s,l);return d.idToken=h.idToken||void 0,d.accessToken=h.accessToken||void 0,d.secret=h.secret,d.nonce=h.nonce,d.pendingToken=h.pendingToken||null,d}_getIdTokenResponse(t){const i=this.buildRequest();return Ha(t,i)}_linkToIdToken(t,i){const s=this.buildRequest();return s.idToken=i,Ha(t,s)}_getReauthenticationResolver(t){const i=this.buildRequest();return i.autoCreate=!1,Ha(t,i)}buildRequest(){const t={requestUri:_b,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),t.postBody=kl(i)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends D0{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends jl{constructor(){super("facebook.com")}static credential(t){return Ls._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mr.credentialFromTaggedObject(t)}static credentialFromError(t){return Mr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mr.credential(t.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Ls._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return xr.credentialFromTaggedObject(t)}static credentialFromError(t){return xr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:i,oauthAccessToken:s}=t;if(!i&&!s)return null;try{return xr.credential(i,s)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends jl{constructor(){super("github.com")}static credential(t){return Ls._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Pr.credentialFromTaggedObject(t)}static credentialFromError(t){return Pr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Pr.credential(t.oauthAccessToken)}catch{return null}}}Pr.GITHUB_SIGN_IN_METHOD="github.com";Pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends jl{constructor(){super("twitter.com")}static credential(t,i){return Ls._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:i})}static credentialFromResult(t){return kr.credentialFromTaggedObject(t)}static credentialFromError(t){return kr.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:i,oauthTokenSecret:s}=t;if(!i||!s)return null;try{return kr.credential(i,s)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(r,t){return Em(r,"POST","/v1/accounts:signUp",Ll(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,i,s,l=!1){const h=await Yn._fromIdTokenResponse(t,s,l),d=j_(s);return new Wi({user:h,providerId:d,_tokenResponse:s,operationType:i})}static async _forOperation(t,i,s){await t._updateTokensIfNecessary(s,!0);const l=j_(s);return new Wi({user:t,providerId:l,_tokenResponse:s,operationType:i})}}function j_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(r){if(zn(r.app))return Promise.reject(Xi(r));const t=zl(r);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new Wi({user:t.currentUser,providerId:null,operationType:"signIn"});const i=await vb(t,{returnSecureToken:!0}),s=await Wi._fromIdTokenResponse(t,"signIn",i,!0);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc extends nr{constructor(t,i,s,l){super(i.code,i.message),this.operationType=s,this.user=l,Object.setPrototypeOf(this,zc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,i,s,l){return new zc(t,i,s,l)}}function N0(r,t,i,s){return(t==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(h=>{throw h.code==="auth/multi-factor-auth-required"?zc._fromErrorAndOperation(r,h,t,s):h})}async function Tb(r,t,i=!1){const s=await Cl(r,t._linkToIdToken(r.auth,await r.getIdToken()),i);return Wi._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(r,t,i=!1){const{auth:s}=r;if(zn(s.app))return Promise.reject(Xi(s));const l="reauthenticate";try{const h=await Cl(r,N0(s,l,t,r),i);Tt(h.idToken,s,"internal-error");const d=Tm(h.idToken);Tt(d,s,"internal-error");const{sub:g}=d;return Tt(r.uid===g,s,"user-mismatch"),Wi._forOperation(r,l,h)}catch(h){throw h?.code==="auth/user-not-found"&&Zi(s,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sb(r,t,i=!1){if(zn(r.app))return Promise.reject(Xi(r));const s="signIn",l=await N0(r,s,t),h=await Wi._fromIdTokenResponse(r,s,l);return i||await r._updateCurrentUser(h.user),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bb(r,t){return Em(r,"POST","/v1/accounts:signInWithCustomToken",Ll(r,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(r,t){if(zn(r.app))return Promise.reject(Xi(r));const i=zl(r),s=await bb(i,{token:t,returnSecureToken:!0}),l=await Wi._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(l.user),l}function Rb(r,t,i,s){return rn(r).onIdTokenChanged(t,i,s)}function Ib(r,t,i){return rn(r).beforeAuthStateChanged(t,i)}function Cb(r,t,i,s){return rn(r).onAuthStateChanged(t,i,s)}const jc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,i){this.storageRetriever=t,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(jc,"1"),this.storage.removeItem(jc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,i){return this.storage.setItem(t,JSON.stringify(i)),Promise.resolve()}_get(t){const i=this.storage.getItem(t);return Promise.resolve(i?JSON.parse(i):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=1e3,Nb=10;class V0 extends O0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w0(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const i of Object.keys(this.listeners)){const s=this.storage.getItem(i),l=this.localCache[i];s!==l&&t(i,l,s)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((d,g,y)=>{this.notifyListeners(d,y)});return}const s=t.key;i?this.detachListener():this.stopPolling();const l=()=>{const d=this.storage.getItem(s);!i&&this.localCache[s]===d||this.notifyListeners(s,d)},h=this.storage.getItem(s);ib()&&h!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,Nb):l()}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:s}),!0)})},Db)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,i){await super._set(t,i),this.localCache[t]=JSON.stringify(i)}async _get(t){const i=await super._get(t);return this.localCache[t]=JSON.stringify(i),i}async _remove(t){await super._remove(t),delete this.localCache[t]}}V0.type="LOCAL";const Ob=V0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0 extends O0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}M0.type="SESSION";const x0=M0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(r){return Promise.all(r.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const i=this.receivers.find(l=>l.isListeningto(t));if(i)return i;const s=new eh(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const i=t,{eventId:s,eventType:l,data:h}=i.data,d=this.handlersMap[l];if(!d?.size)return;i.ports[0].postMessage({status:"ack",eventId:s,eventType:l});const g=Array.from(d).map(async _=>_(i.origin,h)),y=await Vb(g);i.ports[0].postMessage({status:"done",eventId:s,eventType:l,response:y})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(r="",t=10){let i="";for(let s=0;s<t;s++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,i,s=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let h,d;return new Promise((g,y)=>{const _=bm("",20);l.port1.start();const A=setTimeout(()=>{y(new Error("unsupported_event"))},s);d={messageChannel:l,onMessage(D){const I=D;if(I.data.eventId===_)switch(I.data.status){case"ack":clearTimeout(A),h=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(h),g(I.data.response);break;default:clearTimeout(A),clearTimeout(h),y(new Error("invalid_response"));break}}},this.handlers.add(d),l.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:t,eventId:_,data:i},[l.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(){return window}function xb(r){di().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(){return typeof di().WorkerGlobalScope<"u"&&typeof di().importScripts=="function"}async function Pb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kb(){return navigator?.serviceWorker?.controller||null}function Ub(){return P0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="firebaseLocalStorageDb",Lb=1,Bc="firebaseLocalStorage",U0="fbase_key";class Bl{constructor(t){this.request=t}toPromise(){return new Promise((t,i)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function nh(r,t){return r.transaction([Bc],t?"readwrite":"readonly").objectStore(Bc)}function zb(){const r=indexedDB.deleteDatabase(k0);return new Bl(r).toPromise()}function Xd(){const r=indexedDB.open(k0,Lb);return new Promise((t,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Bc,{keyPath:U0})}catch(l){i(l)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Bc)?t(s):(s.close(),await zb(),t(await Xd()))})})}async function B_(r,t,i){const s=nh(r,!0).put({[U0]:t,value:i});return new Bl(s).toPromise()}async function jb(r,t){const i=nh(r,!1).get(t),s=await new Bl(i).toPromise();return s===void 0?null:s.value}function q_(r,t){const i=nh(r,!0).delete(t);return new Bl(i).toPromise()}const Bb=800,qb=3;class L0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xd(),this.db)}async _withRetries(t){let i=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(i++>qb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eh._getInstance(Ub()),this.receiver._subscribe("keyChanged",async(t,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(t,i)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await Pb(),!this.activeServiceWorker)return;this.sender=new Mb(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||kb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Xd();return await B_(t,jc,"1"),await q_(t,jc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,i){return this._withPendingWrite(async()=>(await this._withRetries(s=>B_(s,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)))}async _get(t){const i=await this._withRetries(s=>jb(s,t));return this.localCache[t]=i,i}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(i=>q_(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const h=nh(l,!1).getAll();return new Bl(h).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const i=[],s=new Set;if(t.length!==0)for(const{fbase_key:l,value:h}of t)s.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(h)&&(this.notifyListeners(l,h),i.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!s.has(l)&&(this.notifyListeners(l,null),i.push(l));return i}notifyListeners(t,i){this.localCache[t]=i;const s=this.listeners[t];if(s)for(const l of Array.from(s))l(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Bb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}L0.type="LOCAL";const Hb=L0;new Ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(r,t){return t?Yi(t):(Tt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm extends C0{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ha(t,this._buildIdpRequest())}_linkToIdToken(t,i){return Ha(t,this._buildIdpRequest(i))}_getReauthenticationResolver(t){return Ha(t,this._buildIdpRequest())}_buildIdpRequest(t){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(i.idToken=t),i}}function Fb(r){return Sb(r.auth,new wm(r),r.bypassAuthState)}function Qb(r){const{auth:t,user:i}=r;return Tt(i,t,"internal-error"),Ab(i,new wm(r),r.bypassAuthState)}async function Kb(r){const{auth:t,user:i}=r;return Tt(i,t,"internal-error"),Tb(i,new wm(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t,i,s,l,h=!1){this.auth=t,this.resolver=s,this.user=l,this.bypassAuthState=h,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(t,i)=>{this.pendingPromise={resolve:t,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:i,sessionId:s,postBody:l,tenantId:h,error:d,type:g}=t;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:i,sessionId:s,tenantId:h||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(g)(y))}catch(_){this.reject(_)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Fb;case"linkViaPopup":case"linkViaRedirect":return Kb;case"reauthViaPopup":case"reauthViaRedirect":return Qb;default:Zi(this.auth,"internal-error")}}resolve(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ji(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=new Ul(2e3,1e4);class ja extends z0{constructor(t,i,s,l,h){super(t,i,l,h),this.provider=s,this.authWindow=null,this.pollId=null,ja.currentPopupAction&&ja.currentPopupAction.cancel(),ja.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Tt(t,this.auth,"internal-error"),t}async onExecution(){Ji(this.filter.length===1,"Popup operations only handle one event");const t=bm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ja.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Yb.get())};t()}}ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="pendingRedirect",Rc=new Map;class $b extends z0{constructor(t,i,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,s),this.eventId=null}async execute(){let t=Rc.get(this.auth._key());if(!t){try{const s=await Zb(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(i){t=()=>Promise.reject(i)}Rc.set(this.auth._key(),t)}return this.bypassAuthState||Rc.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const i=await this.auth._redirectUserForId(t.eventId);if(i)return this.user=i,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Zb(r,t){const i=tw(t),s=Wb(r);if(!await s._isAvailable())return!1;const l=await s._get(i)==="true";return await s._remove(i),l}function Jb(r,t){Rc.set(r._key(),t)}function Wb(r){return Yi(r._redirectPersistence)}function tw(r){return wc(Xb,r.config.apiKey,r.name)}async function ew(r,t,i=!1){if(zn(r.app))return Promise.reject(Xi(r));const s=zl(r),l=Gb(s,t),d=await new $b(s,l,i).execute();return d&&!i&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,t)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw=600*1e3;class iw{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let i=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(i=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!rw(t)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=t,i=!0)),i}sendToConsumer(t,i){if(t.error&&!j0(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";i.onError(fi(this.auth,s))}else i.onAuthEvent(t)}isEventForConsumer(t,i){const s=i.eventId===null||!!t.eventId&&t.eventId===i.eventId;return i.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=nw&&this.cachedEventUids.clear(),this.cachedEventUids.has(H_(t))}saveEventToCache(t){this.cachedEventUids.add(H_(t)),this.lastProcessedEventTime=Date.now()}}function H_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(t=>t).join("-")}function j0({type:r,error:t}){return r==="unknown"&&t?.code==="auth/no-auth-event"}function rw(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sw(r,t={}){return no(r,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ow=/^https?/;async function lw(r){if(r.config.emulator)return;const{authorizedDomains:t}=await sw(r);for(const i of t)try{if(uw(i))return}catch{}Zi(r,"unauthorized-domain")}function uw(r){const t=Kd(),{protocol:i,hostname:s}=new URL(t);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===t.replace("chrome-extension://",""):i==="chrome-extension:"&&d.hostname===s}if(!ow.test(i))return!1;if(aw.test(r))return s===r;const l=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Ul(3e4,6e4);function G_(){const r=di().___jsl;if(r?.H){for(const t of Object.keys(r.H))if(r.H[t].r=r.H[t].r||[],r.H[t].L=r.H[t].L||[],r.H[t].r=[...r.H[t].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function hw(r){return new Promise((t,i)=>{function s(){G_(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{G_(),i(fi(r,"network-request-failed"))},timeout:cw.get()})}if(di().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(di().gapi?.load)s();else{const l=fb("iframefcb");return di()[l]=()=>{gapi.load?s():i(fi(r,"network-request-failed"))},cb(`${hb()}?onload=${l}`).catch(h=>i(h))}}).catch(t=>{throw Ic=null,t})}let Ic=null;function fw(r){return Ic=Ic||hw(r),Ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw=new Ul(5e3,15e3),mw="__/auth/iframe",gw="emulator/auth/iframe",pw={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yw=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _w(r){const t=r.config;Tt(t.authDomain,r,"auth-domain-config-required");const i=t.emulator?vm(t,gw):`https://${r.config.authDomain}/${mw}`,s={apiKey:t.apiKey,appName:r.name,v:eo},l=yw.get(r.config.apiHost);l&&(s.eid=l);const h=r._getFrameworks();return h.length&&(s.fw=h.join(",")),`${i}?${kl(s).slice(1)}`}async function vw(r){const t=await fw(r),i=di().gapi;return Tt(i,r,"internal-error"),t.open({where:document.body,url:_w(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pw,dontclear:!0},s=>new Promise(async(l,h)=>{await s.restyle({setHideOnLeave:!1});const d=fi(r,"network-request-failed"),g=di().setTimeout(()=>{h(d)},dw.get());function y(){di().clearTimeout(g),l(s)}s.ping(y).then(y,()=>{h(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Tw=500,Aw=600,Sw="_blank",bw="http://localhost";class F_{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ww(r,t,i,s=Tw,l=Aw){const h=Math.max((window.screen.availHeight-l)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let g="";const y={...Ew,width:s.toString(),height:l.toString(),top:h,left:d},_=nn().toLowerCase();i&&(g=E0(_)?Sw:i),_0(_)&&(t=t||bw,y.scrollbars="yes");const A=Object.entries(y).reduce((I,[H,Z])=>`${I}${H}=${Z},`,"");if(nb(_)&&g!=="_self")return Rw(t||"",g),new F_(null);const D=window.open(t||"",g,A);Tt(D,r,"popup-blocked");try{D.focus()}catch{}return new F_(D)}function Rw(r,t){const i=document.createElement("a");i.href=r,i.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="__/auth/handler",Cw="emulator/auth/handler",Dw=encodeURIComponent("fac");async function Q_(r,t,i,s,l,h){Tt(r.config.authDomain,r,"auth-domain-config-required"),Tt(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:s,v:eo,eventId:l};if(t instanceof D0){t.setDefaultLanguage(r.languageCode),d.providerId=t.providerId||"",wS(t.getCustomParameters())||(d.customParameters=JSON.stringify(t.getCustomParameters()));for(const[A,D]of Object.entries({}))d[A]=D}if(t instanceof jl){const A=t.getScopes().filter(D=>D!=="");A.length>0&&(d.scopes=A.join(","))}r.tenantId&&(d.tid=r.tenantId);const g=d;for(const A of Object.keys(g))g[A]===void 0&&delete g[A];const y=await r._getAppCheckToken(),_=y?`#${Dw}=${encodeURIComponent(y)}`:"";return`${Nw(r)}?${kl(g).slice(1)}${_}`}function Nw({config:r}){return r.emulator?vm(r,Cw):`https://${r.authDomain}/${Iw}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="webStorageSupport";class Ow{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=x0,this._completeRedirectFn=ew,this._overrideRedirectResult=Jb}async _openPopup(t,i,s,l){Ji(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const h=await Q_(t,i,s,Kd(),l);return ww(t,h,bm())}async _openRedirect(t,i,s,l){await this._originValidation(t);const h=await Q_(t,i,s,Kd(),l);return xb(h),new Promise(()=>{})}_initialize(t){const i=t._key();if(this.eventManagers[i]){const{manager:l,promise:h}=this.eventManagers[i];return l?Promise.resolve(l):(Ji(h,"If manager is not set, promise should be"),h)}const s=this.initAndGetManager(t);return this.eventManagers[i]={promise:s},s.catch(()=>{delete this.eventManagers[i]}),s}async initAndGetManager(t){const i=await vw(t),s=new iw(t);return i.register("authEvent",l=>(Tt(l?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=i,s}_isIframeWebStorageSupported(t,i){this.iframes[t._key()].send(Md,{type:Md},l=>{const h=l?.[0]?.[Md];h!==void 0&&i(!!h),Zi(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const i=t._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=lw(t)),this.originValidationPromises[i]}get _shouldInitProactively(){return w0()||v0()||Am()}}const Vw=Ow;var K_="@firebase/auth",Y_="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const i=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,i),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const i=this.internalListeners.get(t);i&&(this.internalListeners.delete(t),i(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Pw(r){Qa(new Us("auth",(t,{options:i})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),h=t.getProvider("app-check-internal"),{apiKey:d,authDomain:g}=s.options;Tt(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const y={apiKey:d,authDomain:g,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:R0(r)},_=new lb(s,l,h,y);return mb(_,i),_},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,i,s)=>{t.getProvider("auth-internal").initialize()})),Qa(new Us("auth-internal",t=>{const i=zl(t.getProvider("auth").getImmediate());return(s=>new Mw(s))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),jr(K_,Y_,xw(r)),jr(K_,Y_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=300,Uw=e0("authIdTokenMaxAge")||kw;let X_=null;const Lw=r=>async t=>{const i=t&&await t.getIdTokenResult(),s=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(s&&s>Uw)return;const l=i?.token;X_!==l&&(X_=l,await fetch(r,{method:l?"POST":"DELETE",headers:l?{Authorization:`Bearer ${l}`}:{}}))};function zw(r=o0()){const t=ym(r,"auth");if(t.isInitialized())return t.getImmediate();const i=db(r,{popupRedirectResolver:Vw,persistence:[Hb,Ob,x0]}),s=e0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const h=new URL(s,location.origin);if(location.origin===h.origin){const d=Lw(h.toString());Ib(i,d,()=>d(i.currentUser)),Rb(i,g=>d(g))}}const l=Wv("auth");return l&&gb(i,`http://${l}`),i}function jw(){return document.getElementsByTagName("head")?.[0]??document}ub({loadJS(r){return new Promise((t,i)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=t,s.onerror=l=>{const h=fi("internal-error");h.customData=l,i(h)},s.type="text/javascript",s.charset="UTF-8",jw().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Pw("Browser");var $_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,B0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(M,S){function w(){}w.prototype=S.prototype,M.D=S.prototype,M.prototype=new w,M.prototype.constructor=M,M.C=function(O,V,P){for(var R=Array(arguments.length-2),be=2;be<arguments.length;be++)R[be-2]=arguments[be];return S.prototype[V].apply(O,R)}}function i(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,i),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,S,w){w||(w=0);var O=Array(16);if(typeof S=="string")for(var V=0;16>V;++V)O[V]=S.charCodeAt(w++)|S.charCodeAt(w++)<<8|S.charCodeAt(w++)<<16|S.charCodeAt(w++)<<24;else for(V=0;16>V;++V)O[V]=S[w++]|S[w++]<<8|S[w++]<<16|S[w++]<<24;S=M.g[0],w=M.g[1],V=M.g[2];var P=M.g[3],R=S+(P^w&(V^P))+O[0]+3614090360&4294967295;S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[1]+3905402710&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[2]+606105819&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[3]+3250441966&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(P^w&(V^P))+O[4]+4118548399&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[5]+1200080426&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[6]+2821735955&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[7]+4249261313&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(P^w&(V^P))+O[8]+1770035416&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[9]+2336552879&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[10]+4294925233&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[11]+2304563134&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(P^w&(V^P))+O[12]+1804603682&4294967295,S=w+(R<<7&4294967295|R>>>25),R=P+(V^S&(w^V))+O[13]+4254626195&4294967295,P=S+(R<<12&4294967295|R>>>20),R=V+(w^P&(S^w))+O[14]+2792965006&4294967295,V=P+(R<<17&4294967295|R>>>15),R=w+(S^V&(P^S))+O[15]+1236535329&4294967295,w=V+(R<<22&4294967295|R>>>10),R=S+(V^P&(w^V))+O[1]+4129170786&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[6]+3225465664&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[11]+643717713&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[0]+3921069994&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^P&(w^V))+O[5]+3593408605&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[10]+38016083&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[15]+3634488961&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[4]+3889429448&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^P&(w^V))+O[9]+568446438&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[14]+3275163606&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[3]+4107603335&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[8]+1163531501&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(V^P&(w^V))+O[13]+2850285829&4294967295,S=w+(R<<5&4294967295|R>>>27),R=P+(w^V&(S^w))+O[2]+4243563512&4294967295,P=S+(R<<9&4294967295|R>>>23),R=V+(S^w&(P^S))+O[7]+1735328473&4294967295,V=P+(R<<14&4294967295|R>>>18),R=w+(P^S&(V^P))+O[12]+2368359562&4294967295,w=V+(R<<20&4294967295|R>>>12),R=S+(w^V^P)+O[5]+4294588738&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[8]+2272392833&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[11]+1839030562&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[14]+4259657740&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^P)+O[1]+2763975236&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[4]+1272893353&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[7]+4139469664&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[10]+3200236656&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^P)+O[13]+681279174&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[0]+3936430074&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[3]+3572445317&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[6]+76029189&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(w^V^P)+O[9]+3654602809&4294967295,S=w+(R<<4&4294967295|R>>>28),R=P+(S^w^V)+O[12]+3873151461&4294967295,P=S+(R<<11&4294967295|R>>>21),R=V+(P^S^w)+O[15]+530742520&4294967295,V=P+(R<<16&4294967295|R>>>16),R=w+(V^P^S)+O[2]+3299628645&4294967295,w=V+(R<<23&4294967295|R>>>9),R=S+(V^(w|~P))+O[0]+4096336452&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[7]+1126891415&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[14]+2878612391&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[5]+4237533241&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~P))+O[12]+1700485571&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[3]+2399980690&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[10]+4293915773&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[1]+2240044497&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~P))+O[8]+1873313359&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[15]+4264355552&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[6]+2734768916&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[13]+1309151649&4294967295,w=V+(R<<21&4294967295|R>>>11),R=S+(V^(w|~P))+O[4]+4149444226&4294967295,S=w+(R<<6&4294967295|R>>>26),R=P+(w^(S|~V))+O[11]+3174756917&4294967295,P=S+(R<<10&4294967295|R>>>22),R=V+(S^(P|~w))+O[2]+718787259&4294967295,V=P+(R<<15&4294967295|R>>>17),R=w+(P^(V|~S))+O[9]+3951481745&4294967295,M.g[0]=M.g[0]+S&4294967295,M.g[1]=M.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,M.g[2]=M.g[2]+V&4294967295,M.g[3]=M.g[3]+P&4294967295}s.prototype.u=function(M,S){S===void 0&&(S=M.length);for(var w=S-this.blockSize,O=this.B,V=this.h,P=0;P<S;){if(V==0)for(;P<=w;)l(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<S;)if(O[V++]=M.charCodeAt(P++),V==this.blockSize){l(this,O),V=0;break}}else for(;P<S;)if(O[V++]=M[P++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=S},s.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var S=1;S<M.length-8;++S)M[S]=0;var w=8*this.o;for(S=M.length-8;S<M.length;++S)M[S]=w&255,w/=256;for(this.u(M),M=Array(16),S=w=0;4>S;++S)for(var O=0;32>O;O+=8)M[w++]=this.g[S]>>>O&255;return M};function h(M,S){var w=g;return Object.prototype.hasOwnProperty.call(w,M)?w[M]:w[M]=S(M)}function d(M,S){this.h=S;for(var w=[],O=!0,V=M.length-1;0<=V;V--){var P=M[V]|0;O&&P==S||(w[V]=P,O=!1)}this.g=w}var g={};function y(M){return-128<=M&&128>M?h(M,function(S){return new d([S|0],0>S?-1:0)}):new d([M|0],0>M?-1:0)}function _(M){if(isNaN(M)||!isFinite(M))return D;if(0>M)return J(_(-M));for(var S=[],w=1,O=0;M>=w;O++)S[O]=M/w|0,w*=4294967296;return new d(S,0)}function A(M,S){if(M.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M.charAt(0)=="-")return J(A(M.substring(1),S));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=_(Math.pow(S,8)),O=D,V=0;V<M.length;V+=8){var P=Math.min(8,M.length-V),R=parseInt(M.substring(V,V+P),S);8>P?(P=_(Math.pow(S,P)),O=O.j(P).add(_(R))):(O=O.j(w),O=O.add(_(R)))}return O}var D=y(0),I=y(1),H=y(16777216);r=d.prototype,r.m=function(){if(rt(this))return-J(this).m();for(var M=0,S=1,w=0;w<this.g.length;w++){var O=this.i(w);M+=(0<=O?O:4294967296+O)*S,S*=4294967296}return M},r.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(Z(this))return"0";if(rt(this))return"-"+J(this).toString(M);for(var S=_(Math.pow(M,6)),w=this,O="";;){var V=qt(w,S).g;w=gt(w,V.j(S));var P=((0<w.g.length?w.g[0]:w.h)>>>0).toString(M);if(w=V,Z(w))return P+O;for(;6>P.length;)P="0"+P;O=P+O}},r.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function Z(M){if(M.h!=0)return!1;for(var S=0;S<M.g.length;S++)if(M.g[S]!=0)return!1;return!0}function rt(M){return M.h==-1}r.l=function(M){return M=gt(this,M),rt(M)?-1:Z(M)?0:1};function J(M){for(var S=M.g.length,w=[],O=0;O<S;O++)w[O]=~M.g[O];return new d(w,~M.h).add(I)}r.abs=function(){return rt(this)?J(this):this},r.add=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0,V=0;V<=S;V++){var P=O+(this.i(V)&65535)+(M.i(V)&65535),R=(P>>>16)+(this.i(V)>>>16)+(M.i(V)>>>16);O=R>>>16,P&=65535,R&=65535,w[V]=R<<16|P}return new d(w,w[w.length-1]&-2147483648?-1:0)};function gt(M,S){return M.add(J(S))}r.j=function(M){if(Z(this)||Z(M))return D;if(rt(this))return rt(M)?J(this).j(J(M)):J(J(this).j(M));if(rt(M))return J(this.j(J(M)));if(0>this.l(H)&&0>M.l(H))return _(this.m()*M.m());for(var S=this.g.length+M.g.length,w=[],O=0;O<2*S;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(var V=0;V<M.g.length;V++){var P=this.i(O)>>>16,R=this.i(O)&65535,be=M.i(V)>>>16,re=M.i(V)&65535;w[2*O+2*V]+=R*re,dt(w,2*O+2*V),w[2*O+2*V+1]+=P*re,dt(w,2*O+2*V+1),w[2*O+2*V+1]+=R*be,dt(w,2*O+2*V+1),w[2*O+2*V+2]+=P*be,dt(w,2*O+2*V+2)}for(O=0;O<S;O++)w[O]=w[2*O+1]<<16|w[2*O];for(O=S;O<2*S;O++)w[O]=0;return new d(w,0)};function dt(M,S){for(;(M[S]&65535)!=M[S];)M[S+1]+=M[S]>>>16,M[S]&=65535,S++}function ft(M,S){this.g=M,this.h=S}function qt(M,S){if(Z(S))throw Error("division by zero");if(Z(M))return new ft(D,D);if(rt(M))return S=qt(J(M),S),new ft(J(S.g),J(S.h));if(rt(S))return S=qt(M,J(S)),new ft(J(S.g),S.h);if(30<M.g.length){if(rt(M)||rt(S))throw Error("slowDivide_ only works with positive integers.");for(var w=I,O=S;0>=O.l(M);)w=At(w),O=At(O);var V=wt(w,1),P=wt(O,1);for(O=wt(O,2),w=wt(w,2);!Z(O);){var R=P.add(O);0>=R.l(M)&&(V=V.add(w),P=R),O=wt(O,1),w=wt(w,1)}return S=gt(M,V.j(S)),new ft(V,S)}for(V=D;0<=M.l(S);){for(w=Math.max(1,Math.floor(M.m()/S.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),P=_(w),R=P.j(S);rt(R)||0<R.l(M);)w-=O,P=_(w),R=P.j(S);Z(P)&&(P=I),V=V.add(P),M=gt(M,R)}return new ft(V,M)}r.A=function(M){return qt(this,M).h},r.and=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)&M.i(O);return new d(w,this.h&M.h)},r.or=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)|M.i(O);return new d(w,this.h|M.h)},r.xor=function(M){for(var S=Math.max(this.g.length,M.g.length),w=[],O=0;O<S;O++)w[O]=this.i(O)^M.i(O);return new d(w,this.h^M.h)};function At(M){for(var S=M.g.length+1,w=[],O=0;O<S;O++)w[O]=M.i(O)<<1|M.i(O-1)>>>31;return new d(w,M.h)}function wt(M,S){var w=S>>5;S%=32;for(var O=M.g.length-w,V=[],P=0;P<O;P++)V[P]=0<S?M.i(P+w)>>>S|M.i(P+w+1)<<32-S:M.i(P+w);return new d(V,M.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,B0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=_,d.fromString=A,Br=d}).apply(typeof $_<"u"?$_:typeof self<"u"?self:typeof window<"u"?window:{});var yc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q0,yl,H0,Cc,$d,G0,F0,Q0;(function(){var r,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,p){return u==Array.prototype||u==Object.prototype||(u[m]=p.value),u};function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof yc=="object"&&yc];for(var m=0;m<u.length;++m){var p=u[m];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var s=i(this);function l(u,m){if(m)t:{var p=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var k=u[T];if(!(k in p))break t;p=p[k]}u=u[u.length-1],T=p[u],m=m(T),m!=T&&m!=null&&t(p,u,{configurable:!0,writable:!0,value:m})}}function h(u,m){u instanceof String&&(u+="");var p=0,T=!1,k={next:function(){if(!T&&p<u.length){var B=p++;return{value:m(B,u[B]),done:!1}}return T=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}l("Array.prototype.values",function(u){return u||function(){return h(this,function(m,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},g=this||self;function y(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function _(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function A(u,m,p){return u.call.apply(u.bind,arguments)}function D(u,m,p){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,T),u.apply(m,k)}}return function(){return u.apply(m,arguments)}}function I(u,m,p){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?A:D,I.apply(null,arguments)}function H(u,m){var p=Array.prototype.slice.call(arguments,1);return function(){var T=p.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function Z(u,m){function p(){}p.prototype=m.prototype,u.aa=m.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(T,k,B){for(var nt=Array(arguments.length-2),kt=2;kt<arguments.length;kt++)nt[kt-2]=arguments[kt];return m.prototype[k].apply(T,nt)}}function rt(u){const m=u.length;if(0<m){const p=Array(m);for(let T=0;T<m;T++)p[T]=u[T];return p}return[]}function J(u,m){for(let p=1;p<arguments.length;p++){const T=arguments[p];if(y(T)){const k=u.length||0,B=T.length||0;u.length=k+B;for(let nt=0;nt<B;nt++)u[k+nt]=T[nt]}else u.push(T)}}class gt{constructor(m,p){this.i=m,this.j=p,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function dt(u){return/^[\s\xa0]*$/.test(u)}function ft(){var u=g.navigator;return u&&(u=u.userAgent)?u:""}function qt(u){return qt[" "](u),u}qt[" "]=function(){};var At=ft().indexOf("Gecko")!=-1&&!(ft().toLowerCase().indexOf("webkit")!=-1&&ft().indexOf("Edge")==-1)&&!(ft().indexOf("Trident")!=-1||ft().indexOf("MSIE")!=-1)&&ft().indexOf("Edge")==-1;function wt(u,m,p){for(const T in u)m.call(p,u[T],T,u)}function M(u,m){for(const p in u)m.call(void 0,u[p],p,u)}function S(u){const m={};for(const p in u)m[p]=u[p];return m}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(u,m){let p,T;for(let k=1;k<arguments.length;k++){T=arguments[k];for(p in T)u[p]=T[p];for(let B=0;B<w.length;B++)p=w[B],Object.prototype.hasOwnProperty.call(T,p)&&(u[p]=T[p])}}function V(u){var m=1;u=u.split(":");const p=[];for(;0<m&&u.length;)p.push(u.shift()),m--;return u.length&&p.push(u.join(":")),p}function P(u){g.setTimeout(()=>{throw u},0)}function R(){var u=jt;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class be{constructor(){this.h=this.g=null}add(m,p){const T=re.get();T.set(m,p),this.h?this.h.next=T:this.g=T,this.h=T}}var re=new gt(()=>new q,u=>u.reset());class q{constructor(){this.next=this.g=this.h=null}set(m,p){this.h=m,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let et,ut=!1,jt=new be,C=()=>{const u=g.Promise.resolve(void 0);et=()=>{u.then(X)}};var X=()=>{for(var u;u=R();){try{u.h.call(u.g)}catch(p){P(p)}var m=re;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}ut=!1};function it(){this.s=this.s,this.C=this.C}it.prototype.s=!1,it.prototype.ma=function(){this.s||(this.s=!0,this.N())},it.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var ct=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const p=()=>{};g.addEventListener("test",p,m),g.removeEventListener("test",p,m)}catch{}return u}();function It(u,m){if(W.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(At){t:{try{qt(m.nodeName);var k=!0;break t}catch{}k=!1}k||(m=null)}}else p=="mouseover"?m=u.fromElement:p=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:vt[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&It.aa.h.call(this)}}Z(It,W);var vt={2:"touch",3:"pen",4:"mouse"};It.prototype.h=function(){It.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),st=0;function Nt(u,m,p,T,k){this.listener=u,this.proxy=null,this.src=m,this.type=p,this.capture=!!T,this.ha=k,this.key=++st,this.da=this.fa=!1}function oe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function te(u){this.src=u,this.g={},this.h=0}te.prototype.add=function(u,m,p,T,k){var B=u.toString();u=this.g[B],u||(u=this.g[B]=[],this.h++);var nt=sn(u,m,T,k);return-1<nt?(m=u[nt],p||(m.fa=!1)):(m=new Nt(m,this.src,B,!!T,k),m.fa=p,u.push(m)),m};function we(u,m){var p=m.type;if(p in u.g){var T=u.g[p],k=Array.prototype.indexOf.call(T,m,void 0),B;(B=0<=k)&&Array.prototype.splice.call(T,k,1),B&&(oe(m),u.g[p].length==0&&(delete u.g[p],u.h--))}}function sn(u,m,p,T){for(var k=0;k<u.length;++k){var B=u[k];if(!B.da&&B.listener==m&&B.capture==!!p&&B.ha==T)return k}return-1}var wn="closure_lm_"+(1e6*Math.random()|0),Me={};function Rn(u,m,p,T,k){if(Array.isArray(m)){for(var B=0;B<m.length;B++)Rn(u,m[B],p,T,k);return null}return p=Kl(p),u&&u[tt]?u.K(m,p,_(T)?!!T.capture:!1,k):Xe(u,m,p,!1,T,k)}function Xe(u,m,p,T,k,B){if(!m)throw Error("Invalid event type");var nt=_(k)?!!k.capture:!!k,kt=Gs(u);if(kt||(u[wn]=kt=new te(u)),p=kt.add(m,p,T,nt,B),p.proxy)return p;if(T=Bn(),p.proxy=T,T.src=u,T.listener=p,u.addEventListener)ct||(k=nt),k===void 0&&(k=!1),u.addEventListener(m.toString(),T,k);else if(u.attachEvent)u.attachEvent(Wr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Bn(){function u(p){return m.call(u.src,u.listener,p)}const m=Th;return u}function Jr(u,m,p,T,k){if(Array.isArray(m))for(var B=0;B<m.length;B++)Jr(u,m[B],p,T,k);else T=_(T)?!!T.capture:!!T,p=Kl(p),u&&u[tt]?(u=u.i,m=String(m).toString(),m in u.g&&(B=u.g[m],p=sn(B,p,T,k),-1<p&&(oe(B[p]),Array.prototype.splice.call(B,p,1),B.length==0&&(delete u.g[m],u.h--)))):u&&(u=Gs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=sn(m,p,T,k)),(p=-1<u?m[u]:null)&&Hs(p))}function Hs(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[tt])we(m.i,u);else{var p=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(p,T,u.capture):m.detachEvent?m.detachEvent(Wr(p),T):m.addListener&&m.removeListener&&m.removeListener(T),(p=Gs(m))?(we(p,u),p.h==0&&(p.src=null,m[wn]=null)):oe(u)}}}function Wr(u){return u in Me?Me[u]:Me[u]="on"+u}function Th(u,m){if(u.da)u=!0;else{m=new It(m,this);var p=u.listener,T=u.ha||u.src;u.fa&&Hs(u),u=p.call(T,m)}return u}function Gs(u){return u=u[wn],u instanceof te?u:null}var oo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kl(u){return typeof u=="function"?u:(u[oo]||(u[oo]=function(m){return u.handleEvent(m)}),u[oo])}function ce(){it.call(this),this.i=new te(this),this.M=this,this.F=null}Z(ce,it),ce.prototype[tt]=!0,ce.prototype.removeEventListener=function(u,m,p,T){Jr(this,u,m,p,T)};function Qt(u,m){var p,T=u.F;if(T)for(p=[];T;T=T.F)p.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new W(m,u);else if(m instanceof W)m.target=m.target||u;else{var k=m;m=new W(T,u),O(m,k)}if(k=!0,p)for(var B=p.length-1;0<=B;B--){var nt=m.g=p[B];k=gn(nt,T,!0,m)&&k}if(nt=m.g=u,k=gn(nt,T,!0,m)&&k,k=gn(nt,T,!1,m)&&k,p)for(B=0;B<p.length;B++)nt=m.g=p[B],k=gn(nt,T,!1,m)&&k}ce.prototype.N=function(){if(ce.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var p=u.g[m],T=0;T<p.length;T++)oe(p[T]);delete u.g[m],u.h--}}this.F=null},ce.prototype.K=function(u,m,p,T){return this.i.add(String(u),m,!1,p,T)},ce.prototype.L=function(u,m,p,T){return this.i.add(String(u),m,!0,p,T)};function gn(u,m,p,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var k=!0,B=0;B<m.length;++B){var nt=m[B];if(nt&&!nt.da&&nt.capture==p){var kt=nt.listener,Ie=nt.ha||nt.src;nt.fa&&we(u.i,nt),k=kt.call(Ie,T)!==!1&&k}}return k&&!T.defaultPrevented}function $e(u,m,p){if(typeof u=="function")p&&(u=I(u,p));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:g.setTimeout(u,m||0)}function Yl(u){u.g=$e(()=>{u.g=null,u.i&&(u.i=!1,Yl(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ah extends it{constructor(m,p){super(),this.m=m,this.l=p,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Yl(this)}N(){super.N(),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ts(u){it.call(this),this.h=u,this.g={}}Z(ts,it);var es=[];function ns(u){wt(u.g,function(m,p){this.g.hasOwnProperty(p)&&Hs(m)},u),u.g={}}ts.prototype.N=function(){ts.aa.N.call(this),ns(this)},ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qn=g.JSON.stringify,Fs=g.JSON.parse,is=class{stringify(u){return g.JSON.stringify(u,void 0)}parse(u){return g.JSON.parse(u,void 0)}};function lo(){}lo.prototype.h=null;function uo(u){return u.h||(u.h=u.i())}function co(){}var Ai={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Si(){W.call(this,"d")}Z(Si,W);function ho(){W.call(this,"c")}Z(ho,W);var Xn={},fo=null;function ir(){return fo=fo||new ce}Xn.La="serverreachability";function Qs(u){W.call(this,Xn.La,u)}Z(Qs,W);function rr(u){const m=ir();Qt(m,new Qs(m))}Xn.STAT_EVENT="statevent";function Xl(u,m){W.call(this,Xn.STAT_EVENT,u),this.stat=m}Z(Xl,W);function se(u){const m=ir();Qt(m,new Xl(m,u))}Xn.Ma="timingevent";function Re(u,m){W.call(this,Xn.Ma,u),this.size=m}Z(Re,W);function _e(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return g.setTimeout(function(){u()},m)}function In(){this.g=!0}In.prototype.xa=function(){this.g=!1};function mo(u,m,p,T,k,B){u.info(function(){if(u.g)if(B)for(var nt="",kt=B.split("&"),Ie=0;Ie<kt.length;Ie++){var Ut=kt[Ie].split("=");if(1<Ut.length){var Pe=Ut[0];Ut=Ut[1];var Ce=Pe.split("_");nt=2<=Ce.length&&Ce[1]=="type"?nt+(Pe+"="+Ut+"&"):nt+(Pe+"=redacted&")}}else nt=null;else nt=B;return"XMLHTTP REQ ("+T+") [attempt "+k+"]: "+m+`
`+p+`
`+nt})}function Sh(u,m,p,T,k,B,nt){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+k+"]: "+m+`
`+p+`
`+B+" "+nt})}function sr(u,m,p,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+rs(u,p)+(T?" "+T:"")})}function $l(u,m){u.info(function(){return"TIMEOUT: "+m})}In.prototype.info=function(){};function rs(u,m){if(!u.g)return m;if(!m)return null;try{var p=JSON.parse(m);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var T=p[u];if(!(2>T.length)){var k=T[1];if(Array.isArray(k)&&!(1>k.length)){var B=k[0];if(B!="noop"&&B!="stop"&&B!="close")for(var nt=1;nt<k.length;nt++)k[nt]=""}}}}return qn(p)}catch{return m}}var ar={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$n;function Zn(){}Z(Zn,lo),Zn.prototype.g=function(){return new XMLHttpRequest},Zn.prototype.i=function(){return{}},$n=new Zn;function an(u,m,p,T){this.j=u,this.i=m,this.l=p,this.R=T||1,this.U=new ts(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}var go={},Ks={};function Hn(u,m,p){u.L=1,u.v=us(pn(m)),u.m=p,u.P=!0,wi(u,null)}function wi(u,m){u.F=Date.now(),ss(u),u.A=pn(u.v);var p=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),To(p.i,"t",T),u.C=0,p=u.j.J,u.h=new de,u.g=fu(u.j,p?m:null,!u.m),0<u.O&&(u.M=new Ah(I(u.Y,u,u.g),u.O)),m=u.U,p=u.g,T=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(es[0]=k.toString()),k=es);for(var B=0;B<k.length;B++){var nt=Rn(p,k[B],T||m.handleEvent,!1,m.h||m);if(!nt)break;m.g[nt.key]=nt}m=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),rr(),mo(u.i,u.u,u.A,u.l,u.R,u.m)}an.prototype.ca=function(u){u=u.target;const m=this.M;m&&On(u)==3?m.j():this.Y(u)},an.prototype.Y=function(u){try{if(u==this.g)t:{const Ce=On(this.g);var m=this.g.Ba();const Mi=this.g.Z();if(!(3>Ce)&&(Ce!=3||this.g&&(this.h.h||this.g.oa()||ru(this.g)))){this.J||Ce!=4||m==7||(m==8||0>=Mi?rr(3):rr(2)),or(this);var p=this.g.Z();this.X=p;e:if(Zl(this)){var T=ru(this.g);u="";var k=T.length,B=On(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Be(this),Jn(this);var nt="";break e}this.h.i=new g.TextDecoder}for(m=0;m<k;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(B&&m==k-1)});T.length=0,this.h.g+=u,this.C=0,nt=this.h.g}else nt=this.g.oa();if(this.o=p==200,Sh(this.i,this.u,this.A,this.l,this.R,Ce,p),this.o){if(this.T&&!this.K){e:{if(this.g){var kt,Ie=this.g;if((kt=Ie.g?Ie.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dt(kt)){var Ut=kt;break e}}Ut=null}if(p=Ut)sr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,as(this,p);else{this.o=!1,this.s=3,se(12),Be(this),Jn(this);break t}}if(this.P){p=!0;let qe;for(;!this.J&&this.C<nt.length;)if(qe=Jl(this,nt),qe==Ks){Ce==4&&(this.s=4,se(14),p=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==go){this.s=4,se(15),sr(this.i,this.l,nt,"[Invalid Chunk]"),p=!1;break}else sr(this.i,this.l,qe,null),as(this,qe);if(Zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||nt.length!=0||this.h.h||(this.s=1,se(16),p=!1),this.o=this.o&&p,!p)sr(this.i,this.l,nt,"[Invalid Chunked Response]"),Be(this),Jn(this);else if(0<nt.length&&!this.W){this.W=!0;var Pe=this.j;Pe.g==this&&Pe.ba&&!Pe.M&&(Pe.j.info("Great, no buffering proxy detected. Bytes received: "+nt.length),ys(Pe),Pe.M=!0,se(11))}}else sr(this.i,this.l,nt,null),as(this,nt);Ce==4&&Be(this),this.o&&!this.J&&(Ce==4?uu(this.j,this):(this.o=!1,ss(this)))}else Ch(this.g),p==400&&0<nt.indexOf("Unknown SID")?(this.s=3,se(12)):(this.s=0,se(13)),Be(this),Jn(this)}}}catch{}finally{}};function Zl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Jl(u,m){var p=u.C,T=m.indexOf(`
`,p);return T==-1?Ks:(p=Number(m.substring(p,T)),isNaN(p)?go:(T+=1,T+p>m.length?Ks:(m=m.slice(T,T+p),u.C=T+p,m)))}an.prototype.cancel=function(){this.J=!0,Be(this)};function ss(u){u.S=Date.now()+u.I,Wl(u,u.I)}function Wl(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=_e(I(u.ba,u),m)}function or(u){u.B&&(g.clearTimeout(u.B),u.B=null)}an.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?($l(this.i,this.A),this.L!=2&&(rr(),se(17)),Be(this),this.s=2,Jn(this)):Wl(this,this.S-u)};function Jn(u){u.j.G==0||u.J||uu(u.j,u)}function Be(u){or(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,ns(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function as(u,m){try{var p=u.j;if(p.G!=0&&(p.g==u||po(p.h,u))){if(!u.K&&po(p.h,u)&&p.G==3){try{var T=p.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var k=T;if(k[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)sa(p),ia(p);else break t;Ro(p),se(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=_e(I(p.Za,p),6e3));if(1>=Xs(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Vi(p,11)}else if((u.K||p.g==u)&&sa(p),!dt(m))for(k=p.Da.g.parse(m),m=0;m<k.length;m++){let Ut=k[m];if(p.T=Ut[0],Ut=Ut[1],p.G==2)if(Ut[0]=="c"){p.K=Ut[1],p.ia=Ut[2];const Pe=Ut[3];Pe!=null&&(p.la=Pe,p.j.info("VER="+p.la));const Ce=Ut[4];Ce!=null&&(p.Aa=Ce,p.j.info("SVER="+p.Aa));const Mi=Ut[5];Mi!=null&&typeof Mi=="number"&&0<Mi&&(T=1.5*Mi,p.L=T,p.j.info("backChannelRequestTimeoutMs_="+T)),T=p;const qe=u.g;if(qe){const si=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(si){var B=T.h;B.g||si.indexOf("spdy")==-1&&si.indexOf("quic")==-1&&si.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&($s(B,B.h),B.h=null))}if(T.D){const Co=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;Co&&(T.ya=Co,Xt(T.I,T.D,Co))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),T=p;var nt=u;if(T.qa=hu(T,T.J?T.ia:null,T.W),nt.K){on(T.h,nt);var kt=nt,Ie=T.L;Ie&&(kt.I=Ie),kt.B&&(or(kt),ss(kt)),T.g=nt}else ou(T);0<p.i.length&&ra(p)}else Ut[0]!="stop"&&Ut[0]!="close"||Vi(p,7);else p.G==3&&(Ut[0]=="stop"||Ut[0]=="close"?Ut[0]=="stop"?Vi(p,7):bo(p):Ut[0]!="noop"&&p.l&&p.l.ta(Ut),p.v=0)}}rr(4)}catch{}}var tu=class{constructor(u,m){this.g=u,this.map=m}};function Ri(u){this.l=u||10,g.PerformanceNavigationTiming?(u=g.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(g.chrome&&g.chrome.loadTimes&&g.chrome.loadTimes()&&g.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ys(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Xs(u){return u.h?1:u.g?u.g.size:0}function po(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function $s(u,m){u.g?u.g.add(m):u.h=m}function on(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Ri.prototype.cancel=function(){if(this.i=yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function yo(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const p of u.g.values())m=m.concat(p.D);return m}return rt(u.i)}function bh(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(y(u)){for(var m=[],p=u.length,T=0;T<p;T++)m.push(u[T]);return m}m=[],p=0;for(T in u)m[p++]=u[T];return m}function Zs(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(y(u)||typeof u=="string"){var m=[];u=u.length;for(var p=0;p<u;p++)m.push(p);return m}m=[],p=0;for(const T in u)m[p++]=T;return m}}}function _o(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(y(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var p=Zs(u),T=bh(u),k=T.length,B=0;B<k;B++)m.call(void 0,T[B],p&&p[B],u)}var os=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wh(u,m){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var T=u[p].indexOf("="),k=null;if(0<=T){var B=u[p].substring(0,T);k=u[p].substring(T+1)}else B=u[p];m(B,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function ve(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ve){this.h=u.h,ls(this,u.j),this.o=u.o,this.g=u.g,lr(this,u.s),this.l=u.l;var m=u.i,p=new Ci;p.i=m.i,m.g&&(p.g=new Map(m.g),p.h=m.h),Ii(this,p),this.m=u.m}else u&&(m=String(u).match(os))?(this.h=!1,ls(this,m[1]||"",!0),this.o=Cn(m[2]||""),this.g=Cn(m[3]||"",!0),lr(this,m[4]),this.l=Cn(m[5]||"",!0),Ii(this,m[6]||"",!0),this.m=Cn(m[7]||"")):(this.h=!1,this.i=new Ci(null,this.h))}ve.prototype.toString=function(){var u=[],m=this.j;m&&u.push(cs(m,vo,!0),":");var p=this.g;return(p||m=="file")&&(u.push("//"),(m=this.o)&&u.push(cs(m,vo,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(cs(p,p.charAt(0)=="/"?Rh:Eo,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",cs(p,Js)),u.join("")};function pn(u){return new ve(u)}function ls(u,m,p){u.j=p?Cn(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function lr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Ii(u,m,p){m instanceof Ci?(u.i=m,nu(u.i,u.h)):(p||(m=cs(m,Ih)),u.i=new Ci(m,u.h))}function Xt(u,m,p){u.i.set(m,p)}function us(u){return Xt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cn(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function cs(u,m,p){return typeof u=="string"?(u=encodeURI(u).replace(m,eu),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function eu(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var vo=/[#\/\?@]/g,Eo=/[#\?:]/g,Rh=/[#\?]/g,Ih=/[#\?@]/g,Js=/#/g;function Ci(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Dn(u){u.g||(u.g=new Map,u.h=0,u.i&&wh(u.i,function(m,p){u.add(decodeURIComponent(m.replace(/\+/g," ")),p)}))}r=Ci.prototype,r.add=function(u,m){Dn(this),this.i=null,u=Wn(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(m),this.h+=1,this};function Di(u,m){Dn(u),m=Wn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function Ni(u,m){return Dn(u),m=Wn(u,m),u.g.has(m)}r.forEach=function(u,m){Dn(this),this.g.forEach(function(p,T){p.forEach(function(k){u.call(m,k,T,this)},this)},this)},r.na=function(){Dn(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),p=[];for(let T=0;T<m.length;T++){const k=u[T];for(let B=0;B<k.length;B++)p.push(m[T])}return p},r.V=function(u){Dn(this);let m=[];if(typeof u=="string")Ni(this,u)&&(m=m.concat(this.g.get(Wn(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)m=m.concat(u[p])}return m},r.set=function(u,m){return Dn(this),this.i=null,u=Wn(this,u),Ni(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function To(u,m,p){Di(u,m),0<p.length&&(u.i=null,u.g.set(Wn(u,m),rt(p)),u.h+=p.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var p=0;p<m.length;p++){var T=m[p];const B=encodeURIComponent(String(T)),nt=this.V(T);for(T=0;T<nt.length;T++){var k=B;nt[T]!==""&&(k+="="+encodeURIComponent(String(nt[T]))),u.push(k)}}return this.i=u.join("&")};function Wn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function nu(u,m){m&&!u.j&&(Dn(u),u.i=null,u.g.forEach(function(p,T){var k=T.toLowerCase();T!=k&&(Di(this,T),To(this,k,p))},u)),u.j=m}function hs(u,m){const p=new In;if(g.Image){const T=new Image;T.onload=H(Nn,p,"TestLoadImage: loaded",!0,m,T),T.onerror=H(Nn,p,"TestLoadImage: error",!1,m,T),T.onabort=H(Nn,p,"TestLoadImage: abort",!1,m,T),T.ontimeout=H(Nn,p,"TestLoadImage: timeout",!1,m,T),g.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function Gn(u,m){const p=new In,T=new AbortController,k=setTimeout(()=>{T.abort(),Nn(p,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(B=>{clearTimeout(k),B.ok?Nn(p,"TestPingServer: ok",!0,m):Nn(p,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(k),Nn(p,"TestPingServer: error",!1,m)})}function Nn(u,m,p,T,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),T(p)}catch{}}function fs(){this.g=new is}function ti(u,m,p){const T=p||"";try{_o(u,function(k,B){let nt=k;_(k)&&(nt=qn(k)),m.push(T+B+"="+encodeURIComponent(nt))})}catch(k){throw m.push(T+"type="+encodeURIComponent("_badmap")),k}}function ur(u){this.l=u.Ub||null,this.j=u.eb||!1}Z(ur,lo),ur.prototype.g=function(){return new Oi(this.l,this.j)},ur.prototype.i=function(u){return function(){return u}}({});function Oi(u,m){ce.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Z(Oi,ce),r=Oi.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,ni(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||g).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ei(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ni(this)),this.g&&(this.readyState=3,ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof g.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ao(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ao(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?ei(this):ni(this),this.readyState==3&&Ao(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,ei(this))},r.Qa=function(u){this.g&&(this.response=u,ei(this))},r.ga=function(){this.g&&ei(this)};function ei(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ni(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var p=m.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=m.next();return u.join(`\r
`)};function ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function So(u){let m="";return wt(u,function(p,T){m+=T,m+=":",m+=p,m+=`\r
`}),m}function xe(u,m,p){t:{for(T in p){var T=!1;break t}T=!0}T||(p=So(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Xt(u,m,p))}function Gt(u){ce.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Z(Gt,ce);var Ws=/^https?$/i,ds=["POST","PUT"];r=Gt.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,p,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$n.g(),this.v=this.o?uo(this.o):uo($n),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(B){iu(this,B);return}if(u=p||"",p=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var k in T)p.set(k,T[k]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const B of T.keys())p.set(B,T.get(B));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(p.keys()).find(B=>B.toLowerCase()=="content-type"),k=g.FormData&&u instanceof g.FormData,!(0<=Array.prototype.indexOf.call(ds,m,void 0))||T||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,nt]of p)this.g.setRequestHeader(B,nt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ms(this),this.u=!0,this.g.send(u),this.u=!1}catch(B){iu(this,B)}};function iu(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,ta(u),ii(u)}function ta(u){u.A||(u.A=!0,Qt(u,"complete"),Qt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Qt(this,"complete"),Qt(this,"abort"),ii(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),Gt.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?ea(this):this.bb())},r.bb=function(){ea(this)};function ea(u){if(u.h&&typeof d<"u"&&(!u.v[1]||On(u)!=4||u.Z()!=2)){if(u.u&&On(u)==4)$e(u.Ea,0,u);else if(Qt(u,"readystatechange"),On(u)==4){u.h=!1;try{const nt=u.Z();t:switch(nt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break t;default:m=!1}var p;if(!(p=m)){var T;if(T=nt===0){var k=String(u.D).match(os)[1]||null;!k&&g.self&&g.self.location&&(k=g.self.location.protocol.slice(0,-1)),T=!Ws.test(k?k.toLowerCase():"")}p=T}if(p)Qt(u,"complete"),Qt(u,"success");else{u.m=6;try{var B=2<On(u)?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.Z()+"]",ta(u)}}finally{ii(u)}}}}function ii(u,m){if(u.g){ms(u);const p=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Qt(u,"ready");try{p.onreadystatechange=T}catch{}}}function ms(u){u.I&&(g.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function On(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<On(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Fs(m)}};function ru(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ch(u){const m={};u=(u.g&&2<=On(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(dt(u[T]))continue;var p=V(u[T]);const k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const B=m[k]||[];m[k]=B,B.push(p)}M(m,function(T){return T.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gs(u,m,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||m}function na(u){this.Aa=0,this.i=[],this.j=new In,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gs("baseRetryDelayMs",5e3,u),this.cb=gs("retryDelaySeedMs",1e4,u),this.Wa=gs("forwardChannelMaxRetries",2,u),this.wa=gs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Ri(u&&u.concurrentRequestLimit),this.Da=new fs,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=na.prototype,r.la=8,r.G=1,r.connect=function(u,m,p,T){se(0),this.W=u,this.H=m||{},p&&T!==void 0&&(this.H.OSID=p,this.H.OAID=T),this.F=this.X,this.I=hu(this,null,this.W),ra(this)};function bo(u){if(su(u),u.G==3){var m=u.U++,p=pn(u.I);if(Xt(p,"SID",u.K),Xt(p,"RID",m),Xt(p,"TYPE","terminate"),ps(u,p),m=new an(u,u.j,m),m.L=2,m.v=us(pn(p)),p=!1,g.navigator&&g.navigator.sendBeacon)try{p=g.navigator.sendBeacon(m.v.toString(),"")}catch{}!p&&g.Image&&(new Image().src=m.v,p=!0),p||(m.g=fu(m.j,null),m.g.ea(m.v)),m.F=Date.now(),ss(m)}cu(u)}function ia(u){u.g&&(ys(u),u.g.cancel(),u.g=null)}function su(u){ia(u),u.u&&(g.clearTimeout(u.u),u.u=null),sa(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&g.clearTimeout(u.s),u.s=null)}function ra(u){if(!Ys(u.h)&&!u.s){u.s=!0;var m=u.Ga;et||C(),ut||(et(),ut=!0),jt.add(m,u),u.B=0}}function Dh(u,m){return Xs(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=_e(I(u.Ga,u,m),Io(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const k=new an(this,this.j,u);let B=this.o;if(this.S&&(B?(B=S(B),O(B,this.S)):B=this.S),this.m!==null||this.O||(k.H=B,B=null),this.P)t:{for(var m=0,p=0;p<this.i.length;p++){e:{var T=this.i[p];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=p;break t}if(m===4096||p===this.i.length-1){m=p+1;break t}}m=1e3}else m=1e3;m=au(this,k,m),p=pn(this.I),Xt(p,"RID",u),Xt(p,"CVER",22),this.D&&Xt(p,"X-HTTP-Session-Id",this.D),ps(this,p),B&&(this.O?m="headers="+encodeURIComponent(String(So(B)))+"&"+m:this.m&&xe(p,this.m,B)),$s(this.h,k),this.Ua&&Xt(p,"TYPE","init"),this.P?(Xt(p,"$req",m),Xt(p,"SID","null"),k.T=!0,Hn(k,p,null)):Hn(k,p,m),this.G=2}}else this.G==3&&(u?wo(this,u):this.i.length==0||Ys(this.h)||wo(this))};function wo(u,m){var p;m?p=m.l:p=u.U++;const T=pn(u.I);Xt(T,"SID",u.K),Xt(T,"RID",p),Xt(T,"AID",u.T),ps(u,T),u.m&&u.o&&xe(T,u.m,u.o),p=new an(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),m&&(u.i=m.D.concat(u.i)),m=au(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$s(u.h,p),Hn(p,T,m)}function ps(u,m){u.H&&wt(u.H,function(p,T){Xt(m,T,p)}),u.l&&_o({},function(p,T){Xt(m,T,p)})}function au(u,m,p){p=Math.min(u.i.length,p);var T=u.l?I(u.l.Na,u.l,u):null;t:{var k=u.i;let B=-1;for(;;){const nt=["count="+p];B==-1?0<p?(B=k[0].g,nt.push("ofs="+B)):B=0:nt.push("ofs="+B);let kt=!0;for(let Ie=0;Ie<p;Ie++){let Ut=k[Ie].g;const Pe=k[Ie].map;if(Ut-=B,0>Ut)B=Math.max(0,k[Ie].g-100),kt=!1;else try{ti(Pe,nt,"req"+Ut+"_")}catch{T&&T(Pe)}}if(kt){T=nt.join("&");break t}}}return u=u.i.splice(0,p),m.D=u,T}function ou(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;et||C(),ut||(et(),ut=!0),jt.add(m,u),u.v=0}}function Ro(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=_e(I(u.Fa,u),Io(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,lu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=_e(I(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,se(10),ia(this),lu(this))};function ys(u){u.A!=null&&(g.clearTimeout(u.A),u.A=null)}function lu(u){u.g=new an(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=pn(u.qa);Xt(m,"RID","rpc"),Xt(m,"SID",u.K),Xt(m,"AID",u.T),Xt(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Xt(m,"TO",u.ja),Xt(m,"TYPE","xmlhttp"),ps(u,m),u.m&&u.o&&xe(m,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=us(pn(m)),p.m=null,p.P=!0,wi(p,u)}r.Za=function(){this.C!=null&&(this.C=null,ia(this),Ro(this),se(19))};function sa(u){u.C!=null&&(g.clearTimeout(u.C),u.C=null)}function uu(u,m){var p=null;if(u.g==m){sa(u),ys(u),u.g=null;var T=2}else if(po(u.h,m))p=m.D,on(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){p=m.m?m.m.length:0,m=Date.now()-m.F;var k=u.B;T=ir(),Qt(T,new Re(T,p)),ra(u)}else ou(u);else if(k=m.s,k==3||k==0&&0<m.X||!(T==1&&Dh(u,m)||T==2&&Ro(u)))switch(p&&0<p.length&&(m=u.h,m.i=m.i.concat(p)),k){case 1:Vi(u,5);break;case 4:Vi(u,10);break;case 3:Vi(u,6);break;default:Vi(u,2)}}}function Io(u,m){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*m}function Vi(u,m){if(u.j.info("Error code "+m),m==2){var p=I(u.fb,u),T=u.Xa;const k=!T;T=new ve(T||"//www.google.com/images/cleardot.gif"),g.location&&g.location.protocol=="http"||ls(T,"https"),us(T),k?hs(T.toString(),p):Gn(T.toString(),p)}else se(2);u.G=0,u.l&&u.l.sa(m),cu(u),su(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),se(2)):(this.j.info("Failed to ping google.com"),se(1))};function cu(u){if(u.G=0,u.ka=[],u.l){const m=yo(u.h);(m.length!=0||u.i.length!=0)&&(J(u.ka,m),J(u.ka,u.i),u.h.i.length=0,rt(u.i),u.i.length=0),u.l.ra()}}function hu(u,m,p){var T=p instanceof ve?pn(p):new ve(p);if(T.g!="")m&&(T.g=m+"."+T.g),lr(T,T.s);else{var k=g.location;T=k.protocol,m=m?m+"."+k.hostname:k.hostname,k=+k.port;var B=new ve(null);T&&ls(B,T),m&&(B.g=m),k&&lr(B,k),p&&(B.l=p),T=B}return p=u.D,m=u.ya,p&&m&&Xt(T,p,m),Xt(T,"VER",u.la),ps(u,T),T}function fu(u,m,p){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Gt(new ur({eb:p})):new Gt(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function du(){}r=du.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function aa(){}aa.prototype.g=function(u,m){return new ln(u,m)};function ln(u,m){ce.call(this),this.g=new na(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!dt(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!dt(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new ri(this)}Z(ln,ce),ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ln.prototype.close=function(){bo(this.g)},ln.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=qn(u),u=p);m.i.push(new tu(m.Ya++,u)),m.G==3&&ra(m)},ln.prototype.N=function(){this.g.l=null,delete this.j,bo(this.g),delete this.g,ln.aa.N.call(this)};function mu(u){Si.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){t:{for(const p in m){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}Z(mu,Si);function gu(){ho.call(this),this.status=1}Z(gu,ho);function ri(u){this.g=u}Z(ri,du),ri.prototype.ua=function(){Qt(this.g,"a")},ri.prototype.ta=function(u){Qt(this.g,new mu(u))},ri.prototype.sa=function(u){Qt(this.g,new gu)},ri.prototype.ra=function(){Qt(this.g,"b")},aa.prototype.createWebChannel=aa.prototype.g,ln.prototype.send=ln.prototype.o,ln.prototype.open=ln.prototype.m,ln.prototype.close=ln.prototype.close,Q0=function(){return new aa},F0=function(){return ir()},G0=Xn,$d={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ar.NO_ERROR=0,ar.TIMEOUT=8,ar.HTTP_ERROR=6,Cc=ar,bi.COMPLETE="complete",H0=bi,co.EventType=Ai,Ai.OPEN="a",Ai.CLOSE="b",Ai.ERROR="c",Ai.MESSAGE="d",ce.prototype.listen=ce.prototype.K,yl=co,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,q0=Gt}).apply(typeof yc<"u"?yc:typeof self<"u"?self:typeof window<"u"?window:{});const Z_="@firebase/firestore",J_="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new gm("@firebase/firestore");function Pa(){return zs.logLevel}function at(r,...t){if(zs.logLevel<=Mt.DEBUG){const i=t.map(Rm);zs.debug(`Firestore (${io}): ${r}`,...i)}}function tr(r,...t){if(zs.logLevel<=Mt.ERROR){const i=t.map(Rm);zs.error(`Firestore (${io}): ${r}`,...i)}}function Ka(r,...t){if(zs.logLevel<=Mt.WARN){const i=t.map(Rm);zs.warn(`Firestore (${io}): ${r}`,...i)}}function Rm(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(i){return JSON.stringify(i)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(r,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,K0(r,s,i)}function K0(r,t,i){let s=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: ${t} (ID: ${r.toString(16)})`;if(i!==void 0)try{s+=" CONTEXT: "+JSON.stringify(i)}catch{s+=" CONTEXT: "+i}throw tr(s),new Error(s)}function Ft(r,t,i,s){let l="Unexpected state";typeof i=="string"?l=i:s=i,r||K0(t,l,s)}function bt(r,t){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends nr{constructor(t,i){super(t,i),this.code=t,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(){this.promise=new Promise((t,i)=>{this.resolve=t,this.reject=i})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Bw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,i){t.enqueueRetryable(()=>i(tn.UNAUTHENTICATED))}shutdown(){}}class qw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,i){this.changeListener=i,t.enqueueRetryable(()=>i(this.token.user))}shutdown(){this.changeListener=null}}class Hw{constructor(t){this.t=t,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,i){Ft(this.o===void 0,42304);let s=this.i;const l=y=>this.i!==s?(s=this.i,i(y)):Promise.resolve();let h=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new qr,t.enqueueRetryable(()=>l(this.currentUser))};const d=()=>{const y=h;t.enqueueRetryable(async()=>{await y.promise,await l(this.currentUser)})},g=y=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>g(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?g(y):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),h.resolve(),h=new qr)}},0),d()}getToken(){const t=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then(s=>this.i!==t?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ft(typeof s.accessToken=="string",31837,{l:s}),new Y0(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Ft(t===null||typeof t=="string",2055,{h:t}),new tn(t)}}class Gw{constructor(t,i,s){this.P=t,this.T=i,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Fw{constructor(t,i,s){this.P=t,this.T=i,this.I=s}getToken(){return Promise.resolve(new Gw(this.P,this.T,this.I))}start(t,i){t.enqueueRetryable(()=>i(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class W_{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qw{constructor(t,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,i){Ft(this.o===void 0,3512);const s=h=>{h.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);const d=h.token!==this.m;return this.m=h.token,at("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?i(h.token):Promise.resolve()};this.o=h=>{t.enqueueRetryable(()=>s(h))};const l=h=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(h=>l(h)),setTimeout(()=>{if(!this.appCheck){const h=this.V.getImmediate({optional:!0});h?l(h):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new W_(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(i=>i?(Ft(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new W_(i.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(r){const t=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(i);else for(let s=0;s<r;s++)i[s]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const l=Kw(40);for(let h=0;h<l.length;++h)s.length<20&&l[h]<i&&(s+=t.charAt(l[h]%62))}return s}}function xt(r,t){return r<t?-1:r>t?1:0}function Zd(r,t){const i=Math.min(r.length,t.length);for(let s=0;s<i;s++){const l=r.charAt(s),h=t.charAt(s);if(l!==h)return xd(l)===xd(h)?xt(l,h):xd(l)?1:-1}return xt(r.length,t.length)}const Yw=55296,Xw=57343;function xd(r){const t=r.charCodeAt(0);return t>=Yw&&t<=Xw}function Ya(r,t,i){return r.length===t.length&&r.every((s,l)=>i(s,t[l]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="__name__";class hi{constructor(t,i,s){i===void 0?i=0:i>t.length&&_t(637,{offset:i,range:t.length}),s===void 0?s=t.length-i:s>t.length-i&&_t(1746,{length:s,range:t.length-i}),this.segments=t,this.offset=i,this.len=s}get length(){return this.len}isEqual(t){return hi.comparator(this,t)===0}child(t){const i=this.segments.slice(this.offset,this.limit());return t instanceof hi?t.forEach(s=>{i.push(s)}):i.push(t),this.construct(i)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==t.get(i))return!1;return!0}forEach(t){for(let i=this.offset,s=this.limit();i<s;i++)t(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,i){const s=Math.min(t.length,i.length);for(let l=0;l<s;l++){const h=hi.compareSegments(t.get(l),i.get(l));if(h!==0)return h}return xt(t.length,i.length)}static compareSegments(t,i){const s=hi.isNumericId(t),l=hi.isNumericId(i);return s&&!l?-1:!s&&l?1:s&&l?hi.extractNumericId(t).compare(hi.extractNumericId(i)):Zd(t,i)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Br.fromString(t.substring(4,t.length-2))}}class ne extends hi{construct(t,i,s){return new ne(t,i,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const i=[];for(const s of t){if(s.indexOf("//")>=0)throw new lt($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);i.push(...s.split("/").filter(l=>l.length>0))}return new ne(i)}static emptyPath(){return new ne([])}}const $w=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends hi{construct(t,i,s){return new Ke(t,i,s)}static isValidIdentifier(t){return $w.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tv}static keyField(){return new Ke([tv])}static fromServerFormat(t){const i=[];let s="",l=0;const h=()=>{if(s.length===0)throw new lt($.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(s),s=""};let d=!1;for(;l<t.length;){const g=t[l];if(g==="\\"){if(l+1===t.length)throw new lt($.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const y=t[l+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new lt($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=y,l+=2}else g==="`"?(d=!d,l++):g!=="."||d?(s+=g,l++):(h(),l++)}if(h(),d)throw new lt($.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ke(i)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t){this.path=t}static fromPath(t){return new mt(ne.fromString(t))}static fromName(t){return new mt(ne.fromString(t).popFirst(5))}static empty(){return new mt(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ne.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,i){return ne.comparator(t.path,i.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new mt(new ne(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X0(r,t,i){if(!i)throw new lt($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${t}.`)}function Zw(r,t,i,s){if(t===!0&&s===!0)throw new lt($.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function ev(r){if(!mt.isDocumentKey(r))throw new lt($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function nv(r){if(mt.isDocumentKey(r))throw new lt($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Cm(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(r);return t?`a custom ${t} object`:"an object"}}return typeof r=="function"?"a function":_t(12329,{type:typeof r})}function mi(r,t){if("_delegate"in r&&(r=r._delegate),!(r instanceof t)){if(t.name===r.constructor.name)throw new lt($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Cm(r);throw new lt($.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${i}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(r,t){const i={typeString:r};return t&&(i.value=t),i}function ql(r,t){if(!$0(r))throw new lt($.INVALID_ARGUMENT,"JSON must be an object");let i;for(const s in t)if(t[s]){const l=t[s].typeString,h="value"in t[s]?{value:t[s].value}:void 0;if(!(s in r)){i=`JSON missing required field: '${s}'`;break}const d=r[s];if(l&&typeof d!==l){i=`JSON field '${s}' must be a ${l}.`;break}if(h!==void 0&&d!==h.value){i=`Expected '${s}' field to equal '${h.value}'`;break}}if(i)throw new lt($.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=-62135596800,rv=1e6;class ie{static now(){return ie.fromMillis(Date.now())}static fromDate(t){return ie.fromMillis(t.getTime())}static fromMillis(t){const i=Math.floor(t/1e3),s=Math.floor((t-1e3*i)*rv);return new ie(i,s)}constructor(t,i){if(this.seconds=t,this.nanoseconds=i,i<0)throw new lt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new lt($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(t<iv)throw new lt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lt($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rv}_compareTo(t){return this.seconds===t.seconds?xt(this.nanoseconds,t.nanoseconds):xt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ie._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(ql(t,ie._jsonSchema))return new ie(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-iv;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ie._jsonSchemaVersion="firestore/timestamp/1.0",ie._jsonSchema={type:Se("string",ie._jsonSchemaVersion),seconds:Se("number"),nanoseconds:Se("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{static fromTimestamp(t){return new St(t)}static min(){return new St(new ie(0,0))}static max(){return new St(new ie(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl=-1;function Jw(r,t){const i=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,l=St.fromTimestamp(s===1e9?new ie(i+1,0):new ie(i,s));return new Gr(l,mt.empty(),t)}function Ww(r){return new Gr(r.readTime,r.key,Dl)}class Gr{constructor(t,i,s){this.readTime=t,this.documentKey=i,this.largestBatchId=s}static min(){return new Gr(St.min(),mt.empty(),Dl)}static max(){return new Gr(St.max(),mt.empty(),Dl)}}function tR(r,t){let i=r.readTime.compareTo(t.readTime);return i!==0?i:(i=mt.comparator(r.documentKey,t.documentKey),i!==0?i:xt(r.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==eR)throw r;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)},i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)})}catch(t){return this.next(void 0,t)}next(t,i){return this.callbackAttached&&_t(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(t,this.result):new Y((s,l)=>{this.nextCallback=h=>{this.wrapSuccess(t,h).next(s,l)},this.catchCallback=h=>{this.wrapFailure(i,h).next(s,l)}})}toPromise(){return new Promise((t,i)=>{this.next(t,i)})}wrapUserFunction(t){try{const i=t();return i instanceof Y?i:Y.resolve(i)}catch(i){return Y.reject(i)}}wrapSuccess(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.resolve(i)}wrapFailure(t,i){return t?this.wrapUserFunction(()=>t(i)):Y.reject(i)}static resolve(t){return new Y((i,s)=>{i(t)})}static reject(t){return new Y((i,s)=>{s(t)})}static waitFor(t){return new Y((i,s)=>{let l=0,h=0,d=!1;t.forEach(g=>{++l,g.next(()=>{++h,d&&h===l&&i()},y=>s(y))}),d=!0,h===l&&i()})}static or(t){let i=Y.resolve(!1);for(const s of t)i=i.next(l=>l?Y.resolve(l):s());return i}static forEach(t,i){const s=[];return t.forEach((l,h)=>{s.push(i.call(this,l,h))}),this.waitFor(s)}static mapArray(t,i){return new Y((s,l)=>{const h=t.length,d=new Array(h);let g=0;for(let y=0;y<h;y++){const _=y;i(t[_]).next(A=>{d[_]=A,++g,g===h&&s(d)},A=>l(A))}})}static doWhile(t,i){return new Y((s,l)=>{const h=()=>{t()===!0?i().next(()=>{h()},l):s()};h()})}}function iR(r){const t=r.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function so(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>i.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}ih.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function rh(r){return r==null}function qc(r){return r===0&&1/r==-1/0}function rR(r){return typeof r=="number"&&Number.isInteger(r)&&!qc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0="";function sR(r){let t="";for(let i=0;i<r.length;i++)t.length>0&&(t=sv(t)),t=aR(r.get(i),t);return sv(t)}function aR(r,t){let i=t;const s=r.length;for(let l=0;l<s;l++){const h=r.charAt(l);switch(h){case"\0":i+="";break;case Z0:i+="";break;default:i+=h}}return i}function sv(r){return r+Z0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function av(r){let t=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t++;return t}function $r(r,t){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&t(i,r[i])}function J0(r){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,i){this.comparator=t,this.root=i||Qe.EMPTY}insert(t,i){return new ue(this.comparator,this.root.insert(t,i,this.comparator).copy(null,null,Qe.BLACK,null,null))}remove(t){return new ue(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Qe.BLACK,null,null))}get(t){let i=this.root;for(;!i.isEmpty();){const s=this.comparator(t,i.key);if(s===0)return i.value;s<0?i=i.left:s>0&&(i=i.right)}return null}indexOf(t){let i=0,s=this.root;for(;!s.isEmpty();){const l=this.comparator(t,s.key);if(l===0)return i+s.left.size;l<0?s=s.left:(i+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((i,s)=>(t(i,s),!1))}toString(){const t=[];return this.inorderTraversal((i,s)=>(t.push(`${i}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _c(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _c(this.root,t,this.comparator,!1)}getReverseIterator(){return new _c(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _c(this.root,t,this.comparator,!0)}}class _c{constructor(t,i,s,l){this.isReverse=l,this.nodeStack=[];let h=1;for(;!t.isEmpty();)if(h=i?s(t.key,i):1,i&&l&&(h*=-1),h<0)t=this.isReverse?t.left:t.right;else{if(h===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const i={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Qe{constructor(t,i,s,l,h){this.key=t,this.value=i,this.color=s??Qe.RED,this.left=l??Qe.EMPTY,this.right=h??Qe.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,i,s,l,h){return new Qe(t??this.key,i??this.value,s??this.color,l??this.left,h??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,s){let l=this;const h=s(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,i,s),null):h===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(t,i,s)),l.fixUp()}removeMin(){if(this.left.isEmpty())return Qe.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,i){let s,l=this;if(i(t,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(t,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(t,l.key)===0){if(l.right.isEmpty())return Qe.EMPTY;s=l.right.min(),l=l.copy(s.key,s.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(t,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _t(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _t(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw _t(27949);return t+(this.isRed()?0:1)}}Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1;Qe.EMPTY=new class{constructor(){this.size=0}get key(){throw _t(57766)}get value(){throw _t(16141)}get color(){throw _t(16727)}get left(){throw _t(29726)}get right(){throw _t(36894)}copy(t,i,s,l,h){return this}insert(t,i,s){return new Qe(t,i)}remove(t,i){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(t){this.comparator=t,this.data=new ue(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((i,s)=>(t(i),!1))}forEachInRange(t,i){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const l=s.getNext();if(this.comparator(l.key,t[1])>=0)return;i(l.key)}}forEachWhile(t,i){let s;for(s=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const i=this.data.getIteratorFrom(t);return i.hasNext()?i.getNext().key:null}getIterator(){return new ov(this.data.getIterator())}getIteratorFrom(t){return new ov(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let i=this;return i.size<t.size&&(i=t,t=this),t.forEach(s=>{i=i.add(s)}),i}isEqual(t){if(!(t instanceof Ve)||this.size!==t.size)return!1;const i=this.data.getIterator(),s=t.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(this.comparator(l,h)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(i=>{t.push(i)}),t}toString(){const t=[];return this.forEach(i=>t.push(i)),"SortedSet("+t.toString()+")"}copy(t){const i=new Ve(this.comparator);return i.data=t,i}}class ov{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t){this.fields=t,t.sort(Ke.comparator)}static empty(){return new bn([])}unionWith(t){let i=new Ve(Ke.comparator);for(const s of this.fields)i=i.add(s);for(const s of t)i=i.add(s);return new bn(i.toArray())}covers(t){for(const i of this.fields)if(i.isPrefixOf(t))return!0;return!1}isEqual(t){return Ya(this.fields,t.fields,(i,s)=>i.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.binaryString=t}static fromBase64String(t){const i=function(l){try{return atob(l)}catch(h){throw typeof DOMException<"u"&&h instanceof DOMException?new W0("Invalid base64 string: "+h):h}}(t);return new Ye(i)}static fromUint8Array(t){const i=function(l){let h="";for(let d=0;d<l.length;++d)h+=String.fromCharCode(l[d]);return h}(t);return new Ye(i)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(i){return btoa(i)}(this.binaryString)}toUint8Array(){return function(i){const s=new Uint8Array(i.length);for(let l=0;l<i.length;l++)s[l]=i.charCodeAt(l);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return xt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ye.EMPTY_BYTE_STRING=new Ye("");const oR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fr(r){if(Ft(!!r,39018),typeof r=="string"){let t=0;const i=oR.exec(r);if(Ft(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),t=Number(l)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:pe(r.seconds),nanos:pe(r.nanos)}}function pe(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Qr(r){return typeof r=="string"?Ye.fromBase64String(r):Ye.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="server_timestamp",eE="__type__",nE="__previous_value__",iE="__local_write_time__";function Nm(r){return(r?.mapValue?.fields||{})[eE]?.stringValue===tE}function sh(r){const t=r.mapValue.fields[nE];return Nm(t)?sh(t):t}function Nl(r){const t=Fr(r.mapValue.fields[iE].timestampValue);return new ie(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(t,i,s,l,h,d,g,y,_,A){this.databaseId=t,this.appId=i,this.persistenceKey=s,this.host=l,this.ssl=h,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.longPollingOptions=y,this.useFetchStreams=_,this.isUsingEmulator=A}}const Hc="(default)";class Ol{constructor(t,i){this.projectId=t,this.database=i||Hc}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database===Hc}isEqual(t){return t instanceof Ol&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE="__type__",uR="__max__",vc={mapValue:{}},sE="__vector__",Gc="value";function Kr(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Nm(r)?4:hR(r)?9007199254740991:cR(r)?10:11:_t(28295,{value:r})}function Ei(r,t){if(r===t)return!0;const i=Kr(r);if(i!==Kr(t))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===t.booleanValue;case 4:return Nl(r).isEqual(Nl(t));case 3:return function(l,h){if(typeof l.timestampValue=="string"&&typeof h.timestampValue=="string"&&l.timestampValue.length===h.timestampValue.length)return l.timestampValue===h.timestampValue;const d=Fr(l.timestampValue),g=Fr(h.timestampValue);return d.seconds===g.seconds&&d.nanos===g.nanos}(r,t);case 5:return r.stringValue===t.stringValue;case 6:return function(l,h){return Qr(l.bytesValue).isEqual(Qr(h.bytesValue))}(r,t);case 7:return r.referenceValue===t.referenceValue;case 8:return function(l,h){return pe(l.geoPointValue.latitude)===pe(h.geoPointValue.latitude)&&pe(l.geoPointValue.longitude)===pe(h.geoPointValue.longitude)}(r,t);case 2:return function(l,h){if("integerValue"in l&&"integerValue"in h)return pe(l.integerValue)===pe(h.integerValue);if("doubleValue"in l&&"doubleValue"in h){const d=pe(l.doubleValue),g=pe(h.doubleValue);return d===g?qc(d)===qc(g):isNaN(d)&&isNaN(g)}return!1}(r,t);case 9:return Ya(r.arrayValue.values||[],t.arrayValue.values||[],Ei);case 10:case 11:return function(l,h){const d=l.mapValue.fields||{},g=h.mapValue.fields||{};if(av(d)!==av(g))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(g[y]===void 0||!Ei(d[y],g[y])))return!1;return!0}(r,t);default:return _t(52216,{left:r})}}function Vl(r,t){return(r.values||[]).find(i=>Ei(i,t))!==void 0}function Xa(r,t){if(r===t)return 0;const i=Kr(r),s=Kr(t);if(i!==s)return xt(i,s);switch(i){case 0:case 9007199254740991:return 0;case 1:return xt(r.booleanValue,t.booleanValue);case 2:return function(h,d){const g=pe(h.integerValue||h.doubleValue),y=pe(d.integerValue||d.doubleValue);return g<y?-1:g>y?1:g===y?0:isNaN(g)?isNaN(y)?0:-1:1}(r,t);case 3:return lv(r.timestampValue,t.timestampValue);case 4:return lv(Nl(r),Nl(t));case 5:return Zd(r.stringValue,t.stringValue);case 6:return function(h,d){const g=Qr(h),y=Qr(d);return g.compareTo(y)}(r.bytesValue,t.bytesValue);case 7:return function(h,d){const g=h.split("/"),y=d.split("/");for(let _=0;_<g.length&&_<y.length;_++){const A=xt(g[_],y[_]);if(A!==0)return A}return xt(g.length,y.length)}(r.referenceValue,t.referenceValue);case 8:return function(h,d){const g=xt(pe(h.latitude),pe(d.latitude));return g!==0?g:xt(pe(h.longitude),pe(d.longitude))}(r.geoPointValue,t.geoPointValue);case 9:return uv(r.arrayValue,t.arrayValue);case 10:return function(h,d){const g=h.fields||{},y=d.fields||{},_=g[Gc]?.arrayValue,A=y[Gc]?.arrayValue,D=xt(_?.values?.length||0,A?.values?.length||0);return D!==0?D:uv(_,A)}(r.mapValue,t.mapValue);case 11:return function(h,d){if(h===vc.mapValue&&d===vc.mapValue)return 0;if(h===vc.mapValue)return 1;if(d===vc.mapValue)return-1;const g=h.fields||{},y=Object.keys(g),_=d.fields||{},A=Object.keys(_);y.sort(),A.sort();for(let D=0;D<y.length&&D<A.length;++D){const I=Zd(y[D],A[D]);if(I!==0)return I;const H=Xa(g[y[D]],_[A[D]]);if(H!==0)return H}return xt(y.length,A.length)}(r.mapValue,t.mapValue);default:throw _t(23264,{he:i})}}function lv(r,t){if(typeof r=="string"&&typeof t=="string"&&r.length===t.length)return xt(r,t);const i=Fr(r),s=Fr(t),l=xt(i.seconds,s.seconds);return l!==0?l:xt(i.nanos,s.nanos)}function uv(r,t){const i=r.values||[],s=t.values||[];for(let l=0;l<i.length&&l<s.length;++l){const h=Xa(i[l],s[l]);if(h)return h}return xt(i.length,s.length)}function $a(r){return Jd(r)}function Jd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(i){const s=Fr(i);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(i){return Qr(i).toBase64()}(r.bytesValue):"referenceValue"in r?function(i){return mt.fromName(i).toString()}(r.referenceValue):"geoPointValue"in r?function(i){return`geo(${i.latitude},${i.longitude})`}(r.geoPointValue):"arrayValue"in r?function(i){let s="[",l=!0;for(const h of i.values||[])l?l=!1:s+=",",s+=Jd(h);return s+"]"}(r.arrayValue):"mapValue"in r?function(i){const s=Object.keys(i.fields||{}).sort();let l="{",h=!0;for(const d of s)h?h=!1:l+=",",l+=`${d}:${Jd(i.fields[d])}`;return l+"}"}(r.mapValue):_t(61005,{value:r})}function Dc(r){switch(Kr(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=sh(r);return t?16+Dc(t):16;case 5:return 2*r.stringValue.length;case 6:return Qr(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((l,h)=>l+Dc(h),0)}(r.arrayValue);case 10:case 11:return function(s){let l=0;return $r(s.fields,(h,d)=>{l+=h.length+Dc(d)}),l}(r.mapValue);default:throw _t(13486,{value:r})}}function Wd(r){return!!r&&"integerValue"in r}function Om(r){return!!r&&"arrayValue"in r}function cv(r){return!!r&&"nullValue"in r}function hv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Nc(r){return!!r&&"mapValue"in r}function cR(r){return(r?.mapValue?.fields||{})[rE]?.stringValue===sE}function Sl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const t={mapValue:{fields:{}}};return $r(r.mapValue.fields,(i,s)=>t.mapValue.fields[i]=Sl(s)),t}if(r.arrayValue){const t={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)t.arrayValue.values[i]=Sl(r.arrayValue.values[i]);return t}return{...r}}function hR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===uR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t){this.value=t}static empty(){return new mn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let i=this.value;for(let s=0;s<t.length-1;++s)if(i=(i.mapValue.fields||{})[t.get(s)],!Nc(i))return null;return i=(i.mapValue.fields||{})[t.lastSegment()],i||null}}set(t,i){this.getFieldsMap(t.popLast())[t.lastSegment()]=Sl(i)}setAll(t){let i=Ke.emptyPath(),s={},l=[];t.forEach((d,g)=>{if(!i.isImmediateParentOf(g)){const y=this.getFieldsMap(i);this.applyChanges(y,s,l),s={},l=[],i=g.popLast()}d?s[g.lastSegment()]=Sl(d):l.push(g.lastSegment())});const h=this.getFieldsMap(i);this.applyChanges(h,s,l)}delete(t){const i=this.field(t.popLast());Nc(i)&&i.mapValue.fields&&delete i.mapValue.fields[t.lastSegment()]}isEqual(t){return Ei(this.value,t.value)}getFieldsMap(t){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let s=0;s<t.length;++s){let l=i.mapValue.fields[t.get(s)];Nc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[t.get(s)]=l),i=l}return i.mapValue.fields}applyChanges(t,i,s){$r(i,(l,h)=>t[l]=h);for(const l of s)delete t[l]}clone(){return new mn(Sl(this.value))}}function aE(r){const t=[];return $r(r.fields,(i,s)=>{const l=new Ke([i]);if(Nc(s)){const h=aE(s.mapValue).fields;if(h.length===0)t.push(l);else for(const d of h)t.push(l.child(d))}else t.push(l)}),new bn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(t,i,s,l,h,d,g){this.key=t,this.documentType=i,this.version=s,this.readTime=l,this.createTime=h,this.data=d,this.documentState=g}static newInvalidDocument(t){return new en(t,0,St.min(),St.min(),St.min(),mn.empty(),0)}static newFoundDocument(t,i,s,l){return new en(t,1,i,St.min(),s,l,0)}static newNoDocument(t,i){return new en(t,2,i,St.min(),St.min(),mn.empty(),0)}static newUnknownDocument(t,i){return new en(t,3,i,St.min(),St.min(),mn.empty(),2)}convertToFoundDocument(t,i){return!this.createTime.isEqual(St.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=St.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof en&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t,i){this.position=t,this.inclusive=i}}function fv(r,t,i){let s=0;for(let l=0;l<r.position.length;l++){const h=t[l],d=r.position[l];if(h.field.isKeyField()?s=mt.comparator(mt.fromName(d.referenceValue),i.key):s=Xa(d,i.data.field(h.field)),h.dir==="desc"&&(s*=-1),s!==0)break}return s}function dv(r,t){if(r===null)return t===null;if(t===null||r.inclusive!==t.inclusive||r.position.length!==t.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Ei(r.position[i],t.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(t,i="asc"){this.field=t,this.dir=i}}function fR(r,t){return r.dir===t.dir&&r.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{}class Oe extends oE{constructor(t,i,s){super(),this.field=t,this.op=i,this.value=s}static create(t,i,s){return t.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(t,i,s):new mR(t,i,s):i==="array-contains"?new yR(t,s):i==="in"?new _R(t,s):i==="not-in"?new vR(t,s):i==="array-contains-any"?new ER(t,s):new Oe(t,i,s)}static createKeyFieldInFilter(t,i,s){return i==="in"?new gR(t,s):new pR(t,s)}matches(t){const i=t.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(Xa(i,this.value)):i!==null&&Kr(this.value)===Kr(i)&&this.matchesComparison(Xa(i,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return _t(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ti extends oE{constructor(t,i){super(),this.filters=t,this.op=i,this.Pe=null}static create(t,i){return new Ti(t,i)}matches(t){return lE(this)?this.filters.find(i=>!i.matches(t))===void 0:this.filters.find(i=>i.matches(t))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((t,i)=>t.concat(i.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function lE(r){return r.op==="and"}function uE(r){return dR(r)&&lE(r)}function dR(r){for(const t of r.filters)if(t instanceof Ti)return!1;return!0}function tm(r){if(r instanceof Oe)return r.field.canonicalString()+r.op.toString()+$a(r.value);if(uE(r))return r.filters.map(t=>tm(t)).join(",");{const t=r.filters.map(i=>tm(i)).join(",");return`${r.op}(${t})`}}function cE(r,t){return r instanceof Oe?function(s,l){return l instanceof Oe&&s.op===l.op&&s.field.isEqual(l.field)&&Ei(s.value,l.value)}(r,t):r instanceof Ti?function(s,l){return l instanceof Ti&&s.op===l.op&&s.filters.length===l.filters.length?s.filters.reduce((h,d,g)=>h&&cE(d,l.filters[g]),!0):!1}(r,t):void _t(19439)}function hE(r){return r instanceof Oe?function(i){return`${i.field.canonicalString()} ${i.op} ${$a(i.value)}`}(r):r instanceof Ti?function(i){return i.op.toString()+" {"+i.getFilters().map(hE).join(" ,")+"}"}(r):"Filter"}class mR extends Oe{constructor(t,i,s){super(t,i,s),this.key=mt.fromName(s.referenceValue)}matches(t){const i=mt.comparator(t.key,this.key);return this.matchesComparison(i)}}class gR extends Oe{constructor(t,i){super(t,"in",i),this.keys=fE("in",i)}matches(t){return this.keys.some(i=>i.isEqual(t.key))}}class pR extends Oe{constructor(t,i){super(t,"not-in",i),this.keys=fE("not-in",i)}matches(t){return!this.keys.some(i=>i.isEqual(t.key))}}function fE(r,t){return(t.arrayValue?.values||[]).map(i=>mt.fromName(i.referenceValue))}class yR extends Oe{constructor(t,i){super(t,"array-contains",i)}matches(t){const i=t.data.field(this.field);return Om(i)&&Vl(i.arrayValue,this.value)}}class _R extends Oe{constructor(t,i){super(t,"in",i)}matches(t){const i=t.data.field(this.field);return i!==null&&Vl(this.value.arrayValue,i)}}class vR extends Oe{constructor(t,i){super(t,"not-in",i)}matches(t){if(Vl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=t.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Vl(this.value.arrayValue,i)}}class ER extends Oe{constructor(t,i){super(t,"array-contains-any",i)}matches(t){const i=t.data.field(this.field);return!(!Om(i)||!i.arrayValue.values)&&i.arrayValue.values.some(s=>Vl(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(t,i=null,s=[],l=[],h=null,d=null,g=null){this.path=t,this.collectionGroup=i,this.orderBy=s,this.filters=l,this.limit=h,this.startAt=d,this.endAt=g,this.Te=null}}function mv(r,t=null,i=[],s=[],l=null,h=null,d=null){return new TR(r,t,i,s,l,h,d)}function Vm(r){const t=bt(r);if(t.Te===null){let i=t.path.canonicalString();t.collectionGroup!==null&&(i+="|cg:"+t.collectionGroup),i+="|f:",i+=t.filters.map(s=>tm(s)).join(","),i+="|ob:",i+=t.orderBy.map(s=>function(h){return h.field.canonicalString()+h.dir}(s)).join(","),rh(t.limit)||(i+="|l:",i+=t.limit),t.startAt&&(i+="|lb:",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(s=>$a(s)).join(",")),t.endAt&&(i+="|ub:",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(s=>$a(s)).join(",")),t.Te=i}return t.Te}function Mm(r,t){if(r.limit!==t.limit||r.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!fR(r.orderBy[i],t.orderBy[i]))return!1;if(r.filters.length!==t.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!cE(r.filters[i],t.filters[i]))return!1;return r.collectionGroup===t.collectionGroup&&!!r.path.isEqual(t.path)&&!!dv(r.startAt,t.startAt)&&dv(r.endAt,t.endAt)}function em(r){return mt.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,i=null,s=[],l=[],h=null,d="F",g=null,y=null){this.path=t,this.collectionGroup=i,this.explicitOrderBy=s,this.filters=l,this.limit=h,this.limitType=d,this.startAt=g,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function AR(r,t,i,s,l,h,d,g){return new ah(r,t,i,s,l,h,d,g)}function oh(r){return new ah(r)}function gv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function SR(r){return r.collectionGroup!==null}function bl(r){const t=bt(r);if(t.Ie===null){t.Ie=[];const i=new Set;for(const h of t.explicitOrderBy)t.Ie.push(h),i.add(h.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(d){let g=new Ve(Ke.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(_=>{_.isInequality()&&(g=g.add(_.field))})}),g})(t).forEach(h=>{i.has(h.canonicalString())||h.isKeyField()||t.Ie.push(new Qc(h,s))}),i.has(Ke.keyField().canonicalString())||t.Ie.push(new Qc(Ke.keyField(),s))}return t.Ie}function gi(r){const t=bt(r);return t.Ee||(t.Ee=bR(t,bl(r))),t.Ee}function bR(r,t){if(r.limitType==="F")return mv(r.path,r.collectionGroup,t,r.filters,r.limit,r.startAt,r.endAt);{t=t.map(l=>{const h=l.dir==="desc"?"asc":"desc";return new Qc(l.field,h)});const i=r.endAt?new Fc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Fc(r.startAt.position,r.startAt.inclusive):null;return mv(r.path,r.collectionGroup,t,r.filters,r.limit,i,s)}}function nm(r,t,i){return new ah(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),t,i,r.startAt,r.endAt)}function lh(r,t){return Mm(gi(r),gi(t))&&r.limitType===t.limitType}function dE(r){return`${Vm(gi(r))}|lt:${r.limitType}`}function ka(r){return`Query(target=${function(i){let s=i.path.canonicalString();return i.collectionGroup!==null&&(s+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(s+=`, filters: [${i.filters.map(l=>hE(l)).join(", ")}]`),rh(i.limit)||(s+=", limit: "+i.limit),i.orderBy.length>0&&(s+=`, orderBy: [${i.orderBy.map(l=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(l)).join(", ")}]`),i.startAt&&(s+=", startAt: ",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(l=>$a(l)).join(",")),i.endAt&&(s+=", endAt: ",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(l=>$a(l)).join(",")),`Target(${s})`}(gi(r))}; limitType=${r.limitType})`}function uh(r,t){return t.isFoundDocument()&&function(s,l){const h=l.key.path;return s.collectionGroup!==null?l.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(h):mt.isDocumentKey(s.path)?s.path.isEqual(h):s.path.isImmediateParentOf(h)}(r,t)&&function(s,l){for(const h of bl(s))if(!h.field.isKeyField()&&l.data.field(h.field)===null)return!1;return!0}(r,t)&&function(s,l){for(const h of s.filters)if(!h.matches(l))return!1;return!0}(r,t)&&function(s,l){return!(s.startAt&&!function(d,g,y){const _=fv(d,g,y);return d.inclusive?_<=0:_<0}(s.startAt,bl(s),l)||s.endAt&&!function(d,g,y){const _=fv(d,g,y);return d.inclusive?_>=0:_>0}(s.endAt,bl(s),l))}(r,t)}function wR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mE(r){return(t,i)=>{let s=!1;for(const l of bl(r)){const h=RR(l,t,i);if(h!==0)return h;s=s||l.field.isKeyField()}return 0}}function RR(r,t,i){const s=r.field.isKeyField()?mt.comparator(t.key,i.key):function(h,d,g){const y=d.data.field(h),_=g.data.field(h);return y!==null&&_!==null?Xa(y,_):_t(42886)}(r.field,t,i);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return _t(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(t,i){this.mapKeyFn=t,this.equalsFn=i,this.inner={},this.innerSize=0}get(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s!==void 0){for(const[l,h]of s)if(this.equalsFn(l,t))return h}}has(t){return this.get(t)!==void 0}set(t,i){const s=this.mapKeyFn(t),l=this.inner[s];if(l===void 0)return this.inner[s]=[[t,i]],void this.innerSize++;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],t))return void(l[h]=[t,i]);l.push([t,i]),this.innerSize++}delete(t){const i=this.mapKeyFn(t),s=this.inner[i];if(s===void 0)return!1;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],t))return s.length===1?delete this.inner[i]:s.splice(l,1),this.innerSize--,!0;return!1}forEach(t){$r(this.inner,(i,s)=>{for(const[l,h]of s)t(l,h)})}isEmpty(){return J0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IR=new ue(mt.comparator);function er(){return IR}const gE=new ue(mt.comparator);function _l(...r){let t=gE;for(const i of r)t=t.insert(i.key,i);return t}function pE(r){let t=gE;return r.forEach((i,s)=>t=t.insert(i,s.overlayedDocument)),t}function xs(){return wl()}function yE(){return wl()}function wl(){return new Bs(r=>r.toString(),(r,t)=>r.isEqual(t))}const CR=new ue(mt.comparator),DR=new Ve(mt.comparator);function Pt(...r){let t=DR;for(const i of r)t=t.add(i);return t}const NR=new Ve(xt);function OR(){return NR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xm(r,t){if(r.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(t)?"-0":t}}function _E(r){return{integerValue:""+r}}function VR(r,t){return rR(t)?_E(t):xm(r,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(){this._=void 0}}function MR(r,t,i){return r instanceof Kc?function(l,h){const d={fields:{[eE]:{stringValue:tE},[iE]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return h&&Nm(h)&&(h=sh(h)),h&&(d.fields[nE]=h),{mapValue:d}}(i,t):r instanceof Ml?EE(r,t):r instanceof xl?TE(r,t):function(l,h){const d=vE(l,h),g=pv(d)+pv(l.Ae);return Wd(d)&&Wd(l.Ae)?_E(g):xm(l.serializer,g)}(r,t)}function xR(r,t,i){return r instanceof Ml?EE(r,t):r instanceof xl?TE(r,t):i}function vE(r,t){return r instanceof Yc?function(s){return Wd(s)||function(h){return!!h&&"doubleValue"in h}(s)}(t)?t:{integerValue:0}:null}class Kc extends ch{}class Ml extends ch{constructor(t){super(),this.elements=t}}function EE(r,t){const i=AE(t);for(const s of r.elements)i.some(l=>Ei(l,s))||i.push(s);return{arrayValue:{values:i}}}class xl extends ch{constructor(t){super(),this.elements=t}}function TE(r,t){let i=AE(t);for(const s of r.elements)i=i.filter(l=>!Ei(l,s));return{arrayValue:{values:i}}}class Yc extends ch{constructor(t,i){super(),this.serializer=t,this.Ae=i}}function pv(r){return pe(r.integerValue||r.doubleValue)}function AE(r){return Om(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function PR(r,t){return r.field.isEqual(t.field)&&function(s,l){return s instanceof Ml&&l instanceof Ml||s instanceof xl&&l instanceof xl?Ya(s.elements,l.elements,Ei):s instanceof Yc&&l instanceof Yc?Ei(s.Ae,l.Ae):s instanceof Kc&&l instanceof Kc}(r.transform,t.transform)}class kR{constructor(t,i){this.version=t,this.transformResults=i}}class pi{constructor(t,i){this.updateTime=t,this.exists=i}static none(){return new pi}static exists(t){return new pi(void 0,t)}static updateTime(t){return new pi(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Oc(r,t){return r.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(r.updateTime):r.exists===void 0||r.exists===t.isFoundDocument()}class hh{}function SE(r,t){if(!r.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return r.isNoDocument()?new wE(r.key,pi.none()):new Hl(r.key,r.data,pi.none());{const i=r.data,s=mn.empty();let l=new Ve(Ke.comparator);for(let h of t.fields)if(!l.has(h)){let d=i.field(h);d===null&&h.length>1&&(h=h.popLast(),d=i.field(h)),d===null?s.delete(h):s.set(h,d),l=l.add(h)}return new Zr(r.key,s,new bn(l.toArray()),pi.none())}}function UR(r,t,i){r instanceof Hl?function(l,h,d){const g=l.value.clone(),y=_v(l.fieldTransforms,h,d.transformResults);g.setAll(y),h.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(r,t,i):r instanceof Zr?function(l,h,d){if(!Oc(l.precondition,h))return void h.convertToUnknownDocument(d.version);const g=_v(l.fieldTransforms,h,d.transformResults),y=h.data;y.setAll(bE(l)),y.setAll(g),h.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(r,t,i):function(l,h,d){h.convertToNoDocument(d.version).setHasCommittedMutations()}(0,t,i)}function Rl(r,t,i,s){return r instanceof Hl?function(h,d,g,y){if(!Oc(h.precondition,d))return g;const _=h.value.clone(),A=vv(h.fieldTransforms,y,d);return _.setAll(A),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),null}(r,t,i,s):r instanceof Zr?function(h,d,g,y){if(!Oc(h.precondition,d))return g;const _=vv(h.fieldTransforms,y,d),A=d.data;return A.setAll(bE(h)),A.setAll(_),d.convertToFoundDocument(d.version,A).setHasLocalMutations(),g===null?null:g.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(D=>D.field))}(r,t,i,s):function(h,d,g){return Oc(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):g}(r,t,i)}function LR(r,t){let i=null;for(const s of r.fieldTransforms){const l=t.data.field(s.field),h=vE(s.transform,l||null);h!=null&&(i===null&&(i=mn.empty()),i.set(s.field,h))}return i||null}function yv(r,t){return r.type===t.type&&!!r.key.isEqual(t.key)&&!!r.precondition.isEqual(t.precondition)&&!!function(s,l){return s===void 0&&l===void 0||!(!s||!l)&&Ya(s,l,(h,d)=>PR(h,d))}(r.fieldTransforms,t.fieldTransforms)&&(r.type===0?r.value.isEqual(t.value):r.type!==1||r.data.isEqual(t.data)&&r.fieldMask.isEqual(t.fieldMask))}class Hl extends hh{constructor(t,i,s,l=[]){super(),this.key=t,this.value=i,this.precondition=s,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zr extends hh{constructor(t,i,s,l,h=[]){super(),this.key=t,this.data=i,this.fieldMask=s,this.precondition=l,this.fieldTransforms=h,this.type=1}getFieldMask(){return this.fieldMask}}function bE(r){const t=new Map;return r.fieldMask.fields.forEach(i=>{if(!i.isEmpty()){const s=r.data.field(i);t.set(i,s)}}),t}function _v(r,t,i){const s=new Map;Ft(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const h=r[l],d=h.transform,g=t.data.field(h.field);s.set(h.field,xR(d,g,i[l]))}return s}function vv(r,t,i){const s=new Map;for(const l of r){const h=l.transform,d=i.data.field(l.field);s.set(l.field,MR(h,d,t))}return s}class wE extends hh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zR extends hh{constructor(t,i){super(),this.key=t,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(t,i,s,l){this.batchId=t,this.localWriteTime=i,this.baseMutations=s,this.mutations=l}applyToRemoteDocument(t,i){const s=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const h=this.mutations[l];h.key.isEqual(t.key)&&UR(h,t,s[l])}}applyToLocalView(t,i){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(i=Rl(s,t,i,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(i=Rl(s,t,i,this.localWriteTime));return i}applyToLocalDocumentSet(t,i){const s=yE();return this.mutations.forEach(l=>{const h=t.get(l.key),d=h.overlayedDocument;let g=this.applyToLocalView(d,h.mutatedFields);g=i.has(l.key)?null:g;const y=SE(d,g);y!==null&&s.set(l.key,y),d.isValidDocument()||d.convertToNoDocument(St.min())}),s}keys(){return this.mutations.reduce((t,i)=>t.add(i.key),Pt())}isEqual(t){return this.batchId===t.batchId&&Ya(this.mutations,t.mutations,(i,s)=>yv(i,s))&&Ya(this.baseMutations,t.baseMutations,(i,s)=>yv(i,s))}}class Pm{constructor(t,i,s,l){this.batch=t,this.commitVersion=i,this.mutationResults=s,this.docVersions=l}static from(t,i,s){Ft(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let l=function(){return CR}();const h=t.mutations;for(let d=0;d<h.length;d++)l=l.insert(h[d].key,s[d].version);return new Pm(t,i,s,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(t,i){this.largestBatchId=t,this.mutation=i}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(t,i){this.count=t,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,zt;function HR(r){switch(r){case $.OK:return _t(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return _t(15467,{code:r})}}function RE(r){if(r===void 0)return tr("GRPC error has no .code"),$.UNKNOWN;switch(r){case Ae.OK:return $.OK;case Ae.CANCELLED:return $.CANCELLED;case Ae.UNKNOWN:return $.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return $.INTERNAL;case Ae.UNAVAILABLE:return $.UNAVAILABLE;case Ae.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ae.NOT_FOUND:return $.NOT_FOUND;case Ae.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ae.ABORTED:return $.ABORTED;case Ae.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ae.DATA_LOSS:return $.DATA_LOSS;default:return _t(39323,{code:r})}}(zt=Ae||(Ae={}))[zt.OK=0]="OK",zt[zt.CANCELLED=1]="CANCELLED",zt[zt.UNKNOWN=2]="UNKNOWN",zt[zt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",zt[zt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",zt[zt.NOT_FOUND=5]="NOT_FOUND",zt[zt.ALREADY_EXISTS=6]="ALREADY_EXISTS",zt[zt.PERMISSION_DENIED=7]="PERMISSION_DENIED",zt[zt.UNAUTHENTICATED=16]="UNAUTHENTICATED",zt[zt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",zt[zt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",zt[zt.ABORTED=10]="ABORTED",zt[zt.OUT_OF_RANGE=11]="OUT_OF_RANGE",zt[zt.UNIMPLEMENTED=12]="UNIMPLEMENTED",zt[zt.INTERNAL=13]="INTERNAL",zt[zt.UNAVAILABLE=14]="UNAVAILABLE",zt[zt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=new Br([4294967295,4294967295],0);function Ev(r){const t=GR().encode(r),i=new B0;return i.update(t),new Uint8Array(i.digest())}function Tv(r){const t=new DataView(r.buffer),i=t.getUint32(0,!0),s=t.getUint32(4,!0),l=t.getUint32(8,!0),h=t.getUint32(12,!0);return[new Br([i,s],0),new Br([l,h],0)]}class km{constructor(t,i,s){if(this.bitmap=t,this.padding=i,this.hashCount=s,i<0||i>=8)throw new vl(`Invalid padding: ${i}`);if(s<0)throw new vl(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new vl(`Invalid hash count: ${s}`);if(t.length===0&&i!==0)throw new vl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*t.length-i,this.pe=Br.fromNumber(this.ge)}ye(t,i,s){let l=t.add(i.multiply(Br.fromNumber(s)));return l.compare(FR)===1&&(l=new Br([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const i=Ev(t),[s,l]=Tv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);if(!this.we(d))return!1}return!0}static create(t,i,s){const l=t%8==0?0:8-t%8,h=new Uint8Array(Math.ceil(t/8)),d=new km(h,l,i);return s.forEach(g=>d.insert(g)),d}insert(t){if(this.ge===0)return;const i=Ev(t),[s,l]=Tv(i);for(let h=0;h<this.hashCount;h++){const d=this.ye(s,l,h);this.Se(d)}}Se(t){const i=Math.floor(t/8),s=t%8;this.bitmap[i]|=1<<s}}class vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(t,i,s,l,h){this.snapshotVersion=t,this.targetChanges=i,this.targetMismatches=s,this.documentUpdates=l,this.resolvedLimboDocuments=h}static createSynthesizedRemoteEventForCurrentChange(t,i,s){const l=new Map;return l.set(t,Gl.createSynthesizedTargetChangeForCurrentChange(t,i,s)),new fh(St.min(),l,new ue(xt),er(),Pt())}}class Gl{constructor(t,i,s,l,h){this.resumeToken=t,this.current=i,this.addedDocuments=s,this.modifiedDocuments=l,this.removedDocuments=h}static createSynthesizedTargetChangeForCurrentChange(t,i,s){return new Gl(s,i,Pt(),Pt(),Pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(t,i,s,l){this.be=t,this.removedTargetIds=i,this.key=s,this.De=l}}class IE{constructor(t,i){this.targetId=t,this.Ce=i}}class CE{constructor(t,i,s=Ye.EMPTY_BYTE_STRING,l=null){this.state=t,this.targetIds=i,this.resumeToken=s,this.cause=l}}class Av{constructor(){this.ve=0,this.Fe=Sv(),this.Me=Ye.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Pt(),i=Pt(),s=Pt();return this.Fe.forEach((l,h)=>{switch(h){case 0:t=t.add(l);break;case 2:i=i.add(l);break;case 1:s=s.add(l);break;default:_t(38017,{changeType:h})}}),new Gl(this.Me,this.xe,t,i,s)}qe(){this.Oe=!1,this.Fe=Sv()}Qe(t,i){this.Oe=!0,this.Fe=this.Fe.insert(t,i)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ft(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class QR{constructor(t){this.Ge=t,this.ze=new Map,this.je=er(),this.Je=Ec(),this.He=Ec(),this.Ye=new ue(xt)}Ze(t){for(const i of t.be)t.De&&t.De.isFoundDocument()?this.Xe(i,t.De):this.et(i,t.key,t.De);for(const i of t.removedTargetIds)this.et(i,t.key,t.De)}tt(t){this.forEachTarget(t,i=>{const s=this.nt(i);switch(t.state){case 0:this.rt(i)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(i)&&(this.it(i),s.Le(t.resumeToken));break;default:_t(56790,{state:t.state})}})}forEachTarget(t,i){t.targetIds.length>0?t.targetIds.forEach(i):this.ze.forEach((s,l)=>{this.rt(l)&&i(l)})}st(t){const i=t.targetId,s=t.Ce.count,l=this.ot(i);if(l){const h=l.target;if(em(h))if(s===0){const d=new mt(h.path);this.et(i,d,en.newNoDocument(d,St.min()))}else Ft(s===1,20013,{expectedCount:s});else{const d=this._t(i);if(d!==s){const g=this.ut(t),y=g?this.ct(g,t,d):1;if(y!==0){this.it(i);const _=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(t){const i=t.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=i;let d,g;try{d=Qr(s).toUint8Array()}catch(y){if(y instanceof W0)return Ka("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{g=new km(d,l,h)}catch(y){return Ka(y instanceof vl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return g.ge===0?null:g}ct(t,i,s){return i.Ce.count===s-this.Pt(t,i.targetId)?0:2}Pt(t,i){const s=this.Ge.getRemoteKeysForTarget(i);let l=0;return s.forEach(h=>{const d=this.Ge.ht(),g=`projects/${d.projectId}/databases/${d.database}/documents/${h.path.canonicalString()}`;t.mightContain(g)||(this.et(i,h,null),l++)}),l}Tt(t){const i=new Map;this.ze.forEach((h,d)=>{const g=this.ot(d);if(g){if(h.current&&em(g.target)){const y=new mt(g.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,en.newNoDocument(y,t))}h.Be&&(i.set(d,h.ke()),h.qe())}});let s=Pt();this.He.forEach((h,d)=>{let g=!0;d.forEachWhile(y=>{const _=this.ot(y);return!_||_.purpose==="TargetPurposeLimboResolution"||(g=!1,!1)}),g&&(s=s.add(h))}),this.je.forEach((h,d)=>d.setReadTime(t));const l=new fh(t,i,this.Ye,this.je,s);return this.je=er(),this.Je=Ec(),this.He=Ec(),this.Ye=new ue(xt),l}Xe(t,i){if(!this.rt(t))return;const s=this.Et(t,i.key)?2:0;this.nt(t).Qe(i.key,s),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(t)),this.He=this.He.insert(i.key,this.dt(i.key).add(t))}et(t,i,s){if(!this.rt(t))return;const l=this.nt(t);this.Et(t,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(t)),this.He=this.He.insert(i,this.dt(i).add(t)),s&&(this.je=this.je.insert(i,s))}removeTarget(t){this.ze.delete(t)}_t(t){const i=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+i.addedDocuments.size-i.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let i=this.ze.get(t);return i||(i=new Av,this.ze.set(t,i)),i}dt(t){let i=this.He.get(t);return i||(i=new Ve(xt),this.He=this.He.insert(t,i)),i}It(t){let i=this.Je.get(t);return i||(i=new Ve(xt),this.Je=this.Je.insert(t,i)),i}rt(t){const i=this.ot(t)!==null;return i||at("WatchChangeAggregator","Detected inactive target",t),i}ot(t){const i=this.ze.get(t);return i&&i.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Av),this.Ge.getRemoteKeysForTarget(t).forEach(i=>{this.et(t,i,null)})}Et(t,i){return this.Ge.getRemoteKeysForTarget(t).has(i)}}function Ec(){return new ue(mt.comparator)}function Sv(){return new ue(mt.comparator)}const KR={asc:"ASCENDING",desc:"DESCENDING"},YR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},XR={and:"AND",or:"OR"};class $R{constructor(t,i){this.databaseId=t,this.useProto3Json=i}}function im(r,t){return r.useProto3Json||rh(t)?t:{value:t}}function Xc(r,t){return r.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function DE(r,t){return r.useProto3Json?t.toBase64():t.toUint8Array()}function ZR(r,t){return Xc(r,t.toTimestamp())}function yi(r){return Ft(!!r,49232),St.fromTimestamp(function(i){const s=Fr(i);return new ie(s.seconds,s.nanos)}(r))}function Um(r,t){return rm(r,t).canonicalString()}function rm(r,t){const i=function(l){return new ne(["projects",l.projectId,"databases",l.database])}(r).child("documents");return t===void 0?i:i.child(t)}function NE(r){const t=ne.fromString(r);return Ft(PE(t),10190,{key:t.toString()}),t}function sm(r,t){return Um(r.databaseId,t.path)}function Pd(r,t){const i=NE(t);if(i.get(1)!==r.databaseId.projectId)throw new lt($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new lt($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new mt(VE(i))}function OE(r,t){return Um(r.databaseId,t)}function JR(r){const t=NE(r);return t.length===4?ne.emptyPath():VE(t)}function am(r){return new ne(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function VE(r){return Ft(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function bv(r,t,i){return{name:sm(r,t),fields:i.value.mapValue.fields}}function WR(r,t){let i;if("targetChange"in t){t.targetChange;const s=function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:_t(39313,{state:_})}(t.targetChange.targetChangeType||"NO_CHANGE"),l=t.targetChange.targetIds||[],h=function(_,A){return _.useProto3Json?(Ft(A===void 0||typeof A=="string",58123),Ye.fromBase64String(A||"")):(Ft(A===void 0||A instanceof Buffer||A instanceof Uint8Array,16193),Ye.fromUint8Array(A||new Uint8Array))}(r,t.targetChange.resumeToken),d=t.targetChange.cause,g=d&&function(_){const A=_.code===void 0?$.UNKNOWN:RE(_.code);return new lt(A,_.message||"")}(d);i=new CE(s,l,h,g||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const l=Pd(r,s.document.name),h=yi(s.document.updateTime),d=s.document.createTime?yi(s.document.createTime):St.min(),g=new mn({mapValue:{fields:s.document.fields}}),y=en.newFoundDocument(l,h,d,g),_=s.targetIds||[],A=s.removedTargetIds||[];i=new Vc(_,A,y.key,y)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const l=Pd(r,s.document),h=s.readTime?yi(s.readTime):St.min(),d=en.newNoDocument(l,h),g=s.removedTargetIds||[];i=new Vc([],g,d.key,d)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const l=Pd(r,s.document),h=s.removedTargetIds||[];i=new Vc([],h,l,null)}else{if(!("filter"in t))return _t(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:l=0,unchangedNames:h}=s,d=new qR(l,h),g=s.targetId;i=new IE(g,d)}}return i}function tI(r,t){let i;if(t instanceof Hl)i={update:bv(r,t.key,t.value)};else if(t instanceof wE)i={delete:sm(r,t.key)};else if(t instanceof Zr)i={update:bv(r,t.key,t.data),updateMask:uI(t.fieldMask)};else{if(!(t instanceof zR))return _t(16599,{Vt:t.type});i={verify:sm(r,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(s=>function(h,d){const g=d.transform;if(g instanceof Kc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(g instanceof Ml)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:g.elements}};if(g instanceof xl)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:g.elements}};if(g instanceof Yc)return{fieldPath:d.field.canonicalString(),increment:g.Ae};throw _t(20930,{transform:d.transform})}(0,s))),t.precondition.isNone||(i.currentDocument=function(l,h){return h.updateTime!==void 0?{updateTime:ZR(l,h.updateTime)}:h.exists!==void 0?{exists:h.exists}:_t(27497)}(r,t.precondition)),i}function eI(r,t){return r&&r.length>0?(Ft(t!==void 0,14353),r.map(i=>function(l,h){let d=l.updateTime?yi(l.updateTime):yi(h);return d.isEqual(St.min())&&(d=yi(h)),new kR(d,l.transformResults||[])}(i,t))):[]}function nI(r,t){return{documents:[OE(r,t.path)]}}function iI(r,t){const i={structuredQuery:{}},s=t.path;let l;t.collectionGroup!==null?(l=s,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(l=s.popLast(),i.structuredQuery.from=[{collectionId:s.lastSegment()}]),i.parent=OE(r,l);const h=function(_){if(_.length!==0)return xE(Ti.create(_,"and"))}(t.filters);h&&(i.structuredQuery.where=h);const d=function(_){if(_.length!==0)return _.map(A=>function(I){return{field:Ua(I.field),direction:aI(I.dir)}}(A))}(t.orderBy);d&&(i.structuredQuery.orderBy=d);const g=im(r,t.limit);return g!==null&&(i.structuredQuery.limit=g),t.startAt&&(i.structuredQuery.startAt=function(_){return{before:_.inclusive,values:_.position}}(t.startAt)),t.endAt&&(i.structuredQuery.endAt=function(_){return{before:!_.inclusive,values:_.position}}(t.endAt)),{ft:i,parent:l}}function rI(r){let t=JR(r.parent);const i=r.structuredQuery,s=i.from?i.from.length:0;let l=null;if(s>0){Ft(s===1,65062);const A=i.from[0];A.allDescendants?l=A.collectionId:t=t.child(A.collectionId)}let h=[];i.where&&(h=function(D){const I=ME(D);return I instanceof Ti&&uE(I)?I.getFilters():[I]}(i.where));let d=[];i.orderBy&&(d=function(D){return D.map(I=>function(Z){return new Qc(La(Z.field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Z.direction))}(I))}(i.orderBy));let g=null;i.limit&&(g=function(D){let I;return I=typeof D=="object"?D.value:D,rh(I)?null:I}(i.limit));let y=null;i.startAt&&(y=function(D){const I=!!D.before,H=D.values||[];return new Fc(H,I)}(i.startAt));let _=null;return i.endAt&&(_=function(D){const I=!D.before,H=D.values||[];return new Fc(H,I)}(i.endAt)),AR(t,l,d,h,g,"F",y,_)}function sI(r,t){const i=function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _t(28987,{purpose:l})}}(t.purpose);return i==null?null:{"goog-listen-tags":i}}function ME(r){return r.unaryFilter!==void 0?function(i){switch(i.unaryFilter.op){case"IS_NAN":const s=La(i.unaryFilter.field);return Oe.create(s,"==",{doubleValue:NaN});case"IS_NULL":const l=La(i.unaryFilter.field);return Oe.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const h=La(i.unaryFilter.field);return Oe.create(h,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=La(i.unaryFilter.field);return Oe.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _t(61313);default:return _t(60726)}}(r):r.fieldFilter!==void 0?function(i){return Oe.create(La(i.fieldFilter.field),function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _t(58110);default:return _t(50506)}}(i.fieldFilter.op),i.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(i){return Ti.create(i.compositeFilter.filters.map(s=>ME(s)),function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return _t(1026)}}(i.compositeFilter.op))}(r):_t(30097,{filter:r})}function aI(r){return KR[r]}function oI(r){return YR[r]}function lI(r){return XR[r]}function Ua(r){return{fieldPath:r.canonicalString()}}function La(r){return Ke.fromServerFormat(r.fieldPath)}function xE(r){return r instanceof Oe?function(i){if(i.op==="=="){if(hv(i.value))return{unaryFilter:{field:Ua(i.field),op:"IS_NAN"}};if(cv(i.value))return{unaryFilter:{field:Ua(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(hv(i.value))return{unaryFilter:{field:Ua(i.field),op:"IS_NOT_NAN"}};if(cv(i.value))return{unaryFilter:{field:Ua(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ua(i.field),op:oI(i.op),value:i.value}}}(r):r instanceof Ti?function(i){const s=i.getFilters().map(l=>xE(l));return s.length===1?s[0]:{compositeFilter:{op:lI(i.op),filters:s}}}(r):_t(54877,{filter:r})}function uI(r){const t=[];return r.fields.forEach(i=>t.push(i.canonicalString())),{fieldPaths:t}}function PE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t,i,s,l,h=St.min(),d=St.min(),g=Ye.EMPTY_BYTE_STRING,y=null){this.target=t,this.targetId=i,this.purpose=s,this.sequenceNumber=l,this.snapshotVersion=h,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g,this.expectedCount=y}withSequenceNumber(t){return new Ur(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,i){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(t){this.yt=t}}function hI(r){const t=rI({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?nm(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(){this.Cn=new dI}addToCollectionParentIndex(t,i){return this.Cn.add(i),Y.resolve()}getCollectionParents(t,i){return Y.resolve(this.Cn.getEntries(i))}addFieldIndex(t,i){return Y.resolve()}deleteFieldIndex(t,i){return Y.resolve()}deleteAllFieldIndexes(t){return Y.resolve()}createTargetIndexes(t,i){return Y.resolve()}getDocumentsMatchingTarget(t,i){return Y.resolve(null)}getIndexType(t,i){return Y.resolve(0)}getFieldIndexes(t,i){return Y.resolve([])}getNextCollectionGroupToUpdate(t){return Y.resolve(null)}getMinOffset(t,i){return Y.resolve(Gr.min())}getMinOffsetFromCollectionGroup(t,i){return Y.resolve(Gr.min())}updateCollectionGroup(t,i,s){return Y.resolve()}updateIndexEntries(t,i){return Y.resolve()}}class dI{constructor(){this.index={}}add(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i]||new Ve(ne.comparator),h=!l.has(s);return this.index[i]=l.add(s),h}has(t){const i=t.lastSegment(),s=t.popLast(),l=this.index[i];return l&&l.has(s)}getEntries(t){return(this.index[t]||new Ve(ne.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kE=41943040;class dn{static withCacheSize(t){return new dn(t,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,i,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dn.DEFAULT_COLLECTION_PERCENTILE=10,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dn.DEFAULT=new dn(kE,dn.DEFAULT_COLLECTION_PERCENTILE,dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dn.DISABLED=new dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Za(0)}static cr(){return new Za(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="LruGarbageCollector",mI=1048576;function Iv([r,t],[i,s]){const l=xt(r,i);return l===0?xt(t,s):l}class gI{constructor(t){this.Ir=t,this.buffer=new Ve(Iv),this.Er=0}dr(){return++this.Er}Ar(t){const i=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const s=this.buffer.last();Iv(i,s)<0&&(this.buffer=this.buffer.delete(s).add(i))}}get maxValue(){return this.buffer.last()[0]}}class pI{constructor(t,i,s){this.garbageCollector=t,this.asyncQueue=i,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){at(Rv,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){so(i)?at(Rv,"Ignoring IndexedDB error during garbage collection: ",i):await ro(i)}await this.Vr(3e5)})}}class yI{constructor(t,i){this.mr=t,this.params=i}calculateTargetCount(t,i){return this.mr.gr(t).next(s=>Math.floor(i/100*s))}nthSequenceNumber(t,i){if(i===0)return Y.resolve(ih.ce);const s=new gI(i);return this.mr.forEachTarget(t,l=>s.Ar(l.sequenceNumber)).next(()=>this.mr.pr(t,l=>s.Ar(l))).next(()=>s.maxValue)}removeTargets(t,i,s){return this.mr.removeTargets(t,i,s)}removeOrphanedDocuments(t,i){return this.mr.removeOrphanedDocuments(t,i)}collect(t,i){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(wv)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wv):this.yr(t,i))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,i){let s,l,h,d,g,y,_;const A=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),l=this.params.maximumSequenceNumbersToCollect):l=D,d=Date.now(),this.nthSequenceNumber(t,l))).next(D=>(s=D,g=Date.now(),this.removeTargets(t,s,i))).next(D=>(h=D,y=Date.now(),this.removeOrphanedDocuments(t,s))).next(D=>(_=Date.now(),Pa()<=Mt.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-A}ms
	Determined least recently used ${l} in `+(g-d)+`ms
	Removed ${h} targets in `+(y-g)+`ms
	Removed ${D} documents in `+(_-y)+`ms
Total Duration: ${_-A}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:h,documentsRemoved:D})))}}function _I(r,t){return new yI(r,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(){this.changes=new Bs(t=>t.toString(),(t,i)=>t.isEqual(i)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,i){this.assertNotApplied(),this.changes.set(t,en.newInvalidDocument(t).setReadTime(i))}getEntry(t,i){this.assertNotApplied();const s=this.changes.get(i);return s!==void 0?Y.resolve(s):this.getFromCache(t,i)}getEntries(t,i){return this.getAllFromCache(t,i)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(t,i){this.overlayedDocument=t,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,i,s,l){this.remoteDocumentCache=t,this.mutationQueue=i,this.documentOverlayCache=s,this.indexManager=l}getDocument(t,i){let s=null;return this.documentOverlayCache.getOverlay(t,i).next(l=>(s=l,this.remoteDocumentCache.getEntry(t,i))).next(l=>(s!==null&&Rl(s.mutation,l,bn.empty(),ie.now()),l))}getDocuments(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.getLocalViewOfDocuments(t,s,Pt()).next(()=>s))}getLocalViewOfDocuments(t,i,s=Pt()){const l=xs();return this.populateOverlays(t,l,i).next(()=>this.computeViews(t,i,l,s).next(h=>{let d=_l();return h.forEach((g,y)=>{d=d.insert(g,y.overlayedDocument)}),d}))}getOverlayedDocuments(t,i){const s=xs();return this.populateOverlays(t,s,i).next(()=>this.computeViews(t,i,s,Pt()))}populateOverlays(t,i,s){const l=[];return s.forEach(h=>{i.has(h)||l.push(h)}),this.documentOverlayCache.getOverlays(t,l).next(h=>{h.forEach((d,g)=>{i.set(d,g)})})}computeViews(t,i,s,l){let h=er();const d=wl(),g=function(){return wl()}();return i.forEach((y,_)=>{const A=s.get(_.key);l.has(_.key)&&(A===void 0||A.mutation instanceof Zr)?h=h.insert(_.key,_):A!==void 0?(d.set(_.key,A.mutation.getFieldMask()),Rl(A.mutation,_,A.mutation.getFieldMask(),ie.now())):d.set(_.key,bn.empty())}),this.recalculateAndSaveOverlays(t,h).next(y=>(y.forEach((_,A)=>d.set(_,A)),i.forEach((_,A)=>g.set(_,new EI(A,d.get(_)??null))),g))}recalculateAndSaveOverlays(t,i){const s=wl();let l=new ue((d,g)=>d-g),h=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,i).next(d=>{for(const g of d)g.keys().forEach(y=>{const _=i.get(y);if(_===null)return;let A=s.get(y)||bn.empty();A=g.applyToLocalView(_,A),s.set(y,A);const D=(l.get(g.batchId)||Pt()).add(y);l=l.insert(g.batchId,D)})}).next(()=>{const d=[],g=l.getReverseIterator();for(;g.hasNext();){const y=g.getNext(),_=y.key,A=y.value,D=yE();A.forEach(I=>{if(!h.has(I)){const H=SE(i.get(I),s.get(I));H!==null&&D.set(I,H),h=h.add(I)}}),d.push(this.documentOverlayCache.saveOverlays(t,_,D))}return Y.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,i){return this.remoteDocumentCache.getEntries(t,i).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,i,s,l){return function(d){return mt.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(i)?this.getDocumentsMatchingDocumentQuery(t,i.path):SR(i)?this.getDocumentsMatchingCollectionGroupQuery(t,i,s,l):this.getDocumentsMatchingCollectionQuery(t,i,s,l)}getNextDocuments(t,i,s,l){return this.remoteDocumentCache.getAllFromCollectionGroup(t,i,s,l).next(h=>{const d=l-h.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,i,s.largestBatchId,l-h.size):Y.resolve(xs());let g=Dl,y=h;return d.next(_=>Y.forEach(_,(A,D)=>(g<D.largestBatchId&&(g=D.largestBatchId),h.get(A)?Y.resolve():this.remoteDocumentCache.getEntry(t,A).next(I=>{y=y.insert(A,I)}))).next(()=>this.populateOverlays(t,_,h)).next(()=>this.computeViews(t,y,_,Pt())).next(A=>({batchId:g,changes:pE(A)})))})}getDocumentsMatchingDocumentQuery(t,i){return this.getDocument(t,new mt(i)).next(s=>{let l=_l();return s.isFoundDocument()&&(l=l.insert(s.key,s)),l})}getDocumentsMatchingCollectionGroupQuery(t,i,s,l){const h=i.collectionGroup;let d=_l();return this.indexManager.getCollectionParents(t,h).next(g=>Y.forEach(g,y=>{const _=function(D,I){return new ah(I,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)}(i,y.child(h));return this.getDocumentsMatchingCollectionQuery(t,_,s,l).next(A=>{A.forEach((D,I)=>{d=d.insert(D,I)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(t,i,s,l){let h;return this.documentOverlayCache.getOverlaysForCollection(t,i.path,s.largestBatchId).next(d=>(h=d,this.remoteDocumentCache.getDocumentsMatchingQuery(t,i,s,h,l))).next(d=>{h.forEach((y,_)=>{const A=_.getKey();d.get(A)===null&&(d=d.insert(A,en.newInvalidDocument(A)))});let g=_l();return d.forEach((y,_)=>{const A=h.get(y);A!==void 0&&Rl(A.mutation,_,bn.empty(),ie.now()),uh(i,_)&&(g=g.insert(y,_))}),g})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,i){return Y.resolve(this.Lr.get(i))}saveBundleMetadata(t,i){return this.Lr.set(i.id,function(l){return{id:l.id,version:l.version,createTime:yi(l.createTime)}}(i)),Y.resolve()}getNamedQuery(t,i){return Y.resolve(this.kr.get(i))}saveNamedQuery(t,i){return this.kr.set(i.name,function(l){return{name:l.name,query:hI(l.bundledQuery),readTime:yi(l.readTime)}}(i)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.overlays=new ue(mt.comparator),this.qr=new Map}getOverlay(t,i){return Y.resolve(this.overlays.get(i))}getOverlays(t,i){const s=xs();return Y.forEach(i,l=>this.getOverlay(t,l).next(h=>{h!==null&&s.set(l,h)})).next(()=>s)}saveOverlays(t,i,s){return s.forEach((l,h)=>{this.St(t,i,h)}),Y.resolve()}removeOverlaysForBatchId(t,i,s){const l=this.qr.get(s);return l!==void 0&&(l.forEach(h=>this.overlays=this.overlays.remove(h)),this.qr.delete(s)),Y.resolve()}getOverlaysForCollection(t,i,s){const l=xs(),h=i.length+1,d=new mt(i.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const y=g.getNext().value,_=y.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===h&&y.largestBatchId>s&&l.set(y.getKey(),y)}return Y.resolve(l)}getOverlaysForCollectionGroup(t,i,s,l){let h=new ue((_,A)=>_-A);const d=this.overlays.getIterator();for(;d.hasNext();){const _=d.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>s){let A=h.get(_.largestBatchId);A===null&&(A=xs(),h=h.insert(_.largestBatchId,A)),A.set(_.getKey(),_)}}const g=xs(),y=h.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((_,A)=>g.set(_,A)),!(g.size()>=l)););return Y.resolve(g)}St(t,i,s){const l=this.overlays.get(s.key);if(l!==null){const d=this.qr.get(l.largestBatchId).delete(s.key);this.qr.set(l.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new BR(i,s));let h=this.qr.get(i);h===void 0&&(h=Pt(),this.qr.set(i,h)),this.qr.set(i,h.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(t){return Y.resolve(this.sessionToken)}setSessionToken(t,i){return this.sessionToken=i,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.Qr=new Ve(je.$r),this.Ur=new Ve(je.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,i){const s=new je(t,i);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,i){t.forEach(s=>this.addReference(s,i))}removeReference(t,i){this.Gr(new je(t,i))}zr(t,i){t.forEach(s=>this.removeReference(s,i))}jr(t){const i=new mt(new ne([])),s=new je(i,t),l=new je(i,t+1),h=[];return this.Ur.forEachInRange([s,l],d=>{this.Gr(d),h.push(d.key)}),h}Jr(){this.Qr.forEach(t=>this.Gr(t))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const i=new mt(new ne([])),s=new je(i,t),l=new je(i,t+1);let h=Pt();return this.Ur.forEachInRange([s,l],d=>{h=h.add(d.key)}),h}containsKey(t){const i=new je(t,0),s=this.Qr.firstAfterOrEqual(i);return s!==null&&t.isEqual(s.key)}}class je{constructor(t,i){this.key=t,this.Yr=i}static $r(t,i){return mt.comparator(t.key,i.key)||xt(t.Yr,i.Yr)}static Kr(t,i){return xt(t.Yr,i.Yr)||mt.comparator(t.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,i){this.indexManager=t,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Ve(je.$r)}checkEmpty(t){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(t,i,s,l){const h=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new jR(h,i,s,l);this.mutationQueue.push(d);for(const g of l)this.Zr=this.Zr.add(new je(g.key,h)),this.indexManager.addToCollectionParentIndex(t,g.key.path.popLast());return Y.resolve(d)}lookupMutationBatch(t,i){return Y.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(t,i){const s=i+1,l=this.ei(s),h=l<0?0:l;return Y.resolve(this.mutationQueue.length>h?this.mutationQueue[h]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Dm:this.tr-1)}getAllMutationBatches(t){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,i){const s=new je(i,0),l=new je(i,Number.POSITIVE_INFINITY),h=[];return this.Zr.forEachInRange([s,l],d=>{const g=this.Xr(d.Yr);h.push(g)}),Y.resolve(h)}getAllMutationBatchesAffectingDocumentKeys(t,i){let s=new Ve(xt);return i.forEach(l=>{const h=new je(l,0),d=new je(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([h,d],g=>{s=s.add(g.Yr)})}),Y.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,i){const s=i.path,l=s.length+1;let h=s;mt.isDocumentKey(h)||(h=h.child(""));const d=new je(new mt(h),0);let g=new Ve(xt);return this.Zr.forEachWhile(y=>{const _=y.key.path;return!!s.isPrefixOf(_)&&(_.length===l&&(g=g.add(y.Yr)),!0)},d),Y.resolve(this.ti(g))}ti(t){const i=[];return t.forEach(s=>{const l=this.Xr(s);l!==null&&i.push(l)}),i}removeMutationBatch(t,i){Ft(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return Y.forEach(i.mutations,l=>{const h=new je(l.key,i.batchId);return s=s.delete(h),this.referenceDelegate.markPotentiallyOrphaned(t,l.key)}).next(()=>{this.Zr=s})}ir(t){}containsKey(t,i){const s=new je(i,0),l=this.Zr.firstAfterOrEqual(s);return Y.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(t){return this.mutationQueue.length,Y.resolve()}ni(t,i){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const i=this.ei(t);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(t){this.ri=t,this.docs=function(){return new ue(mt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,i){const s=i.key,l=this.docs.get(s),h=l?l.size:0,d=this.ri(i);return this.docs=this.docs.insert(s,{document:i.mutableCopy(),size:d}),this.size+=d-h,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const i=this.docs.get(t);i&&(this.docs=this.docs.remove(t),this.size-=i.size)}getEntry(t,i){const s=this.docs.get(i);return Y.resolve(s?s.document.mutableCopy():en.newInvalidDocument(i))}getEntries(t,i){let s=er();return i.forEach(l=>{const h=this.docs.get(l);s=s.insert(l,h?h.document.mutableCopy():en.newInvalidDocument(l))}),Y.resolve(s)}getDocumentsMatchingQuery(t,i,s,l){let h=er();const d=i.path,g=new mt(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(g);for(;y.hasNext();){const{key:_,value:{document:A}}=y.getNext();if(!d.isPrefixOf(_.path))break;_.path.length>d.length+1||tR(Ww(A),s)<=0||(l.has(A.key)||uh(i,A))&&(h=h.insert(A.key,A.mutableCopy()))}return Y.resolve(h)}getAllFromCollectionGroup(t,i,s,l){_t(9500)}ii(t,i){return Y.forEach(this.docs,s=>i(s))}newChangeBuffer(t){return new II(this)}getSize(t){return Y.resolve(this.size)}}class II extends vI{constructor(t){super(),this.Nr=t}applyChanges(t){const i=[];return this.changes.forEach((s,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(t,l)):this.Nr.removeEntry(s)}),Y.waitFor(i)}getFromCache(t,i){return this.Nr.getEntry(t,i)}getAllFromCache(t,i){return this.Nr.getEntries(t,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(t){this.persistence=t,this.si=new Bs(i=>Vm(i),Mm),this.lastRemoteSnapshotVersion=St.min(),this.highestTargetId=0,this.oi=0,this._i=new Lm,this.targetCount=0,this.ai=Za.ur()}forEachTarget(t,i){return this.si.forEach((s,l)=>i(l)),Y.resolve()}getLastRemoteSnapshotVersion(t){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Y.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(t,i,s){return s&&(this.lastRemoteSnapshotVersion=s),i>this.oi&&(this.oi=i),Y.resolve()}Pr(t){this.si.set(t.target,t);const i=t.targetId;i>this.highestTargetId&&(this.ai=new Za(i),this.highestTargetId=i),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,i){return this.Pr(i),this.targetCount+=1,Y.resolve()}updateTargetData(t,i){return this.Pr(i),Y.resolve()}removeTargetData(t,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,Y.resolve()}removeTargets(t,i,s){let l=0;const h=[];return this.si.forEach((d,g)=>{g.sequenceNumber<=i&&s.get(g.targetId)===null&&(this.si.delete(d),h.push(this.removeMatchingKeysForTargetId(t,g.targetId)),l++)}),Y.waitFor(h).next(()=>l)}getTargetCount(t){return Y.resolve(this.targetCount)}getTargetData(t,i){const s=this.si.get(i)||null;return Y.resolve(s)}addMatchingKeys(t,i,s){return this._i.Wr(i,s),Y.resolve()}removeMatchingKeys(t,i,s){this._i.zr(i,s);const l=this.persistence.referenceDelegate,h=[];return l&&i.forEach(d=>{h.push(l.markPotentiallyOrphaned(t,d))}),Y.waitFor(h)}removeMatchingKeysForTargetId(t,i){return this._i.jr(i),Y.resolve()}getMatchingKeysForTargetId(t,i){const s=this._i.Hr(i);return Y.resolve(s)}containsKey(t,i){return Y.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t,i){this.ui={},this.overlays={},this.ci=new ih(0),this.li=!1,this.li=!0,this.hi=new bI,this.referenceDelegate=t(this),this.Pi=new CI(this),this.indexManager=new fI,this.remoteDocumentCache=function(l){return new RI(l)}(s=>this.referenceDelegate.Ti(s)),this.serializer=new cI(i),this.Ii=new AI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let i=this.overlays[t.toKey()];return i||(i=new SI,this.overlays[t.toKey()]=i),i}getMutationQueue(t,i){let s=this.ui[t.toKey()];return s||(s=new wI(i,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,i,s){at("MemoryPersistence","Starting transaction:",t);const l=new DI(this.ci.next());return this.referenceDelegate.Ei(),s(l).next(h=>this.referenceDelegate.di(l).next(()=>h)).toPromise().then(h=>(l.raiseOnCommittedEvent(),h))}Ai(t,i){return Y.or(Object.values(this.ui).map(s=>()=>s.containsKey(t,i)))}}class DI extends nR{constructor(t){super(),this.currentSequenceNumber=t}}class zm{constructor(t){this.persistence=t,this.Ri=new Lm,this.Vi=null}static mi(t){return new zm(t)}get fi(){if(this.Vi)return this.Vi;throw _t(60996)}addReference(t,i,s){return this.Ri.addReference(s,i),this.fi.delete(s.toString()),Y.resolve()}removeReference(t,i,s){return this.Ri.removeReference(s,i),this.fi.add(s.toString()),Y.resolve()}markPotentiallyOrphaned(t,i){return this.fi.add(i.toString()),Y.resolve()}removeTarget(t,i){this.Ri.jr(i.targetId).forEach(l=>this.fi.add(l.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,i.targetId).next(l=>{l.forEach(h=>this.fi.add(h.toString()))}).next(()=>s.removeTargetData(t,i))}Ei(){this.Vi=new Set}di(t){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.fi,s=>{const l=mt.fromPath(s);return this.gi(t,l).next(h=>{h||i.removeEntry(l,St.min())})}).next(()=>(this.Vi=null,i.apply(t)))}updateLimboDocument(t,i){return this.gi(t,i).next(s=>{s?this.fi.delete(i.toString()):this.fi.add(i.toString())})}Ti(t){return 0}gi(t,i){return Y.or([()=>Y.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(t,i),()=>this.persistence.Ai(t,i)])}}class $c{constructor(t,i){this.persistence=t,this.pi=new Bs(s=>sR(s.path),(s,l)=>s.isEqual(l)),this.garbageCollector=_I(this,i)}static mi(t,i){return new $c(t,i)}Ei(){}di(t){return Y.resolve()}forEachTarget(t,i){return this.persistence.getTargetCache().forEachTarget(t,i)}gr(t){const i=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>i.next(l=>s+l))}wr(t){let i=0;return this.pr(t,s=>{i++}).next(()=>i)}pr(t,i){return Y.forEach(this.pi,(s,l)=>this.br(t,s,l).next(h=>h?Y.resolve():i(l)))}removeTargets(t,i,s){return this.persistence.getTargetCache().removeTargets(t,i,s)}removeOrphanedDocuments(t,i){let s=0;const l=this.persistence.getRemoteDocumentCache(),h=l.newChangeBuffer();return l.ii(t,d=>this.br(t,d,i).next(g=>{g||(s++,h.removeEntry(d,St.min()))})).next(()=>h.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}removeTarget(t,i){const s=i.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}removeReference(t,i,s){return this.pi.set(s,t.currentSequenceNumber),Y.resolve()}updateLimboDocument(t,i){return this.pi.set(i,t.currentSequenceNumber),Y.resolve()}Ti(t){let i=t.key.toString().length;return t.isFoundDocument()&&(i+=Dc(t.data.value)),i}br(t,i,s){return Y.or([()=>this.persistence.Ai(t,i),()=>this.persistence.getTargetCache().containsKey(t,i),()=>{const l=this.pi.get(i);return Y.resolve(l!==void 0&&l>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,i,s,l){this.targetId=t,this.fromCache=i,this.Es=s,this.ds=l}static As(t,i){let s=Pt(),l=Pt();for(const h of i.docChanges)switch(h.type){case 0:s=s.add(h.doc.key);break;case 1:l=l.add(h.doc.key)}return new jm(t,i.fromCache,s,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vS()?8:iR(nn())>0?6:4}()}initialize(t,i){this.ps=t,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(t,i,s,l){const h={result:null};return this.ys(t,i).next(d=>{h.result=d}).next(()=>{if(!h.result)return this.ws(t,i,l,s).next(d=>{h.result=d})}).next(()=>{if(h.result)return;const d=new NI;return this.Ss(t,i,d).next(g=>{if(h.result=g,this.Vs)return this.bs(t,i,d,g.size)})}).next(()=>h.result)}bs(t,i,s,l){return s.documentReadCount<this.fs?(Pa()<=Mt.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",ka(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Y.resolve()):(Pa()<=Mt.DEBUG&&at("QueryEngine","Query:",ka(i),"scans",s.documentReadCount,"local documents and returns",l,"documents as results."),s.documentReadCount>this.gs*l?(Pa()<=Mt.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",ka(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,gi(i))):Y.resolve())}ys(t,i){if(gv(i))return Y.resolve(null);let s=gi(i);return this.indexManager.getIndexType(t,s).next(l=>l===0?null:(i.limit!==null&&l===1&&(i=nm(i,null,"F"),s=gi(i)),this.indexManager.getDocumentsMatchingTarget(t,s).next(h=>{const d=Pt(...h);return this.ps.getDocuments(t,d).next(g=>this.indexManager.getMinOffset(t,s).next(y=>{const _=this.Ds(i,g);return this.Cs(i,_,d,y.readTime)?this.ys(t,nm(i,null,"F")):this.vs(t,_,i,y)}))})))}ws(t,i,s,l){return gv(i)||l.isEqual(St.min())?Y.resolve(null):this.ps.getDocuments(t,s).next(h=>{const d=this.Ds(i,h);return this.Cs(i,d,s,l)?Y.resolve(null):(Pa()<=Mt.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),ka(i)),this.vs(t,d,i,Jw(l,Dl)).next(g=>g))})}Ds(t,i){let s=new Ve(mE(t));return i.forEach((l,h)=>{uh(t,h)&&(s=s.add(h))}),s}Cs(t,i,s,l){if(t.limit===null)return!1;if(s.size!==i.size)return!0;const h=t.limitType==="F"?i.last():i.first();return!!h&&(h.hasPendingWrites||h.version.compareTo(l)>0)}Ss(t,i,s){return Pa()<=Mt.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",ka(i)),this.ps.getDocumentsMatchingQuery(t,i,Gr.min(),s)}vs(t,i,s,l){return this.ps.getDocumentsMatchingQuery(t,s,l).next(h=>(i.forEach(d=>{h=h.insert(d.key,d)}),h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LocalStore",VI=3e8;class MI{constructor(t,i,s,l){this.persistence=t,this.Fs=i,this.serializer=l,this.Ms=new ue(xt),this.xs=new Bs(h=>Vm(h),Mm),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new TI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",i=>t.collect(i,this.Ms))}}function xI(r,t,i,s){return new MI(r,t,i,s)}async function LE(r,t){const i=bt(r);return await i.persistence.runTransaction("Handle user change","readonly",s=>{let l;return i.mutationQueue.getAllMutationBatches(s).next(h=>(l=h,i.Bs(t),i.mutationQueue.getAllMutationBatches(s))).next(h=>{const d=[],g=[];let y=Pt();for(const _ of l){d.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}for(const _ of h){g.push(_.batchId);for(const A of _.mutations)y=y.add(A.key)}return i.localDocuments.getDocuments(s,y).next(_=>({Ls:_,removedBatchIds:d,addedBatchIds:g}))})})}function PI(r,t){const i=bt(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const l=t.batch.keys(),h=i.Ns.newChangeBuffer({trackRemovals:!0});return function(g,y,_,A){const D=_.batch,I=D.keys();let H=Y.resolve();return I.forEach(Z=>{H=H.next(()=>A.getEntry(y,Z)).next(rt=>{const J=_.docVersions.get(Z);Ft(J!==null,48541),rt.version.compareTo(J)<0&&(D.applyToRemoteDocument(rt,_),rt.isValidDocument()&&(rt.setReadTime(_.commitVersion),A.addEntry(rt)))})}),H.next(()=>g.mutationQueue.removeMutationBatch(y,D))}(i,s,t,h).next(()=>h.apply(s)).next(()=>i.mutationQueue.performConsistencyCheck(s)).next(()=>i.documentOverlayCache.removeOverlaysForBatchId(s,l,t.batch.batchId)).next(()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(g){let y=Pt();for(let _=0;_<g.mutationResults.length;++_)g.mutationResults[_].transformResults.length>0&&(y=y.add(g.batch.mutations[_].key));return y}(t))).next(()=>i.localDocuments.getDocuments(s,l))})}function zE(r){const t=bt(r);return t.persistence.runTransaction("Get last remote snapshot version","readonly",i=>t.Pi.getLastRemoteSnapshotVersion(i))}function kI(r,t){const i=bt(r),s=t.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",h=>{const d=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const g=[];t.targetChanges.forEach((A,D)=>{const I=l.get(D);if(!I)return;g.push(i.Pi.removeMatchingKeys(h,A.removedDocuments,D).next(()=>i.Pi.addMatchingKeys(h,A.addedDocuments,D)));let H=I.withSequenceNumber(h.currentSequenceNumber);t.targetMismatches.get(D)!==null?H=H.withResumeToken(Ye.EMPTY_BYTE_STRING,St.min()).withLastLimboFreeSnapshotVersion(St.min()):A.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(A.resumeToken,s)),l=l.insert(D,H),function(rt,J,gt){return rt.resumeToken.approximateByteSize()===0||J.snapshotVersion.toMicroseconds()-rt.snapshotVersion.toMicroseconds()>=VI?!0:gt.addedDocuments.size+gt.modifiedDocuments.size+gt.removedDocuments.size>0}(I,H,A)&&g.push(i.Pi.updateTargetData(h,H))});let y=er(),_=Pt();if(t.documentUpdates.forEach(A=>{t.resolvedLimboDocuments.has(A)&&g.push(i.persistence.referenceDelegate.updateLimboDocument(h,A))}),g.push(UI(h,d,t.documentUpdates).next(A=>{y=A.ks,_=A.qs})),!s.isEqual(St.min())){const A=i.Pi.getLastRemoteSnapshotVersion(h).next(D=>i.Pi.setTargetsMetadata(h,h.currentSequenceNumber,s));g.push(A)}return Y.waitFor(g).next(()=>d.apply(h)).next(()=>i.localDocuments.getLocalViewOfDocuments(h,y,_)).next(()=>y)}).then(h=>(i.Ms=l,h))}function UI(r,t,i){let s=Pt(),l=Pt();return i.forEach(h=>s=s.add(h)),t.getEntries(r,s).next(h=>{let d=er();return i.forEach((g,y)=>{const _=h.get(g);y.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(g)),y.isNoDocument()&&y.version.isEqual(St.min())?(t.removeEntry(g,y.readTime),d=d.insert(g,y)):!_.isValidDocument()||y.version.compareTo(_.version)>0||y.version.compareTo(_.version)===0&&_.hasPendingWrites?(t.addEntry(y),d=d.insert(g,y)):at(Bm,"Ignoring outdated watch update for ",g,". Current version:",_.version," Watch version:",y.version)}),{ks:d,qs:l}})}function LI(r,t){const i=bt(r);return i.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=Dm),i.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}function zI(r,t){const i=bt(r);return i.persistence.runTransaction("Allocate target","readwrite",s=>{let l;return i.Pi.getTargetData(s,t).next(h=>h?(l=h,Y.resolve(l)):i.Pi.allocateTargetId(s).next(d=>(l=new Ur(t,d,"TargetPurposeListen",s.currentSequenceNumber),i.Pi.addTargetData(s,l).next(()=>l))))}).then(s=>{const l=i.Ms.get(s.targetId);return(l===null||s.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(s.targetId,s),i.xs.set(t,s.targetId)),s})}async function om(r,t,i){const s=bt(r),l=s.Ms.get(t),h=i?"readwrite":"readwrite-primary";try{i||await s.persistence.runTransaction("Release target",h,d=>s.persistence.referenceDelegate.removeTarget(d,l))}catch(d){if(!so(d))throw d;at(Bm,`Failed to update sequence numbers for target ${t}: ${d}`)}s.Ms=s.Ms.remove(t),s.xs.delete(l.target)}function Cv(r,t,i){const s=bt(r);let l=St.min(),h=Pt();return s.persistence.runTransaction("Execute query","readwrite",d=>function(y,_,A){const D=bt(y),I=D.xs.get(A);return I!==void 0?Y.resolve(D.Ms.get(I)):D.Pi.getTargetData(_,A)}(s,d,gi(t)).next(g=>{if(g)return l=g.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,g.targetId).next(y=>{h=y})}).next(()=>s.Fs.getDocumentsMatchingQuery(d,t,i?l:St.min(),i?h:Pt())).next(g=>(jI(s,wR(t),g),{documents:g,Qs:h})))}function jI(r,t,i){let s=r.Os.get(t)||St.min();i.forEach((l,h)=>{h.readTime.compareTo(s)>0&&(s=h.readTime)}),r.Os.set(t,s)}class Dv{constructor(){this.activeTargetIds=OR()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class BI{constructor(){this.Mo=new Dv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,i,s){}addLocalQueryTarget(t,i=!0){return i&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,i,s){this.xo[t]=i}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Dv,Promise.resolve()}handleUserChange(t,i,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="ConnectivityMonitor";class Ov{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){at(Nv,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){at(Nv,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc=null;function lm(){return Tc===null?Tc=function(){return 268435456+Math.round(2147483648*Math.random())}():Tc++,"0x"+Tc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="RestConnection",HI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+t.host,this.Ko=`projects/${s}/databases/${l}`,this.Wo=this.databaseId.database===Hc?`project_id=${s}`:`project_id=${s}&database_id=${l}`}Go(t,i,s,l,h){const d=lm(),g=this.zo(t,i.toUriEncodedString());at(kd,`Sending RPC '${t}' ${d}:`,g,s);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,l,h);const{host:_}=new URL(g),A=to(_);return this.Jo(t,g,y,s,A).then(D=>(at(kd,`Received RPC '${t}' ${d}: `,D),D),D=>{throw Ka(kd,`RPC '${t}' ${d} failed with error: `,D,"url: ",g,"request:",s),D})}Ho(t,i,s,l,h,d){return this.Go(t,i,s,l,h)}jo(t,i,s){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+io}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((l,h)=>t[h]=l),s&&s.headers.forEach((l,h)=>t[h]=l)}zo(t,i){const s=HI[t];return`${this.Uo}/v1/${i}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const We="WebChannelConnection";class QI extends GI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,i,s,l,h){const d=lm();return new Promise((g,y)=>{const _=new q0;_.setWithCredentials(!0),_.listenOnce(H0.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case Cc.NO_ERROR:const D=_.getResponseJson();at(We,`XHR for RPC '${t}' ${d} received:`,JSON.stringify(D)),g(D);break;case Cc.TIMEOUT:at(We,`RPC '${t}' ${d} timed out`),y(new lt($.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const I=_.getStatus();if(at(We,`RPC '${t}' ${d} failed with status:`,I,"response text:",_.getResponseText()),I>0){let H=_.getResponseJson();Array.isArray(H)&&(H=H[0]);const Z=H?.error;if(Z&&Z.status&&Z.message){const rt=function(gt){const dt=gt.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(dt)>=0?dt:$.UNKNOWN}(Z.status);y(new lt(rt,Z.message))}else y(new lt($.UNKNOWN,"Server responded with status "+_.getStatus()))}else y(new lt($.UNAVAILABLE,"Connection failed."));break;default:_t(9055,{l_:t,streamId:d,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{at(We,`RPC '${t}' ${d} completed.`)}});const A=JSON.stringify(l);at(We,`RPC '${t}' ${d} sending request:`,l),_.send(i,"POST",A,s,15)})}T_(t,i,s){const l=lm(),h=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],d=Q0(),g=F0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(y.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,i,s),y.encodeInitMessageHeaders=!0;const A=h.join("");at(We,`Creating RPC '${t}' stream ${l}: ${A}`,y);const D=d.createWebChannel(A,y);this.I_(D);let I=!1,H=!1;const Z=new FI({Yo:J=>{H?at(We,`Not sending because RPC '${t}' stream ${l} is closed:`,J):(I||(at(We,`Opening RPC '${t}' stream ${l} transport.`),D.open(),I=!0),at(We,`RPC '${t}' stream ${l} sending:`,J),D.send(J))},Zo:()=>D.close()}),rt=(J,gt,dt)=>{J.listen(gt,ft=>{try{dt(ft)}catch(qt){setTimeout(()=>{throw qt},0)}})};return rt(D,yl.EventType.OPEN,()=>{H||(at(We,`RPC '${t}' stream ${l} transport opened.`),Z.o_())}),rt(D,yl.EventType.CLOSE,()=>{H||(H=!0,at(We,`RPC '${t}' stream ${l} transport closed`),Z.a_(),this.E_(D))}),rt(D,yl.EventType.ERROR,J=>{H||(H=!0,Ka(We,`RPC '${t}' stream ${l} transport errored. Name:`,J.name,"Message:",J.message),Z.a_(new lt($.UNAVAILABLE,"The operation could not be completed")))}),rt(D,yl.EventType.MESSAGE,J=>{if(!H){const gt=J.data[0];Ft(!!gt,16349);const dt=gt,ft=dt?.error||dt[0]?.error;if(ft){at(We,`RPC '${t}' stream ${l} received error:`,ft);const qt=ft.status;let At=function(S){const w=Ae[S];if(w!==void 0)return RE(w)}(qt),wt=ft.message;At===void 0&&(At=$.INTERNAL,wt="Unknown error status: "+qt+" with message "+ft.message),H=!0,Z.a_(new lt(At,wt)),D.close()}else at(We,`RPC '${t}' stream ${l} received:`,gt),Z.u_(gt)}}),rt(g,G0.STAT_EVENT,J=>{J.stat===$d.PROXY?at(We,`RPC '${t}' stream ${l} detected buffering proxy`):J.stat===$d.NOPROXY&&at(We,`RPC '${t}' stream ${l} detected no buffering proxy`)}),setTimeout(()=>{Z.__()},0),Z}terminate(){this.c_.forEach(t=>t.close()),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter(i=>i===t)}}function Ud(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(r){return new $R(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t,i,s=1e3,l=1.5,h=6e4){this.Mi=t,this.timerId=i,this.d_=s,this.A_=l,this.R_=h,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const i=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-s);l>0&&at("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,()=>(this.f_=Date.now(),t())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="PersistentStream";class BE{constructor(t,i,s,l,h,d,g,y){this.Mi=t,this.S_=s,this.b_=l,this.connection=h,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jE(t,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():i&&i.code===$.RESOURCE_EXHAUSTED?(tr(i.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(i)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,l])=>{this.D_===i&&this.G_(s,l)},s=>{t(()=>{const l=new lt($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(l)})})}G_(t,i){const s=this.W_(this.D_);this.stream=this.j_(t,i),this.stream.Xo(()=>{s(()=>this.listener.Xo())}),this.stream.t_(()=>{s(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(l=>{s(()=>this.z_(l))}),this.stream.onMessage(l=>{s(()=>++this.F_==1?this.J_(l):this.onNext(l))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(t){return at(Vv,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return i=>{this.Mi.enqueueAndForget(()=>this.D_===t?i():(at(Vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class KI extends BE{constructor(t,i,s,l,h,d){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}j_(t,i){return this.connection.T_("Listen",t,i)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const i=WR(this.serializer,t),s=function(h){if(!("targetChange"in h))return St.min();const d=h.targetChange;return d.targetIds&&d.targetIds.length?St.min():d.readTime?yi(d.readTime):St.min()}(t);return this.listener.H_(i,s)}Y_(t){const i={};i.database=am(this.serializer),i.addTarget=function(h,d){let g;const y=d.target;if(g=em(y)?{documents:nI(h,y)}:{query:iI(h,y).ft},g.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){g.resumeToken=DE(h,d.resumeToken);const _=im(h,d.expectedCount);_!==null&&(g.expectedCount=_)}else if(d.snapshotVersion.compareTo(St.min())>0){g.readTime=Xc(h,d.snapshotVersion.toTimestamp());const _=im(h,d.expectedCount);_!==null&&(g.expectedCount=_)}return g}(this.serializer,t);const s=sI(this.serializer,t);s&&(i.labels=s),this.q_(i)}Z_(t){const i={};i.database=am(this.serializer),i.removeTarget=t,this.q_(i)}}class YI extends BE{constructor(t,i,s,l,h,d){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,s,l,d),this.serializer=h}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,i){return this.connection.T_("Write",t,i)}J_(t){return Ft(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Ft(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Ft(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const i=eI(t.writeResults,t.commitTime),s=yi(t.commitTime);return this.listener.na(s,i)}ra(){const t={};t.database=am(this.serializer),this.q_(t)}ea(t){const i={streamToken:this.lastStreamToken,writes:t.map(s=>tI(this.serializer,s))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{}class $I extends XI{constructor(t,i,s,l){super(),this.authCredentials=t,this.appCheckCredentials=i,this.connection=s,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new lt($.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,i,s,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.Go(t,rm(i,s),l,h,d)).catch(h=>{throw h.name==="FirebaseError"?(h.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new lt($.UNKNOWN,h.toString())})}Ho(t,i,s,l,h){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,g])=>this.connection.Ho(t,rm(i,s),l,d,g,h)).catch(d=>{throw d.name==="FirebaseError"?(d.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new lt($.UNKNOWN,d.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ZI{constructor(t,i){this.asyncQueue=t,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const i=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tr(i),this.aa=!1):at("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="RemoteStore";class JI{constructor(t,i,s,l,h){this.localStore=t,this.datastore=i,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=h,this.Aa.Oo(d=>{s.enqueueAndForget(async()=>{qs(this)&&(at(js,"Restarting streams for network reachability change."),await async function(y){const _=bt(y);_.Ea.add(4),await Fl(_),_.Ra.set("Unknown"),_.Ea.delete(4),await mh(_)}(this))})}),this.Ra=new ZI(s,l)}}async function mh(r){if(qs(r))for(const t of r.da)await t(!0)}async function Fl(r){for(const t of r.da)await t(!1)}function qE(r,t){const i=bt(r);i.Ia.has(t.targetId)||(i.Ia.set(t.targetId,t),Fm(i)?Gm(i):ao(i).O_()&&Hm(i,t))}function qm(r,t){const i=bt(r),s=ao(i);i.Ia.delete(t),s.O_()&&HE(i,t),i.Ia.size===0&&(s.O_()?s.L_():qs(i)&&i.Ra.set("Unknown"))}function Hm(r,t){if(r.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(St.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(i)}ao(r).Y_(t)}function HE(r,t){r.Va.Ue(t),ao(r).Z_(t)}function Gm(r){r.Va=new QR({getRemoteKeysForTarget:t=>r.remoteSyncer.getRemoteKeysForTarget(t),At:t=>r.Ia.get(t)||null,ht:()=>r.datastore.serializer.databaseId}),ao(r).start(),r.Ra.ua()}function Fm(r){return qs(r)&&!ao(r).x_()&&r.Ia.size>0}function qs(r){return bt(r).Ea.size===0}function GE(r){r.Va=void 0}async function WI(r){r.Ra.set("Online")}async function t2(r){r.Ia.forEach((t,i)=>{Hm(r,t)})}async function e2(r,t){GE(r),Fm(r)?(r.Ra.ha(t),Gm(r)):r.Ra.set("Unknown")}async function n2(r,t,i){if(r.Ra.set("Online"),t instanceof CE&&t.state===2&&t.cause)try{await async function(l,h){const d=h.cause;for(const g of h.targetIds)l.Ia.has(g)&&(await l.remoteSyncer.rejectListen(g,d),l.Ia.delete(g),l.Va.removeTarget(g))}(r,t)}catch(s){at(js,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await Zc(r,s)}else if(t instanceof Vc?r.Va.Ze(t):t instanceof IE?r.Va.st(t):r.Va.tt(t),!i.isEqual(St.min()))try{const s=await zE(r.localStore);i.compareTo(s)>=0&&await function(h,d){const g=h.Va.Tt(d);return g.targetChanges.forEach((y,_)=>{if(y.resumeToken.approximateByteSize()>0){const A=h.Ia.get(_);A&&h.Ia.set(_,A.withResumeToken(y.resumeToken,d))}}),g.targetMismatches.forEach((y,_)=>{const A=h.Ia.get(y);if(!A)return;h.Ia.set(y,A.withResumeToken(Ye.EMPTY_BYTE_STRING,A.snapshotVersion)),HE(h,y);const D=new Ur(A.target,y,_,A.sequenceNumber);Hm(h,D)}),h.remoteSyncer.applyRemoteEvent(g)}(r,i)}catch(s){at(js,"Failed to raise snapshot:",s),await Zc(r,s)}}async function Zc(r,t,i){if(!so(t))throw t;r.Ea.add(1),await Fl(r),r.Ra.set("Offline"),i||(i=()=>zE(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{at(js,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await mh(r)})}function FE(r,t){return t().catch(i=>Zc(r,i,t))}async function gh(r){const t=bt(r),i=Yr(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Dm;for(;i2(t);)try{const l=await LI(t.localStore,s);if(l===null){t.Ta.length===0&&i.L_();break}s=l.batchId,r2(t,l)}catch(l){await Zc(t,l)}QE(t)&&KE(t)}function i2(r){return qs(r)&&r.Ta.length<10}function r2(r,t){r.Ta.push(t);const i=Yr(r);i.O_()&&i.X_&&i.ea(t.mutations)}function QE(r){return qs(r)&&!Yr(r).x_()&&r.Ta.length>0}function KE(r){Yr(r).start()}async function s2(r){Yr(r).ra()}async function a2(r){const t=Yr(r);for(const i of r.Ta)t.ea(i.mutations)}async function o2(r,t,i){const s=r.Ta.shift(),l=Pm.from(s,t,i);await FE(r,()=>r.remoteSyncer.applySuccessfulWrite(l)),await gh(r)}async function l2(r,t){t&&Yr(r).X_&&await async function(s,l){if(function(d){return HR(d)&&d!==$.ABORTED}(l.code)){const h=s.Ta.shift();Yr(s).B_(),await FE(s,()=>s.remoteSyncer.rejectFailedWrite(h.batchId,l)),await gh(s)}}(r,t),QE(r)&&KE(r)}async function Mv(r,t){const i=bt(r);i.asyncQueue.verifyOperationInProgress(),at(js,"RemoteStore received new credentials");const s=qs(i);i.Ea.add(3),await Fl(i),s&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(t),i.Ea.delete(3),await mh(i)}async function u2(r,t){const i=bt(r);t?(i.Ea.delete(2),await mh(i)):t||(i.Ea.add(2),await Fl(i),i.Ra.set("Unknown"))}function ao(r){return r.ma||(r.ma=function(i,s,l){const h=bt(i);return h.sa(),new KI(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(r.datastore,r.asyncQueue,{Xo:WI.bind(null,r),t_:t2.bind(null,r),r_:e2.bind(null,r),H_:n2.bind(null,r)}),r.da.push(async t=>{t?(r.ma.B_(),Fm(r)?Gm(r):r.Ra.set("Unknown")):(await r.ma.stop(),GE(r))})),r.ma}function Yr(r){return r.fa||(r.fa=function(i,s,l){const h=bt(i);return h.sa(),new YI(s,h.connection,h.authCredentials,h.appCheckCredentials,h.serializer,l)}(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:s2.bind(null,r),r_:l2.bind(null,r),ta:a2.bind(null,r),na:o2.bind(null,r)}),r.da.push(async t=>{t?(r.fa.B_(),await gh(r)):(await r.fa.stop(),r.Ta.length>0&&(at(js,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))})),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(t,i,s,l,h){this.asyncQueue=t,this.timerId=i,this.targetTimeMs=s,this.op=l,this.removalCallback=h,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,i,s,l,h){const d=Date.now()+s,g=new Qm(t,i,d,l,h);return g.start(s),g}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt($.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(r,t){if(tr("AsyncQueue",`${t}: ${r}`),so(r))return new lt($.UNAVAILABLE,`${t}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{static emptySet(t){return new Ga(t.comparator)}constructor(t){this.comparator=t?(i,s)=>t(i,s)||mt.comparator(i.key,s.key):(i,s)=>mt.comparator(i.key,s.key),this.keyedMap=_l(),this.sortedSet=new ue(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const i=this.keyedMap.get(t);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((i,s)=>(t(i),!1))}add(t){const i=this.delete(t.key);return i.copy(i.keyedMap.insert(t.key,t),i.sortedSet.insert(t,null))}delete(t){const i=this.get(t);return i?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(i)):this}isEqual(t){if(!(t instanceof Ga)||this.size!==t.size)return!1;const i=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,h=s.getNext().key;if(!l.isEqual(h))return!1}return!0}toString(){const t=[];return this.forEach(i=>{t.push(i.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,i){const s=new Ga;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.ga=new ue(mt.comparator)}track(t){const i=t.doc.key,s=this.ga.get(i);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(i,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(i,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(i,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(i):t.type===1&&s.type===2?this.ga=this.ga.insert(i,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(i,{type:2,doc:t.doc}):_t(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(i,t)}ya(){const t=[];return this.ga.inorderTraversal((i,s)=>{t.push(s)}),t}}class Ja{constructor(t,i,s,l,h,d,g,y,_){this.query=t,this.docs=i,this.oldDocs=s,this.docChanges=l,this.mutatedKeys=h,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=y,this.hasCachedResults=_}static fromInitialDocuments(t,i,s,l,h){const d=[];return i.forEach(g=>{d.push({type:0,doc:g})}),new Ja(t,i,Ga.emptySet(i),d,s,l,!0,!1,h)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const i=this.docChanges,s=t.docChanges;if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==s[l].type||!i[l].doc.isEqual(s[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(t=>t.Da())}}class h2{constructor(){this.queries=Pv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,s){const l=bt(i),h=l.queries;l.queries=Pv(),h.forEach((d,g)=>{for(const y of g.Sa)y.onError(s)})})(this,new lt($.ABORTED,"Firestore shutting down"))}}function Pv(){return new Bs(r=>dE(r),lh)}async function YE(r,t){const i=bt(r);let s=3;const l=t.query;let h=i.queries.get(l);h?!h.ba()&&t.Da()&&(s=2):(h=new c2,s=t.Da()?0:1);try{switch(s){case 0:h.wa=await i.onListen(l,!0);break;case 1:h.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(d){const g=Km(d,`Initialization of query '${ka(t.query)}' failed`);return void t.onError(g)}i.queries.set(l,h),h.Sa.push(t),t.va(i.onlineState),h.wa&&t.Fa(h.wa)&&Ym(i)}async function XE(r,t){const i=bt(r),s=t.query;let l=3;const h=i.queries.get(s);if(h){const d=h.Sa.indexOf(t);d>=0&&(h.Sa.splice(d,1),h.Sa.length===0?l=t.Da()?0:1:!h.ba()&&t.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(s),i.onUnlisten(s,!0);case 1:return i.queries.delete(s),i.onUnlisten(s,!1);case 2:return i.onLastRemoteStoreUnlisten(s);default:return}}function f2(r,t){const i=bt(r);let s=!1;for(const l of t){const h=l.query,d=i.queries.get(h);if(d){for(const g of d.Sa)g.Fa(l)&&(s=!0);d.wa=l}}s&&Ym(i)}function d2(r,t,i){const s=bt(r),l=s.queries.get(t);if(l)for(const h of l.Sa)h.onError(i);s.queries.delete(t)}function Ym(r){r.Ca.forEach(t=>{t.next()})}var um,kv;(kv=um||(um={})).Ma="default",kv.Cache="cache";class $E{constructor(t,i,s){this.query=t,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const l of t.docChanges)l.type!==3&&s.push(l);t=new Ja(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let i=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),i=!0):this.La(t,this.onlineState)&&(this.ka(t),i=!0),this.Na=t,i}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),i=!0),i}La(t,i){if(!t.fromCache||!this.Da())return!0;const s=i!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||i==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(t){t=Ja.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==um.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t){this.key=t}}class JE{constructor(t){this.key=t}}class m2{constructor(t,i){this.query=t,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Pt(),this.mutatedKeys=Pt(),this.eu=mE(t),this.tu=new Ga(this.eu)}get nu(){return this.Ya}ru(t,i){const s=i?i.iu:new xv,l=i?i.tu:this.tu;let h=i?i.mutatedKeys:this.mutatedKeys,d=l,g=!1;const y=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(t.inorderTraversal((A,D)=>{const I=l.get(A),H=uh(this.query,D)?D:null,Z=!!I&&this.mutatedKeys.has(I.key),rt=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let J=!1;I&&H?I.data.isEqual(H.data)?Z!==rt&&(s.track({type:3,doc:H}),J=!0):this.su(I,H)||(s.track({type:2,doc:H}),J=!0,(y&&this.eu(H,y)>0||_&&this.eu(H,_)<0)&&(g=!0)):!I&&H?(s.track({type:0,doc:H}),J=!0):I&&!H&&(s.track({type:1,doc:I}),J=!0,(y||_)&&(g=!0)),J&&(H?(d=d.add(H),h=rt?h.add(A):h.delete(A)):(d=d.delete(A),h=h.delete(A)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const A=this.query.limitType==="F"?d.last():d.first();d=d.delete(A.key),h=h.delete(A.key),s.track({type:1,doc:A})}return{tu:d,iu:s,Cs:g,mutatedKeys:h}}su(t,i){return t.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(t,i,s,l){const h=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const d=t.iu.ya();d.sort((A,D)=>function(H,Z){const rt=J=>{switch(J){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _t(20277,{Rt:J})}};return rt(H)-rt(Z)}(A.type,D.type)||this.eu(A.doc,D.doc)),this.ou(s),l=l??!1;const g=i&&!l?this._u():[],y=this.Xa.size===0&&this.current&&!l?1:0,_=y!==this.Za;return this.Za=y,d.length!==0||_?{snapshot:new Ja(this.query,t.tu,h,d,t.mutatedKeys,y===0,_,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:g}:{au:g}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new xv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach(i=>this.Ya=this.Ya.add(i)),t.modifiedDocuments.forEach(i=>{}),t.removedDocuments.forEach(i=>this.Ya=this.Ya.delete(i)),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Pt(),this.tu.forEach(s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))});const i=[];return t.forEach(s=>{this.Xa.has(s)||i.push(new JE(s))}),this.Xa.forEach(s=>{t.has(s)||i.push(new ZE(s))}),i}cu(t){this.Ya=t.Qs,this.Xa=Pt();const i=this.ru(t.documents);return this.applyChanges(i,!0)}lu(){return Ja.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Xm="SyncEngine";class g2{constructor(t,i,s){this.query=t,this.targetId=i,this.view=s}}class p2{constructor(t){this.key=t,this.hu=!1}}class y2{constructor(t,i,s,l,h,d){this.localStore=t,this.remoteStore=i,this.eventManager=s,this.sharedClientState=l,this.currentUser=h,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Bs(g=>dE(g),lh),this.Iu=new Map,this.Eu=new Set,this.du=new ue(mt.comparator),this.Au=new Map,this.Ru=new Lm,this.Vu={},this.mu=new Map,this.fu=Za.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _2(r,t,i=!0){const s=rT(r);let l;const h=s.Tu.get(t);return h?(s.sharedClientState.addLocalQueryTarget(h.targetId),l=h.view.lu()):l=await WE(s,t,i,!0),l}async function v2(r,t){const i=rT(r);await WE(i,t,!0,!1)}async function WE(r,t,i,s){const l=await zI(r.localStore,gi(t)),h=l.targetId,d=r.sharedClientState.addLocalQueryTarget(h,i);let g;return s&&(g=await E2(r,t,h,d==="current",l.resumeToken)),r.isPrimaryClient&&i&&qE(r.remoteStore,l),g}async function E2(r,t,i,s,l){r.pu=(D,I,H)=>async function(rt,J,gt,dt){let ft=J.view.ru(gt);ft.Cs&&(ft=await Cv(rt.localStore,J.query,!1).then(({documents:M})=>J.view.ru(M,ft)));const qt=dt&&dt.targetChanges.get(J.targetId),At=dt&&dt.targetMismatches.get(J.targetId)!=null,wt=J.view.applyChanges(ft,rt.isPrimaryClient,qt,At);return Lv(rt,J.targetId,wt.au),wt.snapshot}(r,D,I,H);const h=await Cv(r.localStore,t,!0),d=new m2(t,h.Qs),g=d.ru(h.documents),y=Gl.createSynthesizedTargetChangeForCurrentChange(i,s&&r.onlineState!=="Offline",l),_=d.applyChanges(g,r.isPrimaryClient,y);Lv(r,i,_.au);const A=new g2(t,i,d);return r.Tu.set(t,A),r.Iu.has(i)?r.Iu.get(i).push(t):r.Iu.set(i,[t]),_.snapshot}async function T2(r,t,i){const s=bt(r),l=s.Tu.get(t),h=s.Iu.get(l.targetId);if(h.length>1)return s.Iu.set(l.targetId,h.filter(d=>!lh(d,t))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(l.targetId),s.sharedClientState.isActiveQueryTarget(l.targetId)||await om(s.localStore,l.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(l.targetId),i&&qm(s.remoteStore,l.targetId),cm(s,l.targetId)}).catch(ro)):(cm(s,l.targetId),await om(s.localStore,l.targetId,!0))}async function A2(r,t){const i=bt(r),s=i.Tu.get(t),l=i.Iu.get(s.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(s.targetId),qm(i.remoteStore,s.targetId))}async function S2(r,t,i){const s=N2(r);try{const l=await function(d,g){const y=bt(d),_=ie.now(),A=g.reduce((H,Z)=>H.add(Z.key),Pt());let D,I;return y.persistence.runTransaction("Locally write mutations","readwrite",H=>{let Z=er(),rt=Pt();return y.Ns.getEntries(H,A).next(J=>{Z=J,Z.forEach((gt,dt)=>{dt.isValidDocument()||(rt=rt.add(gt))})}).next(()=>y.localDocuments.getOverlayedDocuments(H,Z)).next(J=>{D=J;const gt=[];for(const dt of g){const ft=LR(dt,D.get(dt.key).overlayedDocument);ft!=null&&gt.push(new Zr(dt.key,ft,aE(ft.value.mapValue),pi.exists(!0)))}return y.mutationQueue.addMutationBatch(H,_,gt,g)}).next(J=>{I=J;const gt=J.applyToLocalDocumentSet(D,rt);return y.documentOverlayCache.saveOverlays(H,J.batchId,gt)})}).then(()=>({batchId:I.batchId,changes:pE(D)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(l.batchId),function(d,g,y){let _=d.Vu[d.currentUser.toKey()];_||(_=new ue(xt)),_=_.insert(g,y),d.Vu[d.currentUser.toKey()]=_}(s,l.batchId,i),await Ql(s,l.changes),await gh(s.remoteStore)}catch(l){const h=Km(l,"Failed to persist write");i.reject(h)}}async function tT(r,t){const i=bt(r);try{const s=await kI(i.localStore,t);t.targetChanges.forEach((l,h)=>{const d=i.Au.get(h);d&&(Ft(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?d.hu=!0:l.modifiedDocuments.size>0?Ft(d.hu,14607):l.removedDocuments.size>0&&(Ft(d.hu,42227),d.hu=!1))}),await Ql(i,s,t)}catch(s){await ro(s)}}function Uv(r,t,i){const s=bt(r);if(s.isPrimaryClient&&i===0||!s.isPrimaryClient&&i===1){const l=[];s.Tu.forEach((h,d)=>{const g=d.view.va(t);g.snapshot&&l.push(g.snapshot)}),function(d,g){const y=bt(d);y.onlineState=g;let _=!1;y.queries.forEach((A,D)=>{for(const I of D.Sa)I.va(g)&&(_=!0)}),_&&Ym(y)}(s.eventManager,t),l.length&&s.Pu.H_(l),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function b2(r,t,i){const s=bt(r);s.sharedClientState.updateQueryState(t,"rejected",i);const l=s.Au.get(t),h=l&&l.key;if(h){let d=new ue(mt.comparator);d=d.insert(h,en.newNoDocument(h,St.min()));const g=Pt().add(h),y=new fh(St.min(),new Map,new ue(xt),d,g);await tT(s,y),s.du=s.du.remove(h),s.Au.delete(t),$m(s)}else await om(s.localStore,t,!1).then(()=>cm(s,t,i)).catch(ro)}async function w2(r,t){const i=bt(r),s=t.batch.batchId;try{const l=await PI(i.localStore,t);nT(i,s,null),eT(i,s),i.sharedClientState.updateMutationState(s,"acknowledged"),await Ql(i,l)}catch(l){await ro(l)}}async function R2(r,t,i){const s=bt(r);try{const l=await function(d,g){const y=bt(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let A;return y.mutationQueue.lookupMutationBatch(_,g).next(D=>(Ft(D!==null,37113),A=D.keys(),y.mutationQueue.removeMutationBatch(_,D))).next(()=>y.mutationQueue.performConsistencyCheck(_)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(_,A,g)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,A)).next(()=>y.localDocuments.getDocuments(_,A))})}(s.localStore,t);nT(s,t,i),eT(s,t),s.sharedClientState.updateMutationState(t,"rejected",i),await Ql(s,l)}catch(l){await ro(l)}}function eT(r,t){(r.mu.get(t)||[]).forEach(i=>{i.resolve()}),r.mu.delete(t)}function nT(r,t,i){const s=bt(r);let l=s.Vu[s.currentUser.toKey()];if(l){const h=l.get(t);h&&(i?h.reject(i):h.resolve(),l=l.remove(t)),s.Vu[s.currentUser.toKey()]=l}}function cm(r,t,i=null){r.sharedClientState.removeLocalQueryTarget(t);for(const s of r.Iu.get(t))r.Tu.delete(s),i&&r.Pu.yu(s,i);r.Iu.delete(t),r.isPrimaryClient&&r.Ru.jr(t).forEach(s=>{r.Ru.containsKey(s)||iT(r,s)})}function iT(r,t){r.Eu.delete(t.path.canonicalString());const i=r.du.get(t);i!==null&&(qm(r.remoteStore,i),r.du=r.du.remove(t),r.Au.delete(i),$m(r))}function Lv(r,t,i){for(const s of i)s instanceof ZE?(r.Ru.addReference(s.key,t),I2(r,s)):s instanceof JE?(at(Xm,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,t),r.Ru.containsKey(s.key)||iT(r,s.key)):_t(19791,{wu:s})}function I2(r,t){const i=t.key,s=i.path.canonicalString();r.du.get(i)||r.Eu.has(s)||(at(Xm,"New document in limbo: "+i),r.Eu.add(s),$m(r))}function $m(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const t=r.Eu.values().next().value;r.Eu.delete(t);const i=new mt(ne.fromString(t)),s=r.fu.next();r.Au.set(s,new p2(i)),r.du=r.du.insert(i,s),qE(r.remoteStore,new Ur(gi(oh(i.path)),s,"TargetPurposeLimboResolution",ih.ce))}}async function Ql(r,t,i){const s=bt(r),l=[],h=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach((g,y)=>{d.push(s.pu(y,t,i).then(_=>{if((_||i)&&s.isPrimaryClient){const A=_?!_.fromCache:i?.targetChanges.get(y.targetId)?.current;s.sharedClientState.updateQueryState(y.targetId,A?"current":"not-current")}if(_){l.push(_);const A=jm.As(y.targetId,_);h.push(A)}}))}),await Promise.all(d),s.Pu.H_(l),await async function(y,_){const A=bt(y);try{await A.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Y.forEach(_,I=>Y.forEach(I.Es,H=>A.persistence.referenceDelegate.addReference(D,I.targetId,H)).next(()=>Y.forEach(I.ds,H=>A.persistence.referenceDelegate.removeReference(D,I.targetId,H)))))}catch(D){if(!so(D))throw D;at(Bm,"Failed to update sequence numbers: "+D)}for(const D of _){const I=D.targetId;if(!D.fromCache){const H=A.Ms.get(I),Z=H.snapshotVersion,rt=H.withLastLimboFreeSnapshotVersion(Z);A.Ms=A.Ms.insert(I,rt)}}}(s.localStore,h))}async function C2(r,t){const i=bt(r);if(!i.currentUser.isEqual(t)){at(Xm,"User change. New user:",t.toKey());const s=await LE(i.localStore,t);i.currentUser=t,function(h,d){h.mu.forEach(g=>{g.forEach(y=>{y.reject(new lt($.CANCELLED,d))})}),h.mu.clear()}(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Ql(i,s.Ls)}}function D2(r,t){const i=bt(r),s=i.Au.get(t);if(s&&s.hu)return Pt().add(s.key);{let l=Pt();const h=i.Iu.get(t);if(!h)return l;for(const d of h){const g=i.Tu.get(d);l=l.unionWith(g.view.nu)}return l}}function rT(r){const t=bt(r);return t.remoteStore.remoteSyncer.applyRemoteEvent=tT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=D2.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=b2.bind(null,t),t.Pu.H_=f2.bind(null,t.eventManager),t.Pu.yu=d2.bind(null,t.eventManager),t}function N2(r){const t=bt(r);return t.remoteStore.remoteSyncer.applySuccessfulWrite=w2.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=R2.bind(null,t),t}class Jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=dh(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,i){return null}Mu(t,i){return null}vu(t){return xI(this.persistence,new OI,t.initialUser,this.serializer)}Cu(t){return new UE(zm.mi,this.serializer)}Du(t){return new BI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jc.provider={build:()=>new Jc};class O2 extends Jc{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,i){Ft(this.persistence.referenceDelegate instanceof $c,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new pI(s,t.asyncQueue,i)}Cu(t){const i=this.cacheSizeBytes!==void 0?dn.withCacheSize(this.cacheSizeBytes):dn.DEFAULT;return new UE(s=>$c.mi(s,i),this.serializer)}}class hm{async initialize(t,i){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Uv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=C2.bind(null,this.syncEngine),await u2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new h2}()}createDatastore(t){const i=dh(t.databaseInfo.databaseId),s=function(h){return new QI(h)}(t.databaseInfo);return function(h,d,g,y){return new $I(h,d,g,y)}(t.authCredentials,t.appCheckCredentials,s,i)}createRemoteStore(t){return function(s,l,h,d,g){return new JI(s,l,h,d,g)}(this.localStore,this.datastore,t.asyncQueue,i=>Uv(this.syncEngine,i,0),function(){return Ov.v()?new Ov:new qI}())}createSyncEngine(t,i){return function(l,h,d,g,y,_,A){const D=new y2(l,h,d,g,y,_);return A&&(D.gu=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,i)}async terminate(){await async function(i){const s=bt(i);at(js,"RemoteStore shutting down."),s.Ea.add(5),await Fl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hm.provider={build:()=>new hm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):tr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,i){setTimeout(()=>{this.muted||t(i)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="FirestoreClient";class V2{constructor(t,i,s,l,h){this.authCredentials=t,this.appCheckCredentials=i,this.asyncQueue=s,this.databaseInfo=l,this.user=tn.UNAUTHENTICATED,this.clientId=Im.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=h,this.authCredentials.start(s,async d=>{at(Xr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(at(Xr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=Km(i,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Ld(r,t){r.asyncQueue.verifyOperationInProgress(),at(Xr,"Initializing OfflineComponentProvider");const i=r.configuration;await t.initialize(i);let s=i.initialUser;r.setCredentialChangeListener(async l=>{s.isEqual(l)||(await LE(t.localStore,l),s=l)}),t.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=t}async function zv(r,t){r.asyncQueue.verifyOperationInProgress();const i=await M2(r);at(Xr,"Initializing OnlineComponentProvider"),await t.initialize(i,r.configuration),r.setCredentialChangeListener(s=>Mv(t.remoteStore,s)),r.setAppCheckTokenChangeListener((s,l)=>Mv(t.remoteStore,l)),r._onlineComponents=t}async function M2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){at(Xr,"Using user provided OfflineComponentProvider");try{await Ld(r,r._uninitializedComponentsProvider._offline)}catch(t){const i=t;if(!function(l){return l.name==="FirebaseError"?l.code===$.FAILED_PRECONDITION||l.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11}(i))throw i;Ka("Error using user provided cache. Falling back to memory cache: "+i),await Ld(r,new Jc)}}else at(Xr,"Using default OfflineComponentProvider"),await Ld(r,new O2(void 0));return r._offlineComponents}async function aT(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(at(Xr,"Using user provided OnlineComponentProvider"),await zv(r,r._uninitializedComponentsProvider._online)):(at(Xr,"Using default OnlineComponentProvider"),await zv(r,new hm))),r._onlineComponents}function x2(r){return aT(r).then(t=>t.syncEngine)}async function fm(r){const t=await aT(r),i=t.eventManager;return i.onListen=_2.bind(null,t.syncEngine),i.onUnlisten=T2.bind(null,t.syncEngine),i.onFirstRemoteStoreListen=v2.bind(null,t.syncEngine),i.onLastRemoteStoreUnlisten=A2.bind(null,t.syncEngine),i}function P2(r,t,i={}){const s=new qr;return r.asyncQueue.enqueueAndForget(async()=>function(h,d,g,y,_){const A=new sT({next:I=>{A.Nu(),d.enqueueAndForget(()=>XE(h,D));const H=I.docs.has(g);!H&&I.fromCache?_.reject(new lt($.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&I.fromCache&&y&&y.source==="server"?_.reject(new lt($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(I)},error:I=>_.reject(I)}),D=new $E(oh(g.path),A,{includeMetadataChanges:!0,qa:!0});return YE(h,D)}(await fm(r),r.asyncQueue,t,i,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(r){const t={};return r.timeoutSeconds!==void 0&&(t.timeoutSeconds=r.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="firestore.googleapis.com",Bv=!0;class qv{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new lt($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lT,this.ssl=Bv}else this.host=t.host,this.ssl=t.ssl??Bv;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=kE;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<mI)throw new lt($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Zw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oT(t.experimentalLongPollingOptions??{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,l){return s.timeoutSeconds===l.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ph{constructor(t,i,s,l){this._authCredentials=t,this._appCheckCredentials=i,this._databaseId=s,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new lt($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qv(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new Bw;switch(s.type){case"firstParty":return new Fw(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new lt($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(i){const s=jv.get(i);s&&(at("ComponentProvider","Removing Datastore"),jv.delete(i),s.terminate())}(this),Promise.resolve()}}function k2(r,t,i,s={}){r=mi(r,ph);const l=to(t),h=r._getSettings(),d={...h,emulatorOptions:r._getEmulatorOptions()},g=`${t}:${i}`;l&&(n0(`https://${g}`),i0("Firestore",!0)),h.host!==lT&&h.host!==g&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...h,host:g,ssl:l,emulatorOptions:s};if(!ks(y,d)&&(r._setSettings(y),s.mockUserToken)){let _,A;if(typeof s.mockUserToken=="string")_=s.mockUserToken,A=tn.MOCK_USER;else{_=cS(s.mockUserToken,r._app?.options.projectId);const D=s.mockUserToken.sub||s.mockUserToken.user_id;if(!D)throw new lt($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new tn(D)}r._authCredentials=new qw(new Y0(_,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,i,s){this.converter=i,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new yh(this.firestore,t,this._query)}}class ye{constructor(t,i,s){this.converter=i,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ye(this.firestore,t,this._key)}toJSON(){return{type:ye._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,i,s){if(ql(i,ye._jsonSchema))return new ye(t,s||null,new mt(ne.fromString(i.referencePath)))}}ye._jsonSchemaVersion="firestore/documentReference/1.0",ye._jsonSchema={type:Se("string",ye._jsonSchemaVersion),referencePath:Se("string")};class Hr extends yh{constructor(t,i,s){super(t,i,oh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ye(this.firestore,null,new mt(t))}withConverter(t){return new Hr(this.firestore,t,this._path)}}function U2(r,t,...i){if(r=rn(r),X0("collection","path",t),r instanceof ph){const s=ne.fromString(t,...i);return nv(s),new Hr(r,null,s)}{if(!(r instanceof ye||r instanceof Hr))throw new lt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ne.fromString(t,...i));return nv(s),new Hr(r.firestore,null,s)}}function Hv(r,t,...i){if(r=rn(r),arguments.length===1&&(t=Im.newId()),X0("doc","path",t),r instanceof ph){const s=ne.fromString(t,...i);return ev(s),new ye(r,null,new mt(s))}{if(!(r instanceof ye||r instanceof Hr))throw new lt($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ne.fromString(t,...i));return ev(s),new ye(r.firestore,r instanceof Hr?r.converter:null,new mt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="AsyncQueue";class Fv{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jE(this,"async_queue_retry"),this._c=()=>{const s=Ud();s&&at(Gv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const i=Ud();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const i=Ud();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise(()=>{});const i=new qr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(t().then(i.resolve,i.reject),i.promise)).then(()=>i.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Xu.push(t),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!so(t))throw t;at(Gv,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(t){const i=this.ac.then(()=>(this.rc=!0,t().catch(s=>{throw this.nc=s,this.rc=!1,tr("INTERNAL UNHANDLED ERROR: ",Qv(s)),s}).then(s=>(this.rc=!1,s))));return this.ac=i,i}enqueueAfterDelay(t,i,s){this.uc(),this.oc.indexOf(t)>-1&&(i=0);const l=Qm.createAndSchedule(this,t,i,s,h=>this.hc(h));return this.tc.push(l),l}uc(){this.nc&&_t(47125,{Pc:Qv(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const i of this.tc)if(i.timerId===t)return!0;return!1}Ec(t){return this.Tc().then(()=>{this.tc.sort((i,s)=>i.targetTimeMs-s.targetTimeMs);for(const i of this.tc)if(i.skipDelay(),t!=="all"&&i.timerId===t)break;return this.Tc()})}dc(t){this.oc.push(t)}hc(t){const i=this.tc.indexOf(t);this.tc.splice(i,1)}}function Qv(r){let t=r.message||"";return r.stack&&(t=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(r){return function(i,s){if(typeof i!="object"||i===null)return!1;const l=i;for(const h of s)if(h in l&&typeof l[h]=="function")return!0;return!1}(r,["next","error","complete"])}class Wa extends ph{constructor(t,i,s,l){super(t,i,s,l),this.type="firestore",this._queue=new Fv,this._persistenceKey=l?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Fv(t),this._firestoreClient=void 0,await t}}}function L2(r,t){const i=typeof r=="object"?r:o0(),s=typeof r=="string"?r:Hc,l=ym(i,"firestore").getImmediate({identifier:s});if(!l._initialized){const h=lS("firestore");h&&k2(l,...h)}return l}function Zm(r){if(r._terminated)throw new lt($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||z2(r),r._firestoreClient}function z2(r){const t=r._freezeSettings(),i=function(l,h,d,g){return new lR(l,h,d,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,oT(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(r._databaseId,r._app?.options.appId||"",r._persistenceKey,t);r._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),r._firestoreClient=new V2(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const h=l?._online.build();return{_offline:l?._offline.build(h),_online:h}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new jn(Ye.fromBase64String(t))}catch(i){throw new lt($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(t){return new jn(Ye.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(ql(t,jn._jsonSchema))return jn.fromBase64String(t.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Se("string",jn._jsonSchemaVersion),bytes:Se("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(...t){for(let i=0;i<t.length;++i)if(t[i].length===0)throw new lt($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(t,i){if(!isFinite(t)||t<-90||t>90)throw new lt($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(i)||i<-180||i>180)throw new lt($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=t,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return xt(this._lat,t._lat)||xt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_i._jsonSchemaVersion}}static fromJSON(t){if(ql(t,_i._jsonSchema))return new _i(t.latitude,t.longitude)}}_i._jsonSchemaVersion="firestore/geoPoint/1.0",_i._jsonSchema={type:Se("string",_i._jsonSchemaVersion),latitude:Se("number"),longitude:Se("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t){this._values=(t||[]).map(i=>i)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,l){if(s.length!==l.length)return!1;for(let h=0;h<s.length;++h)if(s[h]!==l[h])return!1;return!0}(this._values,t._values)}toJSON(){return{type:vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(ql(t,vi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every(i=>typeof i=="number"))return new vi(t.vectorValues);throw new lt($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vi._jsonSchemaVersion="firestore/vectorValue/1.0",vi._jsonSchema={type:Se("string",vi._jsonSchemaVersion),vectorValues:Se("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=/^__.*__$/;class B2{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return this.fieldMask!==null?new Zr(t,this.data,this.fieldMask,i,this.fieldTransforms):new Hl(t,this.data,i,this.fieldTransforms)}}class uT{constructor(t,i,s){this.data=t,this.fieldMask=i,this.fieldTransforms=s}toMutation(t,i){return new Zr(t,this.data,this.fieldMask,i,this.fieldTransforms)}}function cT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _t(40011,{Ac:r})}}class Wm{constructor(t,i,s,l,h,d){this.settings=t,this.databaseId=i,this.serializer=s,this.ignoreUndefinedProperties=l,h===void 0&&this.Rc(),this.fieldTransforms=h||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Wm({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.gc(t),s}yc(t){const i=this.path?.child(t),s=this.Vc({path:i,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Wc(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find(i=>t.isPrefixOf(i))!==void 0||this.fieldTransforms.find(i=>t.isPrefixOf(i.field))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(cT(this.Ac)&&j2.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class q2{constructor(t,i,s){this.databaseId=t,this.ignoreUndefinedProperties=i,this.serializer=s||dh(t)}Cc(t,i,s,l=!1){return new Wm({Ac:t,methodName:i,Dc:s,path:Ke.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hT(r){const t=r._freezeSettings(),i=dh(r._databaseId);return new q2(r._databaseId,!!t.ignoreUndefinedProperties,i)}function H2(r,t,i,s,l,h={}){const d=r.Cc(h.merge||h.mergeFields?2:0,t,i,l);tg("Data must be an object, but it was:",d,s);const g=fT(s,d);let y,_;if(h.merge)y=new bn(d.fieldMask),_=d.fieldTransforms;else if(h.mergeFields){const A=[];for(const D of h.mergeFields){const I=dm(t,D,i);if(!d.contains(I))throw new lt($.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);mT(A,I)||A.push(I)}y=new bn(A),_=d.fieldTransforms.filter(D=>y.covers(D.field))}else y=null,_=d.fieldTransforms;return new B2(new mn(g),y,_)}class vh extends Jm{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof vh}}function G2(r,t,i,s){const l=r.Cc(1,t,i);tg("Data must be an object, but it was:",l,s);const h=[],d=mn.empty();$r(s,(y,_)=>{const A=eg(t,y,i);_=rn(_);const D=l.yc(A);if(_ instanceof vh)h.push(A);else{const I=Eh(_,D);I!=null&&(h.push(A),d.set(A,I))}});const g=new bn(h);return new uT(d,g,l.fieldTransforms)}function F2(r,t,i,s,l,h){const d=r.Cc(1,t,i),g=[dm(t,s,i)],y=[l];if(h.length%2!=0)throw new lt($.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<h.length;I+=2)g.push(dm(t,h[I])),y.push(h[I+1]);const _=[],A=mn.empty();for(let I=g.length-1;I>=0;--I)if(!mT(_,g[I])){const H=g[I];let Z=y[I];Z=rn(Z);const rt=d.yc(H);if(Z instanceof vh)_.push(H);else{const J=Eh(Z,rt);J!=null&&(_.push(H),A.set(H,J))}}const D=new bn(_);return new uT(A,D,d.fieldTransforms)}function Eh(r,t){if(dT(r=rn(r)))return tg("Unsupported field value:",t,r),fT(r,t);if(r instanceof Jm)return function(s,l){if(!cT(l.Ac))throw l.Sc(`${s._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${s._methodName}() is not currently supported inside arrays`);const h=s._toFieldTransform(l);h&&l.fieldTransforms.push(h)}(r,t),null;if(r===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),r instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return function(s,l){const h=[];let d=0;for(const g of s){let y=Eh(g,l.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),h.push(y),d++}return{arrayValue:{values:h}}}(r,t)}return function(s,l){if((s=rn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return VR(l.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const h=ie.fromDate(s);return{timestampValue:Xc(l.serializer,h)}}if(s instanceof ie){const h=new ie(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Xc(l.serializer,h)}}if(s instanceof _i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof jn)return{bytesValue:DE(l.serializer,s._byteString)};if(s instanceof ye){const h=l.databaseId,d=s.firestore._databaseId;if(!d.isEqual(h))throw l.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${h.projectId}/${h.database}`);return{referenceValue:Um(s.firestore._databaseId||l.databaseId,s._key.path)}}if(s instanceof vi)return function(d,g){return{mapValue:{fields:{[rE]:{stringValue:sE},[Gc]:{arrayValue:{values:d.toArray().map(_=>{if(typeof _!="number")throw g.Sc("VectorValues must only contain numeric values.");return xm(g.serializer,_)})}}}}}}(s,l);throw l.Sc(`Unsupported field value: ${Cm(s)}`)}(r,t)}function fT(r,t){const i={};return J0(r)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(r,(s,l)=>{const h=Eh(l,t.mc(s));h!=null&&(i[s]=h)}),{mapValue:{fields:i}}}function dT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ie||r instanceof _i||r instanceof jn||r instanceof ye||r instanceof Jm||r instanceof vi)}function tg(r,t,i){if(!dT(i)||!$0(i)){const s=Cm(i);throw s==="an object"?t.Sc(r+" a custom object"):t.Sc(r+" "+s)}}function dm(r,t,i){if((t=rn(t))instanceof _h)return t._internalPath;if(typeof t=="string")return eg(r,t);throw Wc("Field path arguments must be of type string or ",r,!1,void 0,i)}const Q2=new RegExp("[~\\*/\\[\\]]");function eg(r,t,i){if(t.search(Q2)>=0)throw Wc(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new _h(...t.split("."))._internalPath}catch{throw Wc(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function Wc(r,t,i,s,l){const h=s&&!s.isEmpty(),d=l!==void 0;let g=`Function ${t}() called with invalid data`;i&&(g+=" (via `toFirestore()`)"),g+=". ";let y="";return(h||d)&&(y+=" (found",h&&(y+=` in field ${s}`),d&&(y+=` in document ${l}`),y+=")"),new lt($.INVALID_ARGUMENT,g+r+y)}function mT(r,t){return r.some(i=>i.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(t,i,s,l,h){this._firestore=t,this._userDataWriter=i,this._key=s,this._document=l,this._converter=h}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new K2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const i=this._document.data.field(pT("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i)}}}class K2 extends gT{data(){return super.data()}}function pT(r,t){return typeof t=="string"?eg(r,t):t instanceof _h?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new lt($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class X2{convertValue(t,i="none"){switch(Kr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return pe(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,i);case 5:return t.stringValue;case 6:return this.convertBytes(Qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,i);case 11:return this.convertObject(t.mapValue,i);case 10:return this.convertVectorValue(t.mapValue);default:throw _t(62114,{value:t})}}convertObject(t,i){return this.convertObjectMap(t.fields,i)}convertObjectMap(t,i="none"){const s={};return $r(t,(l,h)=>{s[l]=this.convertValue(h,i)}),s}convertVectorValue(t){const i=t.fields?.[Gc].arrayValue?.values?.map(s=>pe(s.doubleValue));return new vi(i)}convertGeoPoint(t){return new _i(pe(t.latitude),pe(t.longitude))}convertArray(t,i){return(t.values||[]).map(s=>this.convertValue(s,i))}convertServerTimestamp(t,i){switch(i){case"previous":const s=sh(t);return s==null?null:this.convertValue(s,i);case"estimate":return this.convertTimestamp(Nl(t));default:return null}}convertTimestamp(t){const i=Fr(t);return new ie(i.seconds,i.nanos)}convertDocumentKey(t,i){const s=ne.fromString(t);Ft(PE(s),9688,{name:t});const l=new Ol(s.get(1),s.get(3)),h=new mt(s.popFirst(5));return l.isEqual(i)||tr(`Document ${h} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(r,t,i){let s;return s=r?r.toFirestore(t):t,s}class El{constructor(t,i){this.hasPendingWrites=t,this.fromCache=i}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Ps extends gT{constructor(t,i,s,l,h,d){super(t,i,s,l,d),this._firestore=t,this._firestoreImpl=t,this.metadata=h}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const i=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,i={}){if(this._document){const s=this._document.data.field(pT("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new lt($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,i={};return i.type=Ps._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}Ps._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ps._jsonSchema={type:Se("string",Ps._jsonSchemaVersion),bundleSource:Se("string","DocumentSnapshot"),bundleName:Se("string"),bundle:Se("string")};class Mc extends Ps{data(t={}){return super.data(t)}}class Fa{constructor(t,i,s,l){this._firestore=t,this._userDataWriter=i,this._snapshot=l,this.metadata=new El(l.hasPendingWrites,l.fromCache),this.query=s}get docs(){const t=[];return this.forEach(i=>t.push(i)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,i){this._snapshot.docs.forEach(s=>{t.call(i,new Mc(this._firestore,this._userDataWriter,s.key,s,new El(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const i=!!t.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new lt($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=function(l,h){if(l._snapshot.oldDocs.isEmpty()){let d=0;return l._snapshot.docChanges.map(g=>{const y=new Mc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new El(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);return g.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}})}{let d=l._snapshot.oldDocs;return l._snapshot.docChanges.filter(g=>h||g.type!==3).map(g=>{const y=new Mc(l._firestore,l._userDataWriter,g.doc.key,g.doc,new El(l._snapshot.mutatedKeys.has(g.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,A=-1;return g.type!==0&&(_=d.indexOf(g.doc.key),d=d.delete(g.doc.key)),g.type!==1&&(d=d.add(g.doc),A=d.indexOf(g.doc.key)),{type:Z2(g.type),doc:y,oldIndex:_,newIndex:A}})}}(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new lt($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Fa._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Im.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],s=[],l=[];return this.docs.forEach(h=>{h._document!==null&&(i.push(h._document),s.push(this._userDataWriter.convertObjectMap(h._document.data.value.mapValue.fields,"previous")),l.push(h.ref.path))}),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Z2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _t(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J2(r){r=mi(r,ye);const t=mi(r.firestore,Wa);return P2(Zm(t),r._key).then(i=>vT(t,r,i))}Fa._jsonSchemaVersion="firestore/querySnapshot/1.0",Fa._jsonSchema={type:Se("string",Fa._jsonSchemaVersion),bundleSource:Se("string","QuerySnapshot"),bundleName:Se("string"),bundle:Se("string")};class yT extends X2{constructor(t){super(),this.firestore=t}convertBytes(t){return new jn(t)}convertReference(t){const i=this.convertDocumentKey(t,this.firestore._databaseId);return new ye(this.firestore,null,i)}}function W2(r,t,i){r=mi(r,ye);const s=mi(r.firestore,Wa),l=$2(r.converter,t);return _T(s,[H2(hT(s),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,pi.none())])}function Yv(r,t,i,...s){r=mi(r,ye);const l=mi(r.firestore,Wa),h=hT(l);let d;return d=typeof(t=rn(t))=="string"||t instanceof _h?F2(h,"updateDoc",r._key,t,i,s):G2(h,"updateDoc",r._key,t),_T(l,[d.toMutation(r._key,pi.exists(!0))])}function tC(r,...t){r=rn(r);let i={includeMetadataChanges:!1,source:"default"},s=0;typeof t[s]!="object"||Kv(t[s])||(i=t[s++]);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Kv(t[s])){const y=t[s];t[s]=y.next?.bind(y),t[s+1]=y.error?.bind(y),t[s+2]=y.complete?.bind(y)}let h,d,g;if(r instanceof ye)d=mi(r.firestore,Wa),g=oh(r._key.path),h={next:y=>{t[s]&&t[s](vT(d,r,y))},error:t[s+1],complete:t[s+2]};else{const y=mi(r,yh);d=mi(y.firestore,Wa),g=y._query;const _=new yT(d);h={next:A=>{t[s]&&t[s](new Fa(d,_,y,A))},error:t[s+1],complete:t[s+2]},Y2(r._query)}return function(_,A,D,I){const H=new sT(I),Z=new $E(A,H,D);return _.asyncQueue.enqueueAndForget(async()=>YE(await fm(_),Z)),()=>{H.Nu(),_.asyncQueue.enqueueAndForget(async()=>XE(await fm(_),Z))}}(Zm(d),g,l,h)}function _T(r,t){return function(s,l){const h=new qr;return s.asyncQueue.enqueueAndForget(async()=>S2(await x2(s),l,h)),h.promise}(Zm(r),t)}function vT(r,t,i){const s=i.docs.get(t._key),l=new yT(r);return new Ps(r,l,t._key,s,new El(i.hasPendingWrites,i.fromCache),t.converter)}(function(t,i=!0){(function(l){io=l})(eo),Qa(new Us("firestore",(s,{instanceIdentifier:l,options:h})=>{const d=s.getProvider("app").getImmediate(),g=new Wa(new Hw(s.getProvider("auth-internal")),new Qw(d,s.getProvider("app-check-internal")),function(_,A){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new lt($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(_.options.projectId,A)}(d,l),d);return h={useFetchStreams:i,...h},g._setSettings(h),g},"PUBLIC").setMultipleInstances(!0)),jr(Z_,J_,t),jr(Z_,J_,"esm2020")})();const Xv=typeof __firebase_config<"u"?JSON.parse(__firebase_config):{},zd=typeof __initial_auth_token<"u"?__initial_auth_token:null,Ac=typeof __app_id<"u"?__app_id:"default-app-id";let jd,za,Vr;if(Object.keys(Xv).length>0)try{jd=a0(Xv),za=L2(jd),Vr=zw(jd),console.log("Firebase a été initialisé avec succès.")}catch(r){console.error("Erreur lors de l'initialisation de Firebase:",r)}else console.error("La configuration Firebase est manquante.");const Bd=[{name:"Étirements",points:5,unit:"minutes",pointsPer:10,group:"Groupe 3"},{name:"Gainage (Statique/Dynamique)",points:2,unit:"secondes",pointsPer:30,group:"Groupe 3"},{name:"Abdominaux",points:2,unit:"série de 10",pointsPer:1,group:"Groupe 3"},{name:"Course à pied (Sur piste)",points:5,unit:"Km",pointsPer:1,group:"Groupe 1"},{name:"Course à pied (En forêt)",points:7,unit:"Km",pointsPer:1,group:"Groupe 1"},{name:"Course à pied (Sur la plage)",points:10,unit:"Km",pointsPer:1,group:"Groupe 1"},{name:"Natation (Piscine)",points:1,unit:"longueur (25m)",pointsPer:1,group:"Groupe 1"},{name:"Natation (Mer)",points:5,unit:"minutes",pointsPer:5,group:"Groupe 1"},{name:"Vélo (Elliptique/Appartement)",points:4,unit:"Km",pointsPer:1,group:"Groupe 1"},{name:"Vélo (Sur route)",points:5,unit:"Km",pointsPer:1,group:"Groupe 1"},{name:"Vélo (VTT)",points:7,unit:"Km",pointsPer:1,group:"Groupe 1"},{name:"Basket (Salle/Extérieur)",points:10,unit:"minutes",pointsPer:30,group:"Groupe 2"},{name:"Sport de raquettes",points:10,unit:"minutes",pointsPer:30,group:"Groupe 2"},{name:"Autres sports",points:10,unit:"minutes",pointsPer:30,group:"Autres"},{name:"Corde à sauter",points:3,unit:"minutes",pointsPer:1,group:"Autres"},{name:"Sport nautique (Canoë, Kayak, Ski nautique)",points:10,unit:"minutes",pointsPer:30,group:"Autres"}],Sc=r=>{r=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate())),r.setUTCDate(r.getUTCDate()+4-(r.getUTCDay()||7));const t=new Date(Date.UTC(r.getUTCFullYear(),0,1));return Math.ceil(((r-t)/864e5+1)/7)},pl=(r,t)=>{const i=r/t*100;return i>=100?"bg-orange-500":i>=50?"bg-blue-500":"bg-red-500"},eC=()=>{const[r,t]=ze.useState([]),[i,s]=ze.useState(!0),[l,h]=ze.useState(null),[d,g]=ze.useState(!1),[y,_]=ze.useState(Bd[0]),[A,D]=ze.useState(""),[I,H]=ze.useState(""),[Z,rt]=ze.useState(!1),[J,gt]=ze.useState(""),[dt,ft]=ze.useState(""),[qt,At]=ze.useState(!1),[wt,M]=ze.useState(null),[S,w]=ze.useState(!1),[O,V]=ze.useState(null),[P,R]=ze.useState(!1);ze.useEffect(()=>{if(!Vr){console.error("Auth n'est pas initialisé."),ft("La connexion à la base de données a échoué. Veuillez vérifier la configuration.");return}const tt=Cb(Vr,async st=>{try{st||(zd?(await wb(Vr,zd),console.log("Authentification avec token personnalisée réussie.")):(await Eb(Vr),console.log("Authentification anonyme réussie."))),Vr.currentUser&&h(Vr.currentUser.uid),g(!0)}catch(Nt){console.error("Erreur d'authentification:",Nt),ft("Erreur d'authentification. Veuillez réessayer."),g(!0)}});return()=>tt()},[Vr,zd]),ze.useEffect(()=>{if(!za||!d||dt){console.log("Firestore non prêt, ne pas écouter les données.");return}s(!0);const tt=U2(za,`artifacts/${Ac}/public/data/team_challenge`),st=tC(tt,Nt=>{const oe=Nt.docs.map(te=>({id:te.id,...te.data()}));t(oe),s(!1),console.log("Données mises à jour depuis Firestore.")},Nt=>{console.error("Erreur lors de la récupération des données:",Nt),ft("Erreur de connexion à la base de données. Veuillez réessayer."),s(!1)});return()=>st()},[d,za,Ac,dt]);const be=async()=>{if(!I||!A){gt("Veuillez remplir le nom du joueur et la quantité.");return}s(!0),gt("");const tt=y.name,st=y.group,Nt=parseFloat(A)/y.pointsPer*y.points,oe=new Date().toISOString().slice(0,10),te=Sc(new Date);try{const we=Hv(za,`artifacts/${Ac}/public/data/team_challenge`,I.toLowerCase()),sn=await J2(we),wn={exercise:tt,quantity:parseFloat(A),points:Nt,date:oe,group:st,timestamp:Date.now()};if(sn.exists()){const Me=sn.data(),Rn={...Me.dailyPoints,[oe]:(Me.dailyPoints?.[oe]||0)+Nt},Xe={...Me.weeklyPoints,[te]:(Me.weeklyPoints?.[te]||0)+Nt},Bn={...Me.groupPoints};Bn[te]||(Bn[te]={}),Bn[te][st]=(Bn[te]?.[st]||0)+Nt;const Jr=[...Me.allActivities||[],wn];await Yv(we,{dailyPoints:Rn,weeklyPoints:Xe,allActivities:Jr,name:I,groupPoints:Bn}),console.log("Document mis à jour pour le joueur :",I)}else{const Me={name:I,dailyPoints:{[oe]:Nt},weeklyPoints:{[te]:Nt},groupPoints:{[te]:{[st]:Nt}},allActivities:[wn]};await W2(we,Me),console.log("Nouveau document créé pour le joueur :",I)}gt("Entraînement ajouté avec succès !"),D(""),rt(!1)}catch(we){console.error("Erreur lors de l'ajout de l'entraînement:",we),gt("Erreur lors de l'ajout. Veuillez réessayer.")}finally{s(!1)}},re=async()=>{if(!(!wt||!O)){R(!0),gt("");try{const tt=Hv(za,`artifacts/${Ac}/public/data/team_challenge`,wt.id),st=wt,Nt=O,oe=Nt.points,te=Nt.group,we=Nt.date,sn=Sc(new Date(we)),wn={...st.weeklyPoints,[sn]:(st.weeklyPoints?.[sn]||0)-oe},Me={...st.groupPoints};Me?.[sn]?.[te]&&(Me[sn][te]-=oe);const Rn={...st.dailyPoints};Rn?.[we]&&(Rn[we]-=oe,Rn[we]<=0&&delete Rn[we]);const Xe=(st.allActivities||[]).filter(Bn=>Bn.timestamp!==Nt.timestamp);await Yv(tt,{dailyPoints:Rn,weeklyPoints:wn,groupPoints:Me,allActivities:Xe}),gt(`Activité supprimée avec succès pour ${wt.name}.`),w(!1),V(null)}catch(tt){console.error("Erreur lors de la suppression de l'activité:",tt),gt("Erreur lors de la suppression. Veuillez réessayer.")}finally{R(!1)}}},q=tt=>{const st=Sc(new Date);return tt.weeklyPoints&&tt.weeklyPoints[st]||0},et=(tt,st)=>{const Nt=Sc(new Date);return tt.groupPoints?.[Nt]?.[st]||0},ut=[...r].sort((tt,st)=>q(st)-q(tt)),jt=()=>{H(""),D(""),gt(""),rt(!0)},C=tt=>{M(tt),At(!0)},X=()=>{At(!1),M(null)},it=tt=>{V(tt),w(!0)},W=()=>{V(null),w(!1)};if(i&&!dt)return Q.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-950 text-white",children:Q.jsx("div",{className:"text-xl",children:"Chargement..."})});if(dt)return Q.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-950 text-white p-4 text-center",children:Q.jsxs("div",{className:"bg-gray-900 rounded-lg p-8",children:[Q.jsx("p",{className:"text-xl text-red-400 font-bold mb-4",children:"Erreur"}),Q.jsx("p",{className:"text-gray-300",children:dt})]})});const ct=wt?wt.allActivities.reduce((tt,st)=>{const{date:Nt,...oe}=st;return tt[Nt]||(tt[Nt]=[]),tt[Nt].push(oe),tt},{}):{},It=tt=>tt>=200?"🎉":tt>=150?"💪":tt>=100?"👍":tt>=50?"🏃‍♂️":"";Object.keys(ct).sort((tt,st)=>new Date(st)-new Date(tt));const vt=({points:tt,goal:st,title:Nt})=>{const oe=Math.min(100,tt/st*100),te=pl(tt,st);return Q.jsxs("div",{className:"w-full flex flex-col items-center p-2 bg-gray-800 rounded-lg shadow-inner",children:[Q.jsx("div",{className:"text-sm font-semibold text-gray-300 mb-1",children:Nt}),Q.jsx("div",{className:"relative w-full h-4 bg-gray-700 rounded-full overflow-hidden",children:Q.jsx("div",{className:`absolute top-0 left-0 h-full rounded-full transition-all duration-500 ${te}`,style:{width:`${oe}%`}})}),Q.jsxs("div",{className:"w-full flex justify-between mt-1 text-xs font-mono",children:[Q.jsx("span",{className:"text-gray-400",children:"0"}),Q.jsxs("span",{className:"font-bold text-blue-300",children:[tt.toFixed(1)," / ",st," pts"]}),Q.jsx("span",{className:"text-gray-400",children:st})]})]})};return Q.jsx("div",{className:"bg-gray-950 text-white min-h-screen p-4 sm:p-8 font-sans",children:Q.jsxs("div",{className:"max-w-4xl mx-auto",children:[Q.jsxs("h1",{className:"text-3xl sm:text-4xl font-bold text-center mb-6 text-orange-400 flex items-center justify-center",children:[Q.jsx("img",{src:"https://static.wixstatic.com/media/613e2c_49bfb0765aa44b0b8211af156607e247~mv2.png/v1/fill/w_77,h_77,al_c,q_85,usm_0.66_1.00_0.01,enc_avif,quality_auto/613e2c_49bfb0765aa44b0b8211af156607e247~mv2.png",alt:"Logo du club",className:"w-12 h-12 rounded-full mr-4"}),"Training summer 2025"]}),Q.jsxs("p",{className:"text-center mb-8 text-gray-400",children:["*Note: L'ID de session est ",Q.jsx("span",{className:"font-mono text-sm break-all",children:l})]}),Q.jsxs("div",{className:"bg-gray-900 rounded-2xl shadow-lg p-4 sm:p-6 mb-8 border border-orange-500",children:[Q.jsx("h2",{className:"text-xl sm:text-2xl font-semibold mb-4 text-orange-400",children:"Classement de l'équipe (semaine en cours)"}),Q.jsx("div",{className:"overflow-x-auto",children:Q.jsxs("table",{className:"w-full text-left",children:[Q.jsx("thead",{children:Q.jsxs("tr",{className:"bg-gray-800",children:[Q.jsx("th",{className:"p-3 rounded-tl-xl",children:"Rang"}),Q.jsx("th",{className:"p-3",children:"Joueur"}),Q.jsx("th",{className:"p-3",children:"Points Totaux"}),Q.jsx("th",{className:"p-3",children:"Course/Vélo/Natation"}),Q.jsx("th",{className:"p-3",children:"Sports collectifs"}),Q.jsx("th",{className:"p-3 rounded-tr-xl",children:"Gainage/Étirements/Abdos"})]})}),Q.jsx("tbody",{children:ut.length>0?ut.map((tt,st)=>Q.jsxs("tr",{className:"border-t border-gray-800 hover:bg-gray-800 transition-colors duration-200",children:[Q.jsx("td",{className:"p-3",children:st+1}),Q.jsxs("td",{className:"p-3 flex items-center space-x-2",children:[st===0&&Q.jsx("span",{role:"img","aria-label":"gold trophy",children:"🥇"}),st===1&&Q.jsx("span",{role:"img","aria-label":"silver trophy",children:"🥈"}),st===2&&Q.jsx("span",{role:"img","aria-label":"bronze trophy",children:"🥉"}),Q.jsx("span",{onClick:()=>C(tt),className:"font-bold cursor-pointer hover:underline text-blue-300",children:tt.name})]}),Q.jsxs("td",{className:"p-3",children:[Q.jsxs("span",{className:"font-bold text-lg",children:[q(tt).toFixed(1)," ",It(q(tt))]}),Q.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mt-1",children:Q.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${pl(q(tt),200)}`,style:{width:`${Math.min(100,q(tt)/200*100)}%`}})})]}),Q.jsxs("td",{className:"p-3",children:[Q.jsx("span",{className:"font-bold text-sm",children:et(tt,"Groupe 1").toFixed(1)}),Q.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mt-1",children:Q.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${pl(et(tt,"Groupe 1"),50)}`,style:{width:`${Math.min(100,et(tt,"Groupe 1")/50*100)}%`}})})]}),Q.jsxs("td",{className:"p-3",children:[Q.jsx("span",{className:"font-bold text-sm",children:et(tt,"Groupe 2").toFixed(1)}),Q.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mt-1",children:Q.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${pl(et(tt,"Groupe 2"),50)}`,style:{width:`${Math.min(100,et(tt,"Groupe 2")/50*100)}%`}})})]}),Q.jsxs("td",{className:"p-3",children:[Q.jsx("span",{className:"font-bold text-sm",children:et(tt,"Groupe 3").toFixed(1)}),Q.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5 mt-1",children:Q.jsx("div",{className:`h-2.5 rounded-full transition-all duration-500 ${pl(et(tt,"Groupe 3"),50)}`,style:{width:`${Math.min(100,et(tt,"Groupe 3")/50*100)}%`}})})]})]},tt.id)):Q.jsx("tr",{children:Q.jsx("td",{colSpan:"6",className:"p-3 text-center text-gray-500",children:"Aucun joueur pour le moment. Soyez le premier à vous entraîner !"})})})]})})]}),Q.jsx("div",{className:"text-center",children:Q.jsx("button",{onClick:jt,className:"px-6 py-3 bg-orange-500 text-white font-bold rounded-full shadow-lg hover:bg-orange-600 transition-colors duration-300 transform hover:scale-105",children:"Ajouter un entraînement"})}),Z&&Q.jsx("div",{className:"fixed inset-0 bg-gray-950 bg-opacity-75 flex items-center justify-center p-4 z-50",children:Q.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 w-full max-w-md border border-orange-500 shadow-xl",children:[Q.jsx("h3",{className:"text-2xl font-semibold mb-4 text-orange-400",children:"Ajouter un entraînement"}),Q.jsxs("div",{className:"space-y-4",children:[Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"player-name-input",className:"block text-gray-300",children:"Votre nom :"}),Q.jsx("input",{id:"player-name-input",type:"text",value:I,onChange:tt=>H(tt.target.value),className:"w-full p-2 mt-1 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:border-orange-500",placeholder:"Entrez votre nom"})]}),Q.jsxs("div",{children:[Q.jsx("label",{htmlFor:"exercise-select",className:"block text-gray-300",children:"Activité :"}),Q.jsx("select",{id:"exercise-select",value:y.name,onChange:tt=>_(Bd.find(st=>st.name===tt.target.value)),className:"w-full p-2 mt-1 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:border-orange-500",children:Bd.map(tt=>Q.jsx("option",{value:tt.name,children:tt.name},tt.name))})]}),Q.jsxs("div",{children:[Q.jsxs("label",{htmlFor:"quantity-input",className:"block text-gray-300",children:["Quantité (",y.unit,") :"]}),Q.jsx("input",{id:"quantity-input",type:"number",value:A,onChange:tt=>D(tt.target.value),className:"w-full p-2 mt-1 rounded-lg bg-gray-800 text-white border border-gray-700 focus:outline-none focus:border-orange-500"})]}),Q.jsxs("div",{className:"text-center text-gray-400",children:["Points estimés : ",Q.jsx("span",{className:"font-bold text-orange-400",children:A?(parseFloat(A)/y.pointsPer*y.points).toFixed(1):"0"})]}),J&&Q.jsx("p",{className:"text-sm text-center text-red-400",children:J}),Q.jsxs("div",{className:"flex justify-end space-x-4 mt-6",children:[Q.jsx("button",{onClick:()=>rt(!1),className:"px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition-colors duration-200",children:"Annuler"}),Q.jsx("button",{onClick:be,disabled:i,className:"px-4 py-2 bg-orange-500 text-white font-bold rounded-full hover:bg-orange-600 transition-colors duration-200 disabled:opacity-50",children:i?"Envoi...":"Enregistrer"})]})]})]})}),qt&&wt&&Q.jsx("div",{className:"fixed inset-0 bg-gray-950 bg-opacity-75 flex items-center justify-center p-4 z-50",children:Q.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 w-full max-w-2xl border border-orange-500 shadow-xl max-h-[90vh] overflow-y-auto",children:[Q.jsxs("h3",{className:"text-2xl font-semibold mb-4 text-orange-400",children:["Synthèse des entraînements de ",wt.name]}),Q.jsx("div",{className:"mb-6",children:Q.jsx(vt,{points:q(wt),goal:200,title:"Objectif hebdomadaire: 200 points"})}),Object.keys(ct).length>0?Object.keys(ct).sort((tt,st)=>new Date(st)-new Date(tt)).map(tt=>Q.jsxs("div",{className:"mb-6 p-4 bg-gray-800 rounded-lg",children:[Q.jsx("div",{className:"flex justify-between items-center mb-2",children:Q.jsxs("h4",{className:"text-xl font-bold text-blue-300",children:["Journée du ",tt]})}),Q.jsx("ul",{className:"space-y-2",children:ct[tt].map(st=>Q.jsxs("li",{className:"bg-gray-700 p-3 rounded-md flex justify-between items-center",children:[Q.jsxs("span",{children:[Q.jsx("span",{className:"font-semibold",children:st.exercise})," : ",st.quantity," ",st.unit]}),Q.jsxs("span",{className:"flex items-center space-x-2",children:[Q.jsxs("span",{className:"font-bold text-blue-300",children:[st.points.toFixed(1)," points"]}),Q.jsx("button",{onClick:()=>it(st),className:"text-white bg-red-500 hover:bg-red-600 p-1 rounded-full transition-colors duration-200",children:Q.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:Q.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm6 0a1 1 0 112 0v6a1 1 0 11-2 0V8z",clipRule:"evenodd"})})})]})]},st.timestamp))})]},tt)):Q.jsx("p",{className:"text-gray-400",children:"Aucun entraînement enregistré pour ce joueur."}),Q.jsx("div",{className:"text-right mt-6",children:Q.jsx("button",{onClick:X,className:"px-6 py-3 bg-orange-500 text-white font-bold rounded-full hover:bg-orange-600 transition-colors duration-300",children:"Fermer"})})]})}),S&&Q.jsx("div",{className:"fixed inset-0 bg-gray-950 bg-opacity-75 flex items-center justify-center p-4 z-50",children:Q.jsxs("div",{className:"bg-gray-900 rounded-2xl p-6 w-full max-w-sm border border-red-500 shadow-xl",children:[Q.jsx("h3",{className:"text-xl font-semibold mb-4 text-red-400",children:"Confirmer la suppression"}),Q.jsxs("p",{className:"text-gray-300 mb-4",children:["Êtes-vous sûr de vouloir supprimer l'activité ",Q.jsx("span",{className:"font-bold",children:O.exercise})," du ",Q.jsx("span",{className:"font-bold",children:O.date})," pour ",Q.jsx("span",{className:"font-bold",children:wt.name})," ? Cette action est irréversible."]}),J&&Q.jsx("p",{className:"text-sm text-center text-red-400 mb-4",children:J}),Q.jsxs("div",{className:"flex justify-end space-x-4",children:[Q.jsx("button",{onClick:W,disabled:P,className:"px-4 py-2 bg-gray-700 text-white rounded-full hover:bg-gray-600 transition-colors disabled:opacity-50",children:"Annuler"}),Q.jsx("button",{onClick:re,disabled:P,className:"px-4 py-2 bg-red-500 text-white font-bold rounded-full hover:bg-red-600 transition-colors disabled:opacity-50",children:P?"Suppression...":"Supprimer"})]})]})})]})})};WA.createRoot(document.getElementById("root")).render(Q.jsx(ze.StrictMode,{children:Q.jsx(eC,{})}));
